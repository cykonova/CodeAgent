# Phase 06.5: Table Card Component

## Overview
Create a reusable table component wrapped in a card for displaying tabular data with sorting, filtering, and pagination.

## Objectives
- Build data table with Material Design
- Support sorting and pagination
- Integrate with Card component
- Implement responsive design

## Prerequisites
- Phase 06.1 (Project Setup) completed
- Phase 06.2 (Theme System) completed
- Phase 06.4 (Card Component) completed

## Implementation

### 1. Generate Component
Use Angular CLI to generate a standalone table-card component in the shared components directory.

### 2. Table Card Model Requirements

Create TypeScript interfaces in `shared/models/table.model.ts` with the following structure:

#### TableColumn Interface
Define column configuration with:
- `key`: Property name in data object
- `label`: Display text for column header
- `sortable` (optional): Enable column sorting
- `width` (optional): Column width specification
- `align` (optional): Text alignment (left, center, right)
- `type` (optional): Data type for formatting (text, number, date, status, actions)

#### TableAction Interface
Define row action configuration with:
- `icon`: Material icon name
- `label`: Tooltip text for action
- `color` (optional): Material theme color (primary, accent, warn)
- `callback`: Function to execute on click

#### TableConfig Interface
Define overall table configuration with:
- `columns`: Array of column definitions
- `actions` (optional): Array of row actions
- `pageSize` (optional): Default items per page
- `pageSizeOptions` (optional): Available page size options
- `showPagination` (optional): Toggle pagination display
- `striped` (optional): Enable row striping
- `hoverable` (optional): Enable row hover effects

### 3. Table Card Component Requirements

#### Component Configuration
Build a standalone component that combines the Card component with Material table functionality:
- Import necessary Angular Material modules (table, paginator, sort, button, icon, tooltip)
- Import and utilize the Card component as a wrapper
- Use the table configuration interfaces for type safety

#### Input/Output Properties
Configure the following component properties:
- `title` (optional): Card title passed to wrapper
- `subtitle` (optional): Card subtitle passed to wrapper
- `data`: Array of data objects to display
- `config`: TableConfig object defining table behavior
- `rowClick`: EventEmitter for row selection events

#### Template Structure
Build the component template with these requirements:

**Wrapper Structure:**
- Use the Card component as the container
- Pass title and subtitle to the Card component
- Wrap table in a container div for overflow handling

**Table Configuration:**
- Use Material table with MatTableDataSource
- Enable sorting with matSort directive
- Apply conditional classes for striped and hoverable states
- Use theme variables for all spacing

**Dynamic Column Generation:**
- Generate columns from config.columns array
- Apply column-specific width and alignment
- Enable sorting conditionally based on column.sortable
- Implement type-based formatting:
  - Status: Display as styled badge
  - Date: Format using date pipe
  - Number: Format using number pipe
  - Text: Display as-is

**Actions Column:**
- Conditionally add actions column when actions are defined
- Display action buttons with Material icons
- Apply theme colors to action buttons
- Show tooltips for each action

**Row Handling:**
- Implement click handler for row selection
- Display "No data" message when empty
- Use proper Material table row directives

**Pagination:**
- Conditionally display paginator based on config
- Configure page size and options from config
- Include first/last page buttons

### 4. Table Card Styling Guidelines

#### Container Styles
- Set overflow-x to auto for horizontal scrolling on small screens
- Table width should be 100% of container

#### Table Row Styling
**Striped Rows:**
- Apply subtle background to even rows
- Use low opacity background color for visibility
- Ensure contrast works in both themes

**Hoverable Rows:**
- Add hover background color change
- Set cursor to pointer on hover
- Use theme-appropriate hover colors

#### Cell Styling
**Header Cells:**
- Use Material typography for font weight
- Apply proper text color with theme opacity
- Maintain consistent header styling

**Data Cells:**
- Padding: Use `--spacing-sm` and `--spacing-md` variables
- Text alignment based on column configuration
- Proper spacing between cells

**No Data Row:**
- Center align the message
- Padding: Use `--spacing-xl` variable
- Apply muted text color with appropriate opacity

#### Status Badge Styling
Create reusable status badge styles:
- Padding: Use `--spacing-xs` and `--spacing-sm` variables
- Border radius: Use `--radius-sm` variable
- Font size: Use Material's caption size
- Font weight: Use `--font-weight-medium` variable

Status color variants using Material colors:
- **Active**: Success color (Material green)
- **Inactive**: Neutral color (Material grey)
- **Pending**: Warning color (Material orange)
- **Error**: Error color (Material red)

#### Dark Theme Adjustments
Implement dark theme overrides:
- Adjust striped row background opacity
- Modify hover state background for dark surfaces
- Update text colors to appropriate light values
- Ensure sufficient contrast for all elements

## Usage Example

```typescript
// In component
tableConfig: TableConfig = {
  columns: [
    { key: 'name', label: 'Project Name', sortable: true },
    { key: 'status', label: 'Status', type: 'status', width: '100px' },
    { key: 'created', label: 'Created', type: 'date', sortable: true },
    { key: 'agents', label: 'Agents', type: 'number', align: 'center' }
  ],
  actions: [
    { icon: 'edit', label: 'Edit', color: 'primary', callback: (row) => this.editProject(row) },
    { icon: 'delete', label: 'Delete', color: 'warn', callback: (row) => this.deleteProject(row) }
  ],
  pageSize: 10,
  striped: true,
  hoverable: true
};

projectData = [
  { name: 'E-Commerce Scraper', status: 'Active', created: new Date(), agents: 3 },
  { name: 'Code Review Bot', status: 'Pending', created: new Date(), agents: 2 }
];
```

```html
<!-- In template -->
<app-table-card
  title="Projects"
  subtitle="Manage your projects"
  [data]="projectData"
  [config]="tableConfig"
  (rowClick)="onProjectSelect($event)">
</app-table-card>
```

## Testing

### Unit Test Requirements
Create comprehensive unit tests that verify:
- Component creation with required configuration
- Correct number of table rows rendered
- Column headers match configuration
- Row click events emit correctly
- Sorting functionality when enabled
- Pagination controls display conditionally
- Action buttons render and trigger callbacks
- Data formatting based on column types
- Filter functionality works correctly
- Theme variables are applied

### Test Setup
- Configure TestBed with TableCardComponent and dependencies
- Mock data array with various data types
- Create sample TableConfig with all options
- Test different configuration combinations
- Verify Material components integration

### Manual Testing Checklist
- [ ] Table renders within Card component wrapper
- [ ] All column types display with correct formatting
- [ ] Sorting works on sortable columns only
- [ ] Pagination controls function correctly
- [ ] Row striping applies when configured
- [ ] Hover effects work on hoverable tables
- [ ] Action buttons display with correct icons and colors
- [ ] Status badges show with appropriate styling
- [ ] Theme variables used for all spacing and styling
- [ ] Dark theme displays correctly
- [ ] Responsive behavior on mobile devices
- [ ] No hardcoded colors or spacing values

## Deliverables
- [ ] Table card component created
- [ ] Sorting functionality works
- [ ] Pagination implemented
- [ ] Actions column functional
- [ ] Responsive design
- [ ] Status badges styled
- [ ] Unit tests passing

## Next Steps
- Implement Status Indicator Component (06.4)
- Create Metric Card Component (06.5)