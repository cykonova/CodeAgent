# Phase 06.2: Theme System

## Overview
Establish a comprehensive theming system using Angular Material and CSS custom properties to ensure consistent styling across the application.

## Objectives
- Define CSS custom properties for spacing, colors, and layout
- Configure Angular Material themes
- Set up light and dark theme support
- Create reusable style utilities
- Document theme usage guidelines

## Prerequisites
- Phase 06.1 (Project Setup) completed
- Angular Material installed

## Theme Architecture

### 1. CSS Custom Properties Structure

Create a layered system of CSS variables that provides consistent design tokens throughout the application.

#### File Organization
- `src/styles/_theme-variables.scss` - CSS custom properties
- `src/styles/_theme.scss` - Angular Material theme configuration
- `src/styles/_utilities.scss` - Helper classes and mixins
- `src/styles/styles.scss` - Main stylesheet entry point

### 2. Color System

#### Material Theme Colors
Configure Angular Material's theme colors using their theming API:
- **Primary Palette**: Main brand color (e.g., blue)
- **Accent Palette**: Secondary/complementary color (e.g., amber)
- **Warn Palette**: Error/warning states (e.g., red)

Access colors through Material's theme functions:
- `mat.get-theme-color($theme, primary)`
- `mat.get-theme-color($theme, accent)`
- `mat.get-theme-color($theme, warn)`

#### Surface Colors
Define background and surface colors:
- Background colors from Material theme
- Card surface colors
- Overlay backgrounds
- Divider colors with appropriate opacity

#### Text Colors
Use Material's text opacity system:
- Primary text: 87% opacity (dark theme: 100%)
- Secondary text: 60% opacity (dark theme: 70%)
- Disabled text: 38% opacity (dark theme: 50%)
- Hint text: 38% opacity (dark theme: 50%)

### 3. Spacing System

Implement an 8px grid-based spacing scale:

```scss
--spacing-xs: 4px;   // Minimal spacing (icon padding, small gaps)
--spacing-sm: 8px;   // Small spacing (form field gaps, list item padding)
--spacing-md: 16px;  // Medium spacing (card padding, section spacing)
--spacing-lg: 24px;  // Large spacing (page padding, section margins)
--spacing-xl: 32px;  // Extra large spacing (major section dividers)
--spacing-xxl: 48px; // Maximum spacing (hero sections, major breaks)
```

#### Usage Guidelines
- Use for all padding and margins
- Maintain consistency across components
- Use calc() for intermediate values: `calc(var(--spacing-md) * 1.5)`
- Apply responsive scaling for mobile

### 4. Typography System

#### Material Typography Levels
Leverage Angular Material's typography hierarchy:
- `mat.headline-1` through `mat.headline-6`
- `mat.subtitle-1` and `mat.subtitle-2`
- `mat.body-1` and `mat.body-2`
- `mat.caption`
- `mat.button`
- `mat.overline`

#### Font Weights
Define consistent font weight variables:
```scss
--font-weight-light: 300;
--font-weight-regular: 400;
--font-weight-medium: 500;
--font-weight-bold: 700;
```

#### Font Configuration
- Primary font: Roboto (Material default)
- Fallback fonts: System fonts
- Configure through Material's typography config

### 5. Layout System

#### Border Radius Tokens
Define consistent corner rounding:
```scss
--radius-sm: 4px;    // Buttons, inputs, small cards
--radius-md: 8px;    // Cards, dialogs
--radius-lg: 16px;   // Large cards, modals
--radius-full: 50%;  // Circular elements, avatars
```

#### Elevation/Shadow System
Define shadow levels for depth:
```scss
--shadow-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
--shadow-md: 0 3px 6px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.12);
--shadow-lg: 0 10px 20px rgba(0,0,0,0.15), 0 3px 6px rgba(0,0,0,0.10);
--shadow-xl: 0 15px 25px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.05);
```

Note: Prefer Material's elevation mixins when available

#### Container Widths
Define responsive container sizes:
```scss
--container-xs: 360px;   // Mobile minimum
--container-sm: 600px;   // Small tablet
--container-md: 960px;   // Standard desktop
--container-lg: 1280px;  // Wide desktop
--container-xl: 1920px;  // Maximum width
```

### 6. Component-Specific Variables

#### Card Styling
- Padding: `--spacing-md` (default)
- Border radius: `--radius-md`
- Shadow: `--shadow-md` (elevated state)
- Background: Material surface color

#### Table Styling
- Cell padding: `--spacing-sm` horizontal, `--spacing-xs` vertical
- Border color: Material divider color
- Row hover: Material hover state
- Header background: Slightly darker surface

#### Form Field Styling
- Field spacing: `--spacing-sm` between fields
- Border radius: `--radius-sm`
- Use Material's form field appearance options
- Error state: Material warn color

#### Button Styling
- Padding: Follow Material button specifications
- Border radius: `--radius-sm`
- Use Material button variants
- Custom buttons should follow theme

### 7. Theme Implementation

#### Light Theme Configuration
Create light theme with:
- Material light theme base
- Custom property overrides
- Appropriate contrast ratios
- WCAG AA compliance

#### Dark Theme Configuration
Create dark theme with:
- Material dark theme base
- Inverted color properties
- Adjusted shadows for dark surfaces
- Maintained readability

#### Theme Switching
Implement theme toggle functionality:
- Store preference in localStorage
- Apply theme class to root element
- Smooth transitions between themes
- System preference detection

### 8. Implementation Guidelines

#### Best Practices
1. **Never hardcode values** - Always use theme variables
2. **Use calc() for variations** - Create computed values from base variables
3. **Respect Material Design** - Use Material's built-in theming when available
4. **Support dark mode** - Ensure all colors work in both themes
5. **Mobile-first approach** - Use responsive spacing that scales
6. **Maintain consistency** - Use the same variables for similar purposes
7. **Document exceptions** - If hardcoding is necessary, document why

#### CSS Architecture
- Use SCSS for advanced features
- Organize styles by feature/component
- Create reusable mixins for common patterns
- Avoid deep nesting (max 3 levels)
- Use BEM or similar naming convention

#### Performance Considerations
- Minimize CSS custom property lookups in animations
- Use CSS containment for complex components
- Lazy load component styles when possible
- Optimize for critical rendering path

## Testing Theme Implementation

### Visual Testing
- [ ] All spacing uses theme variables
- [ ] Colors adapt to theme changes
- [ ] No hardcoded values in components
- [ ] Consistent styling across features
- [ ] Proper contrast ratios maintained

### Responsive Testing
- [ ] Spacing scales appropriately on mobile
- [ ] Typography remains readable
- [ ] Touch targets meet minimum sizes
- [ ] Layout adapts to screen sizes

### Accessibility Testing
- [ ] WCAG AA contrast compliance
- [ ] Focus indicators visible
- [ ] Color not sole indicator of state
- [ ] Theme changes announced to screen readers

## Deliverables
- [ ] Theme variables file created
- [ ] Material theme configured
- [ ] Light theme implemented
- [ ] Dark theme implemented
- [ ] Theme switching functional
- [ ] Documentation complete
- [ ] All hardcoded values removed

## Next Steps
- Implement site layout (Phase 06.3)
- Create themed components
- Apply theme to all features