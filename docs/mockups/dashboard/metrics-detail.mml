// Dashboard Remote - Detailed Metrics Page
// Shows detailed performance metrics and charts

screen(id="metrics-detail", device=desktop) {
    header {
        breadcrumb {
            link(transitionTo="dashboard", label="Dashboard")
            text { Detailed Metrics }
        }
    }
    
    // Time range selector
    toolbar(style=transparent) {
        text { Time Range: }
        field(type=dropdown, options="Last Hour,Last 24 Hours,Last 7 Days,Last 30 Days", value="Last 24 Hours")
        expander
        button(style=primary, label="Apply Filters")
        button(style=secondary, label="Export", icon="download")
    }
    
    // Performance Metrics
    layout(type=grid, cols=2) {
        // Request Volume Chart
        panel {
            text(fontSize*=1.3) { Request Volume }
            text(style=muted) { Requests per hour over selected period }
            
            // Chart placeholder
            card {
                layout(type=column, align=center) {
                    icon(iconName="chart-line", size=large, style=primary)
                    text { [Line Chart: Request volume over time] }
                    text(style=muted) { Peak: 1,234 requests at 2:00 PM }
                }
            }
        }
        
        // Response Time Distribution
        panel {
            text(fontSize*=1.3) { Response Time Distribution }
            text(style=muted) { Latency breakdown by percentile }
            
            table(style="striped") {
                row(type=header) {
                    cell { text { Percentile } }
                    cell { text { Response Time } }
                }
                row {
                    cell { text { P50 (Median) } }
                    cell { text { 95ms } }
                }
                row {
                    cell { text { P75 } }
                    cell { text { 145ms } }
                }
                row {
                    cell { text { P90 } }
                    cell { text { 220ms } }
                }
                row {
                    cell { text { P95 } }
                    cell { text { 380ms } }
                }
                row {
                    cell { text { P99 } }
                    cell { text { 850ms } }
                }
            }
        }
        
        // Agent Utilization
        panel {
            text(fontSize*=1.3) { Agent Utilization }
            text(style=muted) { Resource usage by agent type }
            
            table(style="bordered") {
                row(type=header) {
                    cell { text { Agent Type } }
                    cell { text { CPU % } }
                    cell { text { Memory } }
                    cell { text { Tasks } }
                }
                row {
                    cell { text { Data Processor } }
                    cell { text { 45% } }
                    cell { text { 512 MB } }
                    cell { text { 234 } }
                }
                row {
                    cell { text { Code Analyzer } }
                    cell { text { 62% } }
                    cell { text { 768 MB } }
                    cell { text { 189 } }
                }
                row {
                    cell { text { Test Runner } }
                    cell { text { 38% } }
                    cell { text { 256 MB } }
                    cell { text { 412 } }
                }
                row {
                    cell { text { Doc Generator } }
                    cell { text { 25% } }
                    cell { text { 128 MB } }
                    cell { text { 87 } }
                }
            }
        }
        
        // Error Analysis
        panel {
            text(fontSize*=1.3) { Error Analysis }
            text(style=muted) { Error types and frequency }
            
            layout(type=column, align=left) {
                row {
                    text { Rate Limit Errors: }
                    text { 12 (0.1%) }
                }
                row {
                    text { Timeout Errors: }
                    text { 8 (0.06%) }
                }
                row {
                    text { API Errors: }
                    text { 3 (0.02%) }
                }
                row {
                    text { Network Errors: }
                    text { 2 (0.01%) }
                }
                row {
                    text { Total Error Rate: }
                    text(style=success) { 0.19% âœ“ }
                }
            }
        }
    }
    
    // Cost Analysis
    panel {
        text(fontSize*=1.3) { Cost Analysis }
        
        table(style="striped bordered") {
            row(type=header) {
                cell { text { Provider } }
                cell { text { Requests } }
                cell { text { Tokens Used } }
                cell { text { Estimated Cost } }
                cell { text { % of Budget } }
            }
            row {
                cell { text { Anthropic Claude } }
                cell { text { 5,234 } }
                cell { text { 2.4M } }
                cell { text { $48.50 } }
                cell { text { 32% } }
            }
            row {
                cell { text { OpenAI GPT-4 } }
                cell { text { 4,112 } }
                cell { text { 3.1M } }
                cell { text { $62.30 } }
                cell { text { 41% } }
            }
            row {
                cell { text { Ollama (Local) } }
                cell { text { 3,112 } }
                cell { text { 1.8M } }
                cell { text { $0.00 } }
                cell { text { 0% } }
            }
            row(type=footer) {
                cell { text { Total } }
                cell { text { 12,458 } }
                cell { text { 7.3M } }
                cell { text { $110.80 } }
                cell { text { 73% } }
            }
        }
    }
}