<div class="general-config">
  <form [formGroup]="form" class="config-form">
    <app-panel title="Project Settings" icon="folder">
      <app-form-field
        label="Project Directory"
        placeholder="/path/to/project"
        formControlName="projectDirectory"
        suffixIcon="folder"
        hint="Primary working directory for CodeAgent">
      </app-form-field>
      
      <div class="directory-section">
        <h4>Additional Permitted Directories</h4>
        <div class="add-directory">
          <mat-form-field appearance="outline" class="flex-field">
            <mat-label>Add Directory</mat-label>
            <input matInput [(ngModel)]="newPermittedDir" [ngModelOptions]="{standalone: true}" 
                   placeholder="/path/to/additional/directory">
          </mat-form-field>
          <button mat-icon-button color="primary" (click)="addPermittedDirectory()">
            <mat-icon>add_circle</mat-icon>
          </button>
        </div>
        
        <app-chip-list
          [chips]="getDirectoryChips()"
          (chipRemoved)="onChipRemoved($event)">
        </app-chip-list>
      </div>
    </app-panel>
    
    <mat-divider></mat-divider>
    
    <app-panel title="Chat Settings" icon="chat">
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Default Provider</mat-label>
          <mat-select formControlName="defaultProvider">
            @for (provider of providers; track provider.id) {
              <mat-option [value]="provider.id">
                <span class="provider-option">
                  <mat-icon class="provider-option-icon">{{ getProviderIcon(provider.type) }}</mat-icon>
                  <span class="provider-option-text">{{ provider.name }}</span>
                  @if (provider.enabled) {
                    <mat-icon class="provider-status-icon enabled">check_circle</mat-icon>
                  } @else {
                    <mat-icon class="provider-status-icon disabled">cancel</mat-icon>
                  }
                </span>
              </mat-option>
            }
          </mat-select>
          <mat-hint>Select the default AI provider for new chats</mat-hint>
        </mat-form-field>
        
        <app-form-field
          label="Max Tokens"
          type="number"
          formControlName="maxTokens"
          hint="Maximum tokens for response (100-32000)">
        </app-form-field>
        
        <app-form-field
          label="Temperature"
          type="number"
          formControlName="temperature"
          hint="Creativity level (0-2)">
        </app-form-field>
      </div>
    </app-panel>
    
    <mat-divider></mat-divider>
    
    <app-panel title="Behavior" icon="settings">
      <div class="toggle-section">
        <mat-slide-toggle formControlName="autoSave">
          Auto-save configuration changes
        </mat-slide-toggle>
        
        <mat-slide-toggle formControlName="confirmBeforeDelete">
          Confirm before deleting items
        </mat-slide-toggle>
      </div>
    </app-panel>
  </form>
</div>