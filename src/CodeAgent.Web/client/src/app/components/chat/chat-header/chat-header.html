<div class="chat-header">
  <div class="header-left">
    <h2>{{ title }}</h2>
    @if (subtitle) {
      <span class="subtitle">{{ subtitle }}</span>
    }
    <div class="session-info">
      @if (showPermissionsBadge && permissionsCount > 0) {
        <mat-chip class="permissions-chip">
          <mat-icon>security</mat-icon>
          {{ permissionsCount }} permissions active
        </mat-chip>
      }
    </div>
  </div>
  <div class="header-actions">
    @for (action of actions; track action.id) {
      <button mat-icon-button 
              (click)="onActionClick(action.id)"
              [class.active]="action.active"
              [matBadge]="action.badge"
              [matBadgeHidden]="!action.badge || action.badge === 0"
              matBadgeColor="accent"
              matBadgeSize="small"
              [matTooltip]="action.tooltip">
        <mat-icon>{{ action.icon }}</mat-icon>
      </button>
    }
    @if (actions.length > 0) {
      <mat-divider [vertical]="true"></mat-divider>
    }
    <button mat-icon-button 
            (click)="onClearSession()" 
            matTooltip="Clear Session">
      <mat-icon>clear_all</mat-icon>
    </button>
  </div>
</div>