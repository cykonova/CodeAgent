@if (isRespondToUser) {
  <!-- respond_to_user shows ONLY the message text -->
  <div class="message-text">
    {{ getMessageContent() }}
  </div>
} @else {
  <!-- Regular tool call display -->
  <div class="tool-call-container">
    <div class="tool-header">
      <mat-chip class="tool-chip">
        <mat-icon class="tool-icon">{{ toolIcon }}</mat-icon>
        <span class="tool-name">{{ toolCall.name }}</span>
      </mat-chip>
    </div>
    
    @if (toolCall.arguments && objectKeys(toolCall.arguments).length > 0) {
      <mat-expansion-panel class="arguments-panel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>settings</mat-icon>
            Parameters
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="parameters-list">
          @for (param of getParametersList(); track param.key) {
            <div class="parameter-item">
              <span class="param-key">{{ param.key }}:</span>
              <span class="param-value">{{ param.value }}</span>
            </div>
          }
        </div>
      </mat-expansion-panel>
    }
    
    @if (toolCall.result) {
      <mat-expansion-panel class="result-panel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>check_circle</mat-icon>
            Result
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="result-content">
          {{ formatResult() }}
        </div>
      </mat-expansion-panel>
    }
  </div>
}