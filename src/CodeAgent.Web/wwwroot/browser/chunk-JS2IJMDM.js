import{c as tt,d as nt,f as Oe,g as ye,h as it}from"./chunk-WRWXI3SN.js";import{a as Gt,b as Ut,c as Wt,e as qt,f as Qt,g as Kt,h as Yt,i as Jt,j as Zt,k as Xt,l as en,m as tn,n as nn,o as on}from"./chunk-FSDZFBDK.js";import{a as De,b as ce,c as de,d as me,e as Ne,f as pe,g as Re,h as ie,i as Ht,k as $e,l as je}from"./chunk-E4WO67X7.js";import{A as $t,B as jt,C as Ve,b as Ie,d as Dt,e as zt,h as se,i as te,l as re,m as ne,n as At,o as Bt,p as ze,q as K,r as Ae,s as le,t as G,u as Be,v as Le,w as Lt,x as Vt,y as Nt,z as Rt}from"./chunk-ETTWEMM5.js";import{v as j,w as H}from"./chunk-UJREBWOM.js";import{f as It}from"./chunk-L7JTTDNK.js";import{Aa as L,E as yt,F as St,Fa as Se,Ga as we,Ha as ke,Ia as Te,Ja as Ee,K as wt,Ka as Fe,La as Q,Ma as V,N as kt,Na as N,O as Tt,Pa as R,Qa as ae,Ra as $,W as Et,Z as ot,d as bt,ea as Ft,f as z,i as J,ia as A,j as et,ja as B,k as be,n as Ot,na as Z,ra as X,ua as ee}from"./chunk-O6UWN3JJ.js";import{$a as ht,$b as Mt,Ab as F,Bb as y,Bc as xe,Cb as S,Da as gt,Db as u,E as I,Eb as i,Fb as o,Gb as w,Nb as b,Pb as m,R as he,Rb as d,Vb as Ct,Wb as Pt,Xa as c,Xb as vt,_ as D,a as P,ab as Ze,b as v,ba as lt,bc as C,ca as dt,dc as a,ec as p,fa as mt,fc as O,ga as k,gc as T,hb as E,hc as U,ib as _t,ic as W,jb as ut,jc as q,l as rt,la as g,ma as h,mb as Me,p as ct,pb as Xe,qa as pt,qb as ft,sc as xt,wa as _,xb as M,yb as x}from"./chunk-V3XUVWWI.js";var an="mat-badge-content",pn=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275cmp=E({type:s,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,r){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return s})(),He=(()=>{class s{_ngZone=k(ft);_elementRef=k(gt);_ariaDescriber=k(Et);_renderer=k(ht);_animationsDisabled=Ft();_idGenerator=k(Tt);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=k(wt);_document=k(pt);constructor(){let e=k(yt);e.load(pn),e.load(St)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),t="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(an),this._animationsDisabled&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&!this._animationsDisabled?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(t)})}):e.classList.add(t),e}_updateRenderedContent(e){let t=`${e??""}`.trim();this._isInitialized&&t&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=t),this._content=t}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let t=this._elementRef.nativeElement.classList;t.remove(`mat-badge-${this._color}`),e&&t.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${an}`);for(let t of Array.from(e))t!==this._badgeElement&&t.remove()}static \u0275fac=function(t){return new(t||s)};static \u0275dir=ut({type:s,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,r){t&2&&C("mat-badge-overlap",r.overlap)("mat-badge-above",r.isAbove())("mat-badge-below",!r.isAbove())("mat-badge-before",!r.isAfter())("mat-badge-after",r.isAfter())("mat-badge-small",r.size==="small")("mat-badge-medium",r.size==="medium")("mat-badge-large",r.size==="large")("mat-badge-hidden",r.hidden||!r.content)("mat-badge-disabled",r.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",xe],disabled:[2,"matBadgeDisabled","disabled",xe],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",xe]}})}return s})(),ge=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275mod=_t({type:s});static \u0275inj=dt({imports:[kt,ot,ot]})}return s})();var Ge=(s,n)=>n.id;function hn(s,n){if(s&1){let e=b();i(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let r=g(e).$implicit,l=d();return h(l.togglePermission(r))}),i(2,"div",21)(3,"div",22)(4,"mat-icon"),a(5),o(),i(6,"span",23),a(7),o(),i(8,"mat-icon",24),a(9),o()(),i(10,"div",25),a(11),o()()()()}if(s&2){let e=n.$implicit,t=d();C("granted",e.granted),c(),u("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),O(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function _n(s,n){if(s&1){let e=b();i(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let r=g(e).$implicit,l=d();return h(l.togglePermission(r))}),i(2,"div",21)(3,"div",22)(4,"mat-icon"),a(5),o(),i(6,"span",23),a(7),o(),i(8,"mat-icon",24),a(9),o()(),i(10,"div",25),a(11),o()()()()}if(s&2){let e=n.$implicit,t=d();C("granted",e.granted),c(),u("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),O(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function un(s,n){if(s&1){let e=b();i(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let r=g(e).$implicit,l=d();return h(l.togglePermission(r))}),i(2,"div",21)(3,"div",22)(4,"mat-icon"),a(5),o(),i(6,"span",23),a(7),o(),i(8,"mat-icon",24),a(9),o()(),i(10,"div",25),a(11),o()()()()}if(s&2){let e=n.$implicit,t=d();C("granted",e.granted),c(),u("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),O(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function fn(s,n){if(s&1){let e=b();i(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let r=g(e).$implicit,l=d();return h(l.togglePermission(r))}),i(2,"div",21)(3,"div",22)(4,"mat-icon"),a(5),o(),i(6,"span",23),a(7),o(),i(8,"mat-icon",24),a(9),o()(),i(10,"div",25),a(11),o()()()()}if(s&2){let e=n.$implicit,t=d();C("granted",e.granted),c(),u("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),O(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function Cn(s,n){if(s&1){let e=b();i(0,"mat-chip-row",26),m("removed",function(){let r=g(e).$implicit,l=d();return h(l.removePermittedPath(r))}),i(1,"mat-icon",27),a(2,"check_circle"),o(),a(3),i(4,"button",28)(5,"mat-icon"),a(6,"cancel"),o()()()}if(s&2){let e=n.$implicit;c(3),O(" ",e," ")}}function Pn(s,n){if(s&1){let e=b();i(0,"mat-chip-row",29),m("removed",function(){let r=g(e).$implicit,l=d();return h(l.removeBlockedPath(r))}),i(1,"mat-icon",27),a(2,"block"),o(),a(3),i(4,"button",28)(5,"mat-icon"),a(6,"cancel"),o()()()}if(s&2){let e=n.$implicit;c(3),O(" ",e," ")}}var Ue=class s{constructor(n,e){this.dialogRef=n;this.data=e;e.requestedPermissions?this.permissions.set(e.requestedPermissions):this.permissions.set([{id:"file-read",name:"Read Files",description:"Allow reading files in permitted directories",granted:!1,icon:"visibility",category:"file",riskLevel:"low"},{id:"file-write",name:"Write Files",description:"Allow creating and modifying files",granted:!1,icon:"edit",category:"file",riskLevel:"medium"},{id:"file-delete",name:"Delete Files",description:"Allow deleting files and directories",granted:!1,icon:"delete",category:"file",riskLevel:"high"},{id:"git-read",name:"Git Status",description:"View git status and history",granted:!1,icon:"info",category:"git",riskLevel:"low"},{id:"git-commit",name:"Git Commit",description:"Create git commits",granted:!1,icon:"check_circle",category:"git",riskLevel:"medium"},{id:"git-push",name:"Git Push",description:"Push to remote repositories",granted:!1,icon:"cloud_upload",category:"git",riskLevel:"high"},{id:"system-info",name:"System Info",description:"Read system information",granted:!1,icon:"computer",category:"system",riskLevel:"low"},{id:"system-execute",name:"Execute Commands",description:"Run system commands",granted:!1,icon:"terminal",category:"system",riskLevel:"high"},{id:"tool-search",name:"Search Tools",description:"Use search and grep tools",granted:!1,icon:"search",category:"tool",riskLevel:"low"},{id:"tool-ai",name:"AI Tools",description:"Use AI-powered code analysis",granted:!1,icon:"psychology",category:"tool",riskLevel:"medium"}]),e.currentSessionPermissions&&this.permissions.update(t=>t.map(r=>{let l=e.currentSessionPermissions.find(f=>f.id===r.id);return l?v(P({},r),{granted:l.granted}):r})),(e.permittedPaths||e.blockedPaths)&&this.sessionPaths.set({permitted:e.permittedPaths||[],blocked:e.blockedPaths||[]}),this.groupPermissions()}permissions=_([]);sessionPaths=_({permitted:[],blocked:[]});newPermittedPath="";newBlockedPath="";filePermissions=_([]);systemPermissions=_([]);gitPermissions=_([]);toolPermissions=_([]);groupPermissions(){let n=this.permissions();this.filePermissions.set(n.filter(e=>e.category==="file")),this.systemPermissions.set(n.filter(e=>e.category==="system")),this.gitPermissions.set(n.filter(e=>e.category==="git")),this.toolPermissions.set(n.filter(e=>e.category==="tool"))}togglePermission(n){this.permissions.update(e=>e.map(t=>t.id===n.id?v(P({},t),{granted:!t.granted}):t)),this.groupPermissions()}selectAll(n){this.permissions.update(e=>e.map(t=>t.category===n?v(P({},t),{granted:!0}):t)),this.groupPermissions()}deselectAll(n){this.permissions.update(e=>e.map(t=>t.category===n?v(P({},t),{granted:!1}):t)),this.groupPermissions()}addPermittedPath(){this.newPermittedPath.trim()&&(this.sessionPaths.update(n=>v(P({},n),{permitted:[...n.permitted,this.newPermittedPath.trim()]})),this.newPermittedPath="")}removePermittedPath(n){this.sessionPaths.update(e=>v(P({},e),{permitted:e.permitted.filter(t=>t!==n)}))}addBlockedPath(){this.newBlockedPath.trim()&&(this.sessionPaths.update(n=>v(P({},n),{blocked:[...n.blocked,this.newBlockedPath.trim()]})),this.newBlockedPath="")}removeBlockedPath(n){this.sessionPaths.update(e=>v(P({},e),{blocked:e.blocked.filter(t=>t!==n)}))}applyPermissions(){let n={permissions:this.permissions(),paths:this.sessionPaths()};this.dialogRef.close(n)}cancel(){this.dialogRef.close()}getRiskColor(n){switch(n){case"low":return"primary";case"medium":return"accent";case"high":return"warn";default:return""}}getRiskIcon(n){switch(n){case"low":return"check_circle";case"medium":return"warning";case"high":return"error";default:return"help"}}getGrantedCount(n){return n.filter(e=>e.granted).length}static \u0275fac=function(e){return new(e||s)(Ze(Lt),Ze(Vt))};static \u0275cmp=E({type:s,selectors:[["app-session-permissions-dialog"]],decls:119,vars:12,consts:[["mat-dialog-title",""],[1,"permissions-container"],[1,"permissions-intro"],["expanded",""],[1,"permission-actions"],["mat-button","",3,"click"],[1,"permission-list"],[1,"permission-item",3,"granted"],[1,"path-section"],[1,"add-path"],["appearance","outline",1,"flex-field"],["matInput","","placeholder","/path/to/permit",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","color","primary",3,"click"],[1,"path-chips"],["matInput","","placeholder","/path/to/block",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","color","warn",3,"click"],[1,"blocked-chip"],["align","end"],["mat-raised-button","","color","primary",3,"click"],[1,"permission-item"],[3,"change","checked"],[1,"permission-content"],[1,"permission-header"],[1,"permission-name"],[1,"risk-icon",3,"color","matTooltip"],[1,"permission-description"],[3,"removed"],["matChipAvatar",""],["matChipRemove",""],[1,"blocked-chip",3,"removed"]],template:function(e,t){e&1&&(i(0,"h2",0)(1,"mat-icon"),a(2,"security"),o(),a(3,` Session Permissions
`),o(),i(4,"mat-dialog-content")(5,"div",1)(6,"div",2)(7,"mat-icon"),a(8,"info"),o(),i(9,"p"),a(10,"Grant temporary permissions for this chat session only. These permissions will be cleared when you start a new conversation."),o()(),i(11,"mat-expansion-panel",3)(12,"mat-expansion-panel-header")(13,"mat-panel-title")(14,"mat-icon"),a(15,"folder"),o(),a(16," File Operations "),o(),i(17,"mat-panel-description"),a(18),o()(),i(19,"div",4)(20,"button",5),m("click",function(){return t.selectAll("file")}),a(21,"Select All"),o(),i(22,"button",5),m("click",function(){return t.deselectAll("file")}),a(23,"Clear All"),o()(),i(24,"div",6),y(25,hn,12,9,"div",7,Ge),o()(),i(27,"mat-expansion-panel")(28,"mat-expansion-panel-header")(29,"mat-panel-title")(30,"mat-icon"),a(31,"source"),o(),a(32," Git Operations "),o(),i(33,"mat-panel-description"),a(34),o()(),i(35,"div",4)(36,"button",5),m("click",function(){return t.selectAll("git")}),a(37,"Select All"),o(),i(38,"button",5),m("click",function(){return t.deselectAll("git")}),a(39,"Clear All"),o()(),i(40,"div",6),y(41,_n,12,9,"div",7,Ge),o()(),i(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title")(46,"mat-icon"),a(47,"computer"),o(),a(48," System Commands "),o(),i(49,"mat-panel-description"),a(50),o()(),i(51,"div",4)(52,"button",5),m("click",function(){return t.selectAll("system")}),a(53,"Select All"),o(),i(54,"button",5),m("click",function(){return t.deselectAll("system")}),a(55,"Clear All"),o()(),i(56,"div",6),y(57,un,12,9,"div",7,Ge),o()(),i(59,"mat-expansion-panel")(60,"mat-expansion-panel-header")(61,"mat-panel-title")(62,"mat-icon"),a(63,"build"),o(),a(64," Tools & Extensions "),o(),i(65,"mat-panel-description"),a(66),o()(),i(67,"div",4)(68,"button",5),m("click",function(){return t.selectAll("tool")}),a(69,"Select All"),o(),i(70,"button",5),m("click",function(){return t.deselectAll("tool")}),a(71,"Clear All"),o()(),i(72,"div",6),y(73,fn,12,9,"div",7,Ge),o()(),i(75,"mat-expansion-panel")(76,"mat-expansion-panel-header")(77,"mat-panel-title")(78,"mat-icon"),a(79,"route"),o(),a(80," Path Restrictions (Session Only) "),o(),i(81,"mat-panel-description"),a(82),o()(),i(83,"div",8)(84,"h4"),a(85,"Additional Permitted Paths"),o(),i(86,"div",9)(87,"mat-form-field",10)(88,"mat-label"),a(89,"Add Path"),o(),i(90,"input",11),q("ngModelChange",function(l){return W(t.newPermittedPath,l)||(t.newPermittedPath=l),l}),m("keyup.enter",function(){return t.addPermittedPath()}),o()(),i(91,"button",12),m("click",function(){return t.addPermittedPath()}),i(92,"mat-icon"),a(93,"add_circle"),o()()(),i(94,"mat-chip-set",13),y(95,Cn,7,1,"mat-chip-row",null,F),o()(),w(97,"mat-divider"),i(98,"div",8)(99,"h4"),a(100,"Additional Blocked Paths"),o(),i(101,"div",9)(102,"mat-form-field",10)(103,"mat-label"),a(104,"Add Path"),o(),i(105,"input",14),q("ngModelChange",function(l){return W(t.newBlockedPath,l)||(t.newBlockedPath=l),l}),m("keyup.enter",function(){return t.addBlockedPath()}),o()(),i(106,"button",15),m("click",function(){return t.addBlockedPath()}),i(107,"mat-icon"),a(108,"block"),o()()(),i(109,"mat-chip-set",13),y(110,Pn,7,1,"mat-chip-row",16,F),o()()()()(),i(112,"mat-dialog-actions",17)(113,"button",5),m("click",function(){return t.cancel()}),a(114,"Cancel"),o(),i(115,"button",18),m("click",function(){return t.applyPermissions()}),i(116,"mat-icon"),a(117,"check"),o(),a(118," Apply Permissions "),o()()),e&2&&(c(18),T(" ",t.getGrantedCount(t.filePermissions())," of ",t.filePermissions().length," granted "),c(7),S(t.filePermissions()),c(9),T(" ",t.getGrantedCount(t.gitPermissions())," of ",t.gitPermissions().length," granted "),c(7),S(t.gitPermissions()),c(9),T(" ",t.getGrantedCount(t.systemPermissions())," of ",t.systemPermissions().length," granted "),c(7),S(t.systemPermissions()),c(9),T(" ",t.getGrantedCount(t.toolPermissions())," of ",t.toolPermissions().length," granted "),c(7),S(t.toolPermissions()),c(9),T(" ",t.sessionPaths().permitted.length," permitted, ",t.sessionPaths().blocked.length," blocked "),c(8),U("ngModel",t.newPermittedPath),c(5),S(t.sessionPaths().permitted),c(10),U("ngModel",t.newBlockedPath),c(5),S(t.sessionPaths().blocked))},dependencies:[z,L,Z,X,ee,Ve,Rt,jt,$t,$,ae,R,je,$e,N,V,B,A,G,At,ze,Ae,le,te,se,Ie,ne,re,ie,de,me,pe,Ne,H,j],styles:[".permissions-container[_ngcontent-%COMP%]{width:600px;max-width:90vw;max-height:70vh;overflow-y:auto}.permissions-intro[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);padding:var(--spacing-md);background-color:var(--app-info-light);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg)}.permissions-intro[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.permissions-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--app-text-secondary);font-size:14px}mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);background-color:var(--app-surface)}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-weight:500}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-text-secondary)}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{color:var(--app-text-secondary);font-size:12px}.permission-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-md);padding:0 var(--spacing-md)}.permission-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}.permission-list[_ngcontent-%COMP%]{padding:0 var(--spacing-md) var(--spacing-md)}.permission-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);padding:var(--spacing-sm);border-radius:var(--radius-sm);transition:background-color var(--transition-fast)}.permission-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.permission-item.granted[_ngcontent-%COMP%]{background-color:var(--app-success-light)}.permission-item.granted[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{font-weight:500}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{width:100%}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox-label{width:100%}.permission-content[_ngcontent-%COMP%]{width:100%}.permission-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-xs)}.permission-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.permission-header[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{flex:1;font-size:14px;color:var(--app-text-primary)}.permission-header[_ngcontent-%COMP%]   .risk-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.permission-description[_ngcontent-%COMP%]{margin-left:calc(18px + var(--spacing-sm));font-size:12px;color:var(--app-text-secondary);line-height:1.4}.path-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--app-text-primary);font-weight:500;font-size:14px;margin-bottom:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   .add-path[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:flex-start;margin-bottom:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   .add-path[_ngcontent-%COMP%]   .flex-field[_ngcontent-%COMP%]{flex:1}.path-section[_ngcontent-%COMP%]   .add-path[_ngcontent-%COMP%]   .flex-field[_ngcontent-%COMP%]     .mat-mdc-form-field{width:100%}.path-section[_ngcontent-%COMP%]   .path-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]{margin:var(--spacing-xs)}.path-section[_ngcontent-%COMP%]   .path-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]{--mat-chip-background-color: var(--error-light, #ffebee);--mat-chip-text-color: var(--error-color, #f44336)}.path-section[_ngcontent-%COMP%]   .path-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--error-color, #f44336)}mat-divider[_ngcontent-%COMP%]{margin:var(--spacing-lg) 0}mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}mat-dialog-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}mat-dialog-actions[_ngcontent-%COMP%]{padding:var(--spacing-md);border-top:1px solid var(--app-divider)}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:var(--spacing-xs)}@media (prefers-color-scheme: dark){.permissions-intro[_ngcontent-%COMP%]{background-color:rgba(var(--primary-rgb),.1)}.permission-item.granted[_ngcontent-%COMP%]{background-color:#4caf501a}}@media (max-width: 768px){.permissions-container[_ngcontent-%COMP%]{width:100%;max-width:100%}}"]})};var qe=(s,n)=>n.id;function vn(s,n){if(s&1){let e=b();i(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let r=g(e).$implicit,l=d(2);return h(l.togglePermission(r))}),i(2,"div",18)(3,"mat-icon",19),a(4),o(),i(5,"span",20),a(6),o(),i(7,"mat-icon",21),a(8),o()()()()}if(s&2){let e=n.$implicit,t=d(2);C("granted",e.granted),c(),u("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),O(" ",t.getRiskIcon(e.riskLevel)," ")}}function Mn(s,n){if(s&1&&(i(0,"mat-expansion-panel",6)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4,"folder"),o(),a(5," File Operations "),o()(),i(6,"div",14),y(7,vn,9,8,"div",15,qe),o()()),s&2){let e=d();c(7),S(e.filePermissions())}}function xn(s,n){if(s&1){let e=b();i(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let r=g(e).$implicit,l=d(2);return h(l.togglePermission(r))}),i(2,"div",18)(3,"mat-icon",19),a(4),o(),i(5,"span",20),a(6),o(),i(7,"mat-icon",21),a(8),o()()()()}if(s&2){let e=n.$implicit,t=d(2);C("granted",e.granted),c(),u("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),O(" ",t.getRiskIcon(e.riskLevel)," ")}}function bn(s,n){if(s&1&&(i(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4,"source"),o(),a(5," Git Operations "),o()(),i(6,"div",14),y(7,xn,9,8,"div",15,qe),o()()),s&2){let e=d();c(7),S(e.gitPermissions())}}function On(s,n){if(s&1){let e=b();i(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let r=g(e).$implicit,l=d(2);return h(l.togglePermission(r))}),i(2,"div",18)(3,"mat-icon",19),a(4),o(),i(5,"span",20),a(6),o(),i(7,"mat-icon",21),a(8),o()()()()}if(s&2){let e=n.$implicit,t=d(2);C("granted",e.granted),c(),u("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),O(" ",t.getRiskIcon(e.riskLevel)," ")}}function yn(s,n){if(s&1&&(i(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4,"computer"),o(),a(5," System Commands "),o()(),i(6,"div",14),y(7,On,9,8,"div",15,qe),o()()),s&2){let e=d();c(7),S(e.systemPermissions())}}function Sn(s,n){if(s&1){let e=b();i(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let r=g(e).$implicit,l=d(2);return h(l.togglePermission(r))}),i(2,"div",18)(3,"mat-icon",19),a(4),o(),i(5,"span",20),a(6),o(),i(7,"mat-icon",21),a(8),o()()()()}if(s&2){let e=n.$implicit,t=d(2);C("granted",e.granted),c(),u("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),u("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),O(" ",t.getRiskIcon(e.riskLevel)," ")}}function wn(s,n){if(s&1&&(i(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4,"build"),o(),a(5," Tools & Extensions "),o()(),i(6,"div",14),y(7,Sn,9,8,"div",15,qe),o()()),s&2){let e=d();c(7),S(e.toolPermissions())}}function kn(s,n){if(s&1){let e=b();i(0,"mat-chip-row",22),m("removed",function(){let r=g(e).$implicit,l=d(2);return h(l.removePermittedPath(r))}),a(1),i(2,"button",23)(3,"mat-icon"),a(4,"cancel"),o()()()}if(s&2){let e=n.$implicit;c(),O(" ",e," ")}}function Tn(s,n){if(s&1&&(i(0,"mat-chip-set",12),y(1,kn,5,1,"mat-chip-row",null,F),o()),s&2){let e=d();c(),S(e.sessionPaths().permitted)}}function En(s,n){if(s&1){let e=b();i(0,"mat-chip-row",25),m("removed",function(){let r=g(e).$implicit,l=d(2);return h(l.removeBlockedPath(r))}),a(1),i(2,"button",23)(3,"mat-icon"),a(4,"cancel"),o()()()}if(s&2){let e=n.$implicit;c(),O(" ",e," ")}}function Fn(s,n){if(s&1&&(i(0,"mat-chip-set",12),y(1,En,5,1,"mat-chip-row",24,F),o()),s&2){let e=d();c(),S(e.sessionPaths().blocked)}}var We=class s{set permissions(n){this._permissions.set(n),this.groupPermissions()}set paths(n){this.sessionPaths.set(n)}permissionsChanged=new Xe;pathsChanged=new Xe;_permissions=_([]);sessionPaths=_({permitted:[],blocked:[]});newPermittedPath="";newBlockedPath="";filePermissions=_([]);systemPermissions=_([]);gitPermissions=_([]);toolPermissions=_([]);constructor(){this._permissions().length===0&&this.initializeDefaultPermissions()}initializeDefaultPermissions(){let n=[{id:"file-read",name:"Read Files",description:"Allow reading files in permitted directories",granted:!1,icon:"visibility",category:"file",riskLevel:"low"},{id:"file-write",name:"Write Files",description:"Allow creating and modifying files",granted:!1,icon:"edit",category:"file",riskLevel:"medium"},{id:"file-delete",name:"Delete Files",description:"Allow deleting files and directories",granted:!1,icon:"delete",category:"file",riskLevel:"high"},{id:"git-read",name:"Git Status",description:"View git status and history",granted:!1,icon:"info",category:"git",riskLevel:"low"},{id:"git-commit",name:"Git Commit",description:"Create git commits",granted:!1,icon:"check_circle",category:"git",riskLevel:"medium"},{id:"system-info",name:"System Info",description:"Read system information",granted:!1,icon:"computer",category:"system",riskLevel:"low"},{id:"system-execute",name:"Execute Commands",description:"Run system commands",granted:!1,icon:"terminal",category:"system",riskLevel:"high"},{id:"tool-search",name:"Search Tools",description:"Use search and grep tools",granted:!1,icon:"search",category:"tool",riskLevel:"low"}];this._permissions.set(n),this.groupPermissions()}groupPermissions(){let n=this._permissions();this.filePermissions.set(n.filter(e=>e.category==="file")),this.systemPermissions.set(n.filter(e=>e.category==="system")),this.gitPermissions.set(n.filter(e=>e.category==="git")),this.toolPermissions.set(n.filter(e=>e.category==="tool"))}togglePermission(n){let e=this._permissions().map(t=>t.id===n.id?v(P({},t),{granted:!t.granted}):t);this._permissions.set(e),this.groupPermissions(),this.permissionsChanged.emit(e)}toggleAll(n){let e=this._permissions().map(t=>v(P({},t),{granted:n}));this._permissions.set(e),this.groupPermissions(),this.permissionsChanged.emit(e)}toggleCategory(n,e){let t=this._permissions().map(r=>r.category===n?v(P({},r),{granted:e}):r);this._permissions.set(t),this.groupPermissions(),this.permissionsChanged.emit(t)}addPermittedPath(){if(!this.newPermittedPath.trim())return;let n=v(P({},this.sessionPaths()),{permitted:[...this.sessionPaths().permitted,this.newPermittedPath.trim()]});this.sessionPaths.set(n),this.pathsChanged.emit(n),this.newPermittedPath=""}removePermittedPath(n){let e=v(P({},this.sessionPaths()),{permitted:this.sessionPaths().permitted.filter(t=>t!==n)});this.sessionPaths.set(e),this.pathsChanged.emit(e)}addBlockedPath(){if(!this.newBlockedPath.trim())return;let n=v(P({},this.sessionPaths()),{blocked:[...this.sessionPaths().blocked,this.newBlockedPath.trim()]});this.sessionPaths.set(n),this.pathsChanged.emit(n),this.newBlockedPath=""}removeBlockedPath(n){let e=v(P({},this.sessionPaths()),{blocked:this.sessionPaths().blocked.filter(t=>t!==n)});this.sessionPaths.set(e),this.pathsChanged.emit(e)}getRiskColor(n){switch(n){case"low":return"primary";case"medium":return"accent";case"high":return"warn";default:return""}}getRiskIcon(n){switch(n){case"low":return"check_circle";case"medium":return"warning";case"high":return"error";default:return"help"}}getGrantedCount(n){return n.filter(e=>e.granted).length}getAllPermissions(){return this._permissions()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-session-permissions-panel"]],inputs:{permissions:"permissions",paths:"paths"},outputs:{permissionsChanged:"permissionsChanged",pathsChanged:"pathsChanged"},decls:59,vars:24,consts:[[1,"permissions-panel"],[1,"panel-actions"],["mat-button","",3,"click"],[1,"quick-toggles"],[3,"click"],["multi",""],["expanded",""],[1,"path-section"],[1,"add-path-compact"],["appearance","outline",1,"compact-field"],["matInput","","placeholder","Add path...",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","color","primary",3,"click"],[1,"compact-chips"],["mat-icon-button","","color","warn",3,"click"],[1,"permission-list"],[1,"permission-item","compact",3,"granted"],[1,"permission-item","compact"],[3,"change","checked"],[1,"permission-content"],[1,"permission-icon"],[1,"permission-name"],[1,"risk-icon",3,"color","matTooltip"],[3,"removed"],["matChipRemove",""],[1,"blocked-chip"],[1,"blocked-chip",3,"removed"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),m("click",function(){return t.toggleAll(!0)}),i(3,"mat-icon"),a(4,"check_box"),o(),a(5," Grant All "),o(),i(6,"button",2),m("click",function(){return t.toggleAll(!1)}),i(7,"mat-icon"),a(8,"check_box_outline_blank"),o(),a(9," Clear All "),o()(),i(10,"div",3)(11,"mat-chip-set")(12,"mat-chip",4),m("click",function(){return t.toggleCategory("file",t.getGrantedCount(t.filePermissions())!==t.filePermissions().length)}),i(13,"mat-icon"),a(14,"folder"),o(),a(15),o(),i(16,"mat-chip",4),m("click",function(){return t.toggleCategory("git",t.getGrantedCount(t.gitPermissions())!==t.gitPermissions().length)}),i(17,"mat-icon"),a(18,"source"),o(),a(19),o(),i(20,"mat-chip",4),m("click",function(){return t.toggleCategory("system",t.getGrantedCount(t.systemPermissions())!==t.systemPermissions().length)}),i(21,"mat-icon"),a(22,"computer"),o(),a(23),o(),i(24,"mat-chip",4),m("click",function(){return t.toggleCategory("tool",t.getGrantedCount(t.toolPermissions())!==t.toolPermissions().length)}),i(25,"mat-icon"),a(26,"build"),o(),a(27),o()()(),w(28,"mat-divider"),i(29,"mat-accordion",5),M(30,Mn,9,0,"mat-expansion-panel",6),M(31,bn,9,0,"mat-expansion-panel"),M(32,yn,9,0,"mat-expansion-panel"),M(33,wn,9,0,"mat-expansion-panel"),i(34,"mat-expansion-panel")(35,"mat-expansion-panel-header")(36,"mat-panel-title")(37,"mat-icon"),a(38,"route"),o(),a(39," Path Restrictions "),o()(),i(40,"div",7)(41,"h5"),a(42,"Permitted Paths"),o(),i(43,"div",8)(44,"mat-form-field",9)(45,"input",10),q("ngModelChange",function(l){return W(t.newPermittedPath,l)||(t.newPermittedPath=l),l}),m("keyup.enter",function(){return t.addPermittedPath()}),o()(),i(46,"button",11),m("click",function(){return t.addPermittedPath()}),i(47,"mat-icon"),a(48,"add"),o()()(),M(49,Tn,3,0,"mat-chip-set",12),i(50,"h5"),a(51,"Blocked Paths"),o(),i(52,"div",8)(53,"mat-form-field",9)(54,"input",10),q("ngModelChange",function(l){return W(t.newBlockedPath,l)||(t.newBlockedPath=l),l}),m("keyup.enter",function(){return t.addBlockedPath()}),o()(),i(55,"button",13),m("click",function(){return t.addBlockedPath()}),i(56,"mat-icon"),a(57,"block"),o()()(),M(58,Fn,3,0,"mat-chip-set",12),o()()()()),e&2&&(c(12),C("mat-chip-selected",t.getGrantedCount(t.filePermissions())===t.filePermissions().length),c(3),T(" Files (",t.getGrantedCount(t.filePermissions()),"/",t.filePermissions().length,") "),c(),C("mat-chip-selected",t.getGrantedCount(t.gitPermissions())===t.gitPermissions().length),c(3),T(" Git (",t.getGrantedCount(t.gitPermissions()),"/",t.gitPermissions().length,") "),c(),C("mat-chip-selected",t.getGrantedCount(t.systemPermissions())===t.systemPermissions().length),c(3),T(" System (",t.getGrantedCount(t.systemPermissions()),"/",t.systemPermissions().length,") "),c(),C("mat-chip-selected",t.getGrantedCount(t.toolPermissions())===t.toolPermissions().length),c(3),T(" Tools (",t.getGrantedCount(t.toolPermissions()),"/",t.toolPermissions().length,") "),c(3),x(t.filePermissions().length>0?30:-1),c(),x(t.gitPermissions().length>0?31:-1),c(),x(t.systemPermissions().length>0?32:-1),c(),x(t.toolPermissions().length>0?33:-1),c(12),U("ngModel",t.newPermittedPath),c(4),x(t.sessionPaths().permitted.length>0?49:-1),c(5),U("ngModel",t.newBlockedPath),c(4),x(t.sessionPaths().blocked.length>0?58:-1))},dependencies:[z,L,Z,X,ee,$,ae,R,je,$e,N,V,B,A,G,K,ze,Ae,le,te,se,ne,re,ie,Re,de,me,pe,H,j,Q],styles:[".permissions-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;padding:var(--spacing-md);overflow-y:auto}.panel-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.panel-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;font-size:12px}.panel-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.quick-toggles[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.quick-toggles[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;height:28px;cursor:pointer;transition:all var(--transition-fast)}.quick-toggles[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-right:var(--spacing-xs)}.quick-toggles[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.mat-chip-selected[_ngcontent-%COMP%]{background-color:var(--app-success-light);color:var(--app-success)}mat-divider[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);background-color:var(--app-surface)}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:40px;padding:0 var(--spacing-md)}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:13px;font-weight:500}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.permission-list[_ngcontent-%COMP%]{padding:var(--spacing-sm) 0}.permission-item[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);margin-bottom:var(--spacing-xs);border-radius:var(--radius-sm);transition:background-color var(--transition-fast)}.permission-item.compact[_ngcontent-%COMP%]{padding:2px var(--spacing-sm);margin-bottom:2px}.permission-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.permission-item.granted[_ngcontent-%COMP%]{background-color:var(--app-success-light)}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{width:100%}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox{padding:4px}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox-label{margin-left:var(--spacing-xs)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]   .permission-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:var(--app-text-secondary)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--app-text-primary)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]   .risk-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.path-section[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.path-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:var(--spacing-md) 0 var(--spacing-sm) 0;font-size:12px;font-weight:600;color:var(--app-text-primary);text-transform:uppercase;letter-spacing:.5px}.path-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:first-of-type{margin-top:0}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs);align-items:center;margin-bottom:var(--spacing-sm)}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]{flex:1}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0;height:40px;align-items:center}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{height:40px;align-items:center}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:12px;min-height:auto;border-top:none;display:flex;align-items:center}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     input{font-size:13px;height:auto;line-height:1}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__leading, .path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__notch, .path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--app-divider)}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;flex-shrink:0}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]{height:24px;font-size:12px;margin:2px}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]{--mat-chip-background-color: var(--app-error-light);--mat-chip-text-color: var(--app-error)}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-error)}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--mdc-icon-button-icon-size: 14px}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}"]})};var Qe=class s{constructor(n){this.http=n}apiUrl="http://localhost:5001/api/git";loadingState=_(!1);errorState=_(null);currentStatus=_(null);gitChanges$=new rt(null);getLoadingState(){return this.loadingState}getErrorState(){return this.errorState}getCurrentStatus(){return this.currentStatus}getGitChanges(){return this.gitChanges$.asObservable()}handleError=n=>{let e="Git operation failed";return n.error instanceof ErrorEvent?e=n.error.message:e=n.error?.error||n.message||`Git error: ${n.status}`,console.error("GitService error:",e,n),this.errorState.set(e),ct(()=>new Error(e))};clearError(){this.errorState.set(null)}getStatus(n){this.clearError(),this.loadingState.set(!0);let e=n?new et().set("path",n):void 0;return this.http.get(`${this.apiUrl}/status`,{params:e}).pipe(he(1),D(t=>{this.currentStatus.set(t),this.loadingState.set(!1)}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}stageFiles(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/stage`,{files:n},{headers:e}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"stage",data:n}),this.refreshStatus()}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}unstageFiles(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/unstage`,{files:n},{headers:e}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"unstage",data:n}),this.refreshStatus()}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}commit(n,e){this.clearError(),this.loadingState.set(!0);let t=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/commit`,{message:n,files:e},{headers:t}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"commit",data:n}),this.refreshStatus()}),I(r=>(this.loadingState.set(!1),this.handleError(r))))}getHistory(n=50){this.clearError(),this.loadingState.set(!0);let e=new et().set("limit",n.toString());return this.http.get(`${this.apiUrl}/history`,{params:e}).pipe(he(1),D(()=>this.loadingState.set(!1)),I(t=>(this.loadingState.set(!1),this.handleError(t))))}getDiff(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"}),t=n?{files:n}:{};return this.http.post(`${this.apiUrl}/diff`,t,{headers:e}).pipe(he(1),D(()=>this.loadingState.set(!1)),I(r=>(this.loadingState.set(!1),this.handleError(r))))}push(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/push`,{branch:n},{headers:e}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"push",data:n}),this.refreshStatus()}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}pull(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/pull`,{branch:n},{headers:e}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"pull",data:n}),this.refreshStatus()}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}createBranch(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/branch`,{name:n},{headers:e}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"branch_create",data:n}),this.refreshStatus()}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}switchBranch(n){this.clearError(),this.loadingState.set(!0);let e=new J({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/checkout`,{branch:n},{headers:e}).pipe(D(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"branch_switch",data:n}),this.refreshStatus()}),I(t=>(this.loadingState.set(!1),this.handleError(t))))}getBranches(){return this.clearError(),this.loadingState.set(!0),this.http.get(`${this.apiUrl}/branches`).pipe(he(1),D(()=>this.loadingState.set(!1)),I(n=>(this.loadingState.set(!1),this.handleError(n))))}refreshStatus(){this.getStatus().subscribe({error:n=>{console.warn("Failed to refresh git status:",n)}})}formatCommitDate(n){let t=new Date().getTime()-n.getTime(),r=Math.floor(t/(1e3*60)),l=Math.floor(r/60),f=Math.floor(l/24);return r<60?`${r} minutes ago`:l<24?`${l} hours ago`:f<30?`${f} days ago`:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(n)}shortenHash(n){return n.substring(0,7)}static \u0275fac=function(e){return new(e||s)(mt(be))};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})};var In=(s,n)=>n.path;function Dn(s,n){if(s&1&&(i(0,"mat-chip",5)(1,"mat-icon"),a(2,"edit"),o(),a(3," Changes "),o()),s&2){let e=d();u("matBadge",e.context().gitStatus.modified+e.context().gitStatus.staged+e.context().gitStatus.untracked)}}function zn(s,n){if(s&1){let e=b();i(0,"mat-list-item",16),m("click",function(){let r=g(e).$implicit,l=d(2);return h(l.onFileClick({name:r.split("/").pop()||"",path:r,type:"file"}))}),i(1,"mat-icon",17),a(2),o(),i(3,"div",18),a(4),o(),i(5,"div",19),a(6),o(),i(7,"button",20),m("click",function(r){let l=g(e).$implicit,f=d(2);return r.stopPropagation(),h(f.pinFile(l))}),i(8,"mat-icon"),a(9),o()()()}if(s&2){let e=n.$implicit,t=d(2);c(2),p(t.getFileIcon(e,"file")),c(2),p(e.split("/").pop()),c(2),p(e),c(),C("pinned",t.isFilePinned(e)),c(2),p((t.isFilePinned(e),"push_pin"))}}function An(s,n){if(s&1&&(i(0,"div",8)(1,"h4")(2,"mat-icon"),a(3,"tab"),o(),a(4," Active Files "),i(5,"mat-chip",9),a(6),o()(),i(7,"mat-nav-list",10),y(8,zn,10,6,"mat-list-item",null,F),o()(),w(10,"mat-divider")),s&2){let e=d();c(6),p(e.context().activeFiles.length),c(2),S(e.context().activeFiles)}}function Bn(s,n){if(s&1){let e=b();i(0,"mat-list-item",16),m("click",function(){let r=g(e).$implicit,l=d(2);return h(l.onFileClick({name:r.split("/").pop()||"",path:r,type:"file"}))}),i(1,"mat-icon",17),a(2),o(),i(3,"div",18),a(4),o(),i(5,"div",19),a(6),o(),i(7,"button",21),m("click",function(r){let l=g(e).$implicit,f=d(2);return r.stopPropagation(),h(f.unpinFile(l))}),i(8,"mat-icon"),a(9,"close"),o()()()}if(s&2){let e=n.$implicit,t=d(2);c(2),p(t.getFileIcon(e,"file")),c(2),p(e.split("/").pop()),c(2),p(e)}}function Ln(s,n){if(s&1&&(i(0,"div",8)(1,"h4")(2,"mat-icon"),a(3,"push_pin"),o(),a(4," Pinned Files "),i(5,"mat-chip",9),a(6),o()(),i(7,"mat-nav-list",10),y(8,Bn,10,3,"mat-list-item",null,F),o()(),w(10,"mat-divider")),s&2){let e=d();c(6),p(e.context().pinnedFiles.length),c(2),S(e.context().pinnedFiles)}}function Vn(s,n){if(s&1){let e=b();i(0,"mat-list-item",16),m("click",function(){let r=g(e).$implicit,l=d();return h(l.onRecentFileClick(r))}),i(1,"mat-icon",17),a(2),o(),i(3,"div",18),a(4),o(),i(5,"div",22)(6,"span",23),a(7),o(),i(8,"span",24),a(9),o()(),i(10,"button",20),m("click",function(r){let l=g(e).$implicit,f=d();return r.stopPropagation(),h(f.pinFile(l.path))}),i(11,"mat-icon"),a(12),o()()()}if(s&2){let e=n.$implicit,t=d();c(2),p(t.getFileTypeIcon(e.type)),c(2),p(e.name),c(3),p(e.path),c(2),T("",t.formatFileSize(e.size)," \u2022 ",t.formatRelativeTime(e.modified)),c(),C("pinned",t.isFilePinned(e.path)),c(2),p((t.isFilePinned(e.path),"push_pin"))}}function Nn(s,n){s&1&&w(0,"mat-progress-bar",12)}function Rn(s,n){if(s&1&&(i(0,"span",29),a(1),o()),s&2){let e=d().$implicit,t=d();c(),p(t.formatFileSize(e.size))}}function $n(s,n){if(s&1){let e=b();i(0,"mat-tree-node",25)(1,"div",26),m("click",function(){let r=g(e).$implicit,l=d();return h(l.onFileClick(r))}),i(2,"mat-icon",27),a(3),o(),i(4,"span",28),a(5),o(),M(6,Rn,2,1,"span",29),o()()}if(s&2){let e=n.$implicit,t=d();c(3),p(t.getFileIcon(e.name,e.type)),c(2),p(e.name),c(),x(e.type==="file"&&e.size?6:-1)}}function jn(s,n){if(s&1&&(i(0,"span",33),a(1),o()),s&2){let e=d().$implicit;c(),O("(",e.children.length,")")}}function Hn(s,n){if(s&1&&(i(0,"mat-tree-node",25)(1,"div",30)(2,"button",31)(3,"mat-icon"),a(4),o()(),i(5,"mat-icon",32),a(6),o(),i(7,"span",28),a(8),o(),M(9,jn,2,1,"span",33),o()()),s&2){let e=n.$implicit,t=d();c(4),O(" ",t.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),c(2),p(t.getFileIcon(e.name,e.type)),c(2),p(e.name),c(),x(e.children?9:-1)}}var Ke=class s{fileService=k(Xt);gitService=k(Qe);snackBar=k(Be);http=k(be);treeControl=new Gt(n=>n.children);dataSource=new Yt;context=_({projectRoot:"",activeFiles:[],pinnedFiles:this.loadPinnedFiles(),gitBranch:"main",gitStatus:{modified:0,staged:0,untracked:0}});recentFiles=_([]);fileTree=_([]);loading=_(!1);ngOnInit(){this.loadProjectContext(),this.loadFileTree(),this.loadRecentFiles(),this.loadGitStatus()}loadProjectContext(){this.http.get("http://localhost:5001/api/configuration").subscribe({next:n=>{this.context.update(e=>v(P({},e),{projectRoot:n.projectDirectory||"."}))},error:()=>{this.context.update(n=>v(P({},n),{projectRoot:"."}))}})}loadFileTree(){this.loading.set(!0);let n=this.context().projectRoot||".";this.fileService.listFiles(n).subscribe({next:e=>{let t=this.convertApiNodesToFileNodes(e);this.fileTree.set(t),this.dataSource.data=t,this.expandDefaultNodes(),this.loading.set(!1)},error:e=>{console.error("Failed to load file tree:",e),this.snackBar.open("Failed to load file tree","Close",{duration:3e3}),this.loading.set(!1)}})}loadRecentFiles(){let n=localStorage.getItem("codeagent-recent-files");if(n)try{let e=JSON.parse(n);this.recentFiles.set(e.map(t=>v(P({},t),{modified:new Date(t.modified)})))}catch(e){console.error("Failed to parse recent files:",e)}}loadGitStatus(){this.gitService.getStatus().subscribe({next:n=>{this.context.update(e=>v(P({},e),{gitBranch:n.branch||"main",gitStatus:{modified:n.modified?.length||0,staged:n.staged?.length||0,untracked:n.untracked?.length||0}}))},error:n=>{console.error("Failed to load git status:",n)}})}convertApiNodesToFileNodes(n){return n.map(e=>({name:e.name,path:e.path,type:e.type==="folder"?"directory":"file",size:e.size,modified:e.modified,children:e.children?this.convertApiNodesToFileNodes(e.children):void 0,expanded:!1}))}expandDefaultNodes(){this.fileTree().forEach(n=>{n.type==="directory"&&["src","app","components"].includes(n.name)&&(n.expanded=!0,this.treeControl.expand(n),this.expandChildrenRecursively(n,2))})}expandChildrenRecursively(n,e=1){e<=0||!n.children||n.children.forEach(t=>{t.type==="directory"&&["app","components","services"].includes(t.name)&&(t.expanded=!0,this.treeControl.expand(t),this.expandChildrenRecursively(t,e-1))})}loadPinnedFiles(){let n=localStorage.getItem("codeagent-pinned-files");if(n)try{return JSON.parse(n)}catch(e){console.error("Failed to parse pinned files:",e)}return[]}savePinnedFiles(){localStorage.setItem("codeagent-pinned-files",JSON.stringify(this.context().pinnedFiles))}addToRecentFiles(n){let e=n.split("/").pop()||"unknown",t=e.split(".").pop()?.toLowerCase()||"",r={name:e,path:n,type:this.getFileType(t),modified:new Date,size:0};this.recentFiles.update(l=>{let f=l.filter(st=>st.path!==n),Y=[r,...f].slice(0,10);return localStorage.setItem("codeagent-recent-files",JSON.stringify(Y)),Y})}getFileType(n){switch(n){case"ts":return"typescript";case"js":return"javascript";case"html":return"html";case"scss":case"css":return"scss";case"json":return"json";case"md":return"markdown";default:return"text"}}hasChild=(n,e)=>!!e.children&&e.children.length>0;getFileIcon(n,e){if(e==="directory")return"folder";switch(n.split(".").pop()?.toLowerCase()){case"ts":return"code";case"html":return"web";case"scss":case"css":return"palette";case"json":return"data_object";case"md":return"article";case"js":return"javascript";default:return"description"}}getFileTypeIcon(n){switch(n){case"typescript":return"code";case"scss":return"palette";case"markdown":return"article";case"json":return"data_object";default:return"description"}}formatFileSize(n){if(n===0)return"0 B";let e=1024,t=["B","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(1))+" "+t[r]}formatRelativeTime(n){let t=new Date().getTime()-n.getTime(),r=Math.floor(t/6e4);if(r<1)return"just now";if(r<60)return`${r} min ago`;let l=Math.floor(r/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}onFileClick(n){n.type==="file"&&this.openFile(n.path)}onRecentFileClick(n){this.openFile(n.path)}openFile(n){this.loading.set(!0),this.fileService.readFile(n).subscribe({next:e=>{this.addToRecentFiles(n),this.context.update(t=>{let r=t.activeFiles.includes(n)?t.activeFiles:[...t.activeFiles,n];return v(P({},t),{activeFiles:r})}),console.log("File opened:",n,e),this.snackBar.open(`Opened ${n.split("/").pop()}`,"Close",{duration:2e3}),this.loading.set(!1)},error:e=>{console.error("Failed to read file:",e),this.snackBar.open("Failed to open file","Close",{duration:3e3}),this.loading.set(!1)}})}pinFile(n){this.context().pinnedFiles.includes(n)||(this.context.update(t=>v(P({},t),{pinnedFiles:[...t.pinnedFiles,n]})),this.savePinnedFiles(),this.snackBar.open("File pinned","Close",{duration:2e3}))}unpinFile(n){this.context.update(e=>v(P({},e),{pinnedFiles:e.pinnedFiles.filter(t=>t!==n)})),this.savePinnedFiles(),this.snackBar.open("File unpinned","Close",{duration:2e3})}isFilePinned(n){return this.context().pinnedFiles.includes(n)}refreshFileTree(){this.loadFileTree()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-context-files-panel"]],decls:39,vars:14,consts:[[1,"context-panel"],[1,"context-header"],[1,"project-info"],[1,"project-chip"],[1,"git-chip",3,"matTooltip"],["matBadgeSize","small","matBadgeColor","warn",1,"status-chip",3,"matBadge"],[1,"context-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click","disabled"],[1,"context-section"],[1,"count-chip"],["dense",""],[1,"context-section","file-browser"],["mode","indeterminate"],[1,"file-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],["matTreeNodeToggle","",4,"matTreeNodeDef","matTreeNodeDefWhen"],[3,"click"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"file-path"],["mat-icon-button","","matListItemMeta","","matTooltip","Pin file",3,"click"],["mat-icon-button","","matListItemMeta","","matTooltip","Unpin file",1,"pinned",3,"click"],["matListItemLine","",1,"file-meta"],[1,"file-path"],[1,"file-info"],["matTreeNodeToggle",""],[1,"tree-node","file-node",3,"click"],[1,"file-icon"],[1,"node-label"],[1,"file-size"],[1,"tree-node","folder-node"],["mat-icon-button","","matTreeNodeToggle",""],[1,"folder-icon"],[1,"folder-count"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-chip",3)(4,"mat-icon"),a(5,"folder"),o(),a(6),o(),i(7,"mat-chip",4)(8,"mat-icon"),a(9,"source"),o(),a(10),o(),M(11,Dn,4,1,"mat-chip",5),o(),i(12,"div",6)(13,"button",7),m("click",function(){return t.refreshFileTree()}),i(14,"mat-icon"),a(15,"refresh"),o()()()(),w(16,"mat-divider"),M(17,An,11,1),M(18,Ln,11,1),i(19,"div",8)(20,"h4")(21,"mat-icon"),a(22,"history"),o(),a(23," Recent Files "),i(24,"mat-chip",9),a(25),o()(),i(26,"mat-nav-list",10),y(27,Vn,13,8,"mat-list-item",null,In),o()(),w(29,"mat-divider"),i(30,"div",11)(31,"h4")(32,"mat-icon"),a(33,"folder_open"),o(),a(34," Project Files "),o(),M(35,Nn,1,0,"mat-progress-bar",12),i(36,"mat-tree",13),Me(37,$n,7,3,"mat-tree-node",14)(38,Hn,10,4,"mat-tree-node",15),o()()()),e&2&&(c(6),O(" ",t.context().projectRoot.split("/").pop()," "),c(),u("matTooltip","Branch: "+t.context().gitBranch),c(3),O(" ",t.context().gitBranch," "),c(),x(t.context().gitStatus.modified+t.context().gitStatus.staged+t.context().gitStatus.untracked>0?11:-1),c(2),u("disabled",t.loading()),c(),C("spinning",t.loading()),c(3),x(t.context().activeFiles.length>0?17:-1),c(),x(t.context().pinnedFiles.length>0?18:-1),c(7),p(t.recentFiles().length),c(2),S(t.recentFiles()),c(8),x(t.loading()?35:-1),c(),u("dataSource",t.dataSource)("treeControl",t.treeControl),c(2),u("matTreeNodeDefWhen",t.hasChild))},dependencies:[z,L,N,V,$,R,Q,Fe,Ee,Te,A,we,Se,ke,G,K,B,Kt,Wt,Qt,qt,Ut,Zt,Jt,H,j,ge,He,Le],styles:[".context-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto}.context-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:var(--spacing-md);gap:var(--spacing-md)}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-chip[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;font-weight:500}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .git-chip[_ngcontent-%COMP%]{background-color:var(--app-success-light);color:var(--app-success);font-size:12px;height:24px}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .git-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{background-color:var(--app-warning-light);color:var(--app-warning, #ff9800);font-size:12px;height:24px}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.context-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin:0 0 var(--spacing-md) 0;font-size:14px;font-weight:600;color:var(--app-text-primary)}.context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .count-chip[_ngcontent-%COMP%]{margin-left:auto;background-color:var(--app-surface);color:var(--app-text-secondary);font-size:11px;font-weight:600;height:20px;min-height:20px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{padding:0}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:var(--radius-sm);margin-bottom:2px;transition:background-color var(--transition-fast)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[matListItemIcon][_ngcontent-%COMP%]{color:var(--app-text-secondary);font-size:18px;width:18px;height:18px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemTitle][_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--app-text-primary)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine][_ngcontent-%COMP%]{font-size:11px;color:var(--app-text-disabled)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-path[_ngcontent-%COMP%]{font-family:Courier New,monospace;opacity:.8}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-meta[_ngcontent-%COMP%]   .file-path[_ngcontent-%COMP%]{font-family:Courier New,monospace}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-meta[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   button[matListItemMeta][_ngcontent-%COMP%]{opacity:0;transition:opacity var(--transition-fast)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   button[matListItemMeta].pinned[_ngcontent-%COMP%]{opacity:1;color:var(--primary-color)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   button[matListItemMeta][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover   button[matListItemMeta][_ngcontent-%COMP%]{opacity:1}.file-browser[_ngcontent-%COMP%]{flex:1}.file-browser[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--spacing-xs) 0;cursor:pointer;border-radius:var(--radius-sm);transition:background-color var(--transition-fast)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%], .file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary);margin-right:var(--spacing-sm)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .node-label[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--app-text-primary)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:11px;color:var(--app-text-disabled);margin-left:var(--spacing-sm)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .folder-count[_ngcontent-%COMP%]{font-size:11px;color:var(--app-text-disabled);margin-left:var(--spacing-xs)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   button[matTreeNodeToggle][_ngcontent-%COMP%]{width:24px;height:24px;margin-right:var(--spacing-xs)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   button[matTreeNodeToggle][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--app-text-secondary)}.file-tree[_ngcontent-%COMP%]   .file-node[_ngcontent-%COMP%]{padding-left:calc(var(--spacing-md) + 24px)}.file-tree[_ngcontent-%COMP%]   .folder-node[_ngcontent-%COMP%]{font-weight:500}mat-divider[_ngcontent-%COMP%]{margin:0;opacity:.6}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}@media (prefers-color-scheme: dark){.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .git-chip[_ngcontent-%COMP%]{background-color:#4caf5026;color:#66bb6a}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{background-color:#ff980026;color:#ffa726}}"]})};var Un=(s,n)=>n.id;function Wn(s,n){if(s&1){let e=b();i(0,"button",13),m("click",function(){g(e);let r=d();return r.searchQuery.set(""),h(r.onSearchChange())}),i(1,"mat-icon"),a(2,"clear"),o()()}}function qn(s,n){s&1&&(i(0,"div",11),w(1,"mat-progress-spinner",14),i(2,"p"),a(3,"Loading conversations..."),o()())}function Qn(s,n){s&1&&(i(0,"mat-icon"),a(1,"search_off"),o(),i(2,"h3"),a(3,"No conversations found"),o(),i(4,"p"),a(5,"Try adjusting your search terms or filters"),o())}function Kn(s,n){s&1&&(i(0,"mat-icon"),a(1,"star_border"),o(),i(2,"h3"),a(3,"No starred conversations"),o(),i(4,"p"),a(5,"Star conversations to find them easily later"),o())}function Yn(s,n){s&1&&(i(0,"mat-icon"),a(1,"archive"),o(),i(2,"h3"),a(3,"No archived conversations"),o(),i(4,"p"),a(5,"Archived conversations will appear here"),o())}function Jn(s,n){s&1&&(i(0,"mat-icon"),a(1,"chat_bubble_outline"),o(),i(2,"h3"),a(3,"No conversations yet"),o(),i(4,"p"),a(5,"Start a new conversation to see it here"),o())}function Zn(s,n){if(s&1&&(i(0,"div",12),M(1,Qn,6,0)(2,Kn,6,0)(3,Yn,6,0)(4,Jn,6,0),o()),s&2){let e=d();c(),x(e.searchQuery()?1:e.selectedFilter()==="starred"?2:e.selectedFilter()==="archived"?3:4)}}function Xn(s,n){s&1&&(i(0,"mat-icon",18),a(1,"star"),o())}function ei(s,n){s&1&&(i(0,"mat-icon"),a(1,"chat_bubble"),o())}function ti(s,n){if(s&1&&(i(0,"mat-chip",32),a(1),o()),s&2){let e=n.$implicit;c(),p(e)}}function ni(s,n){if(s&1&&(i(0,"div",26),y(1,ti,2,1,"mat-chip",32,F),o()),s&2){let e=d().$implicit;c(),S(e.tags)}}function ii(s,n){if(s&1){let e=b();i(0,"button",33),m("click",function(r){g(e);let l=d().$implicit,f=d(2);return h(f.archiveSession(l.id,r))}),i(1,"mat-icon"),a(2,"archive"),o(),a(3," Archive "),o()}}function oi(s,n){if(s&1){let e=b();i(0,"button",33),m("click",function(r){g(e);let l=d().$implicit,f=d(2);return h(f.restoreSession(l.id,r))}),i(1,"mat-icon"),a(2,"unarchive"),o(),a(3," Restore "),o()}}function ai(s,n){if(s&1){let e=b();i(0,"mat-list-item",16),m("click",function(){let r=g(e).$implicit,l=d(2);return h(l.openSession(r.id))}),i(1,"div",17),M(2,Xn,2,0,"mat-icon",18)(3,ei,2,0,"mat-icon"),o(),i(4,"div",19)(5,"span",20),a(6),o(),i(7,"div",21)(8,"span",22),a(9),o(),i(10,"span",23),a(11),o()()(),i(12,"div",24)(13,"p",25),a(14),o(),M(15,ni,3,0,"div",26),o(),i(16,"div",27)(17,"button",28),m("click",function(r){let l=g(e).$implicit,f=d(2);return h(f.toggleStar(l.id,r))}),i(18,"mat-icon"),a(19),o()(),i(20,"button",29),m("click",function(r){return g(e),h(r.stopPropagation())}),i(21,"mat-icon"),a(22,"more_vert"),o()(),i(23,"mat-menu",null,0),M(25,ii,4,0,"button",30)(26,oi,4,0,"button",30),i(27,"button",31),m("click",function(r){let l=g(e).$implicit,f=d(2);return h(f.deleteSession(l.id,r))}),i(28,"mat-icon"),a(29,"delete"),o(),a(30," Delete "),o()()()()}if(s&2){let e=n.$implicit,t=Mt(24),r=d(2);c(2),x(e.starred?2:3),c(4),p(e.title),c(3),O("",e.messageCount," messages"),c(2),p(r.formatRelativeTime(e.lastActivity)),c(3),p(e.preview),c(),x(e.tags.length>0?15:-1),c(2),C("starred",e.starred),u("matTooltip",e.starred?"Remove star":"Add star"),c(2),p(e.starred?"star":"star_border"),c(),u("matMenuTriggerFor",t),c(5),x(e.archived?26:25)}}function si(s,n){if(s&1&&(i(0,"mat-nav-list"),y(1,ai,31,12,"mat-list-item",15,Un),o()),s&2){let e=d();c(),S(e.filteredSessions())}}var Ye=class s{searchQuery=_("");loading=_(!1);selectedFilter=_("all");chatSessions=_([{id:"session-1",title:"Configuration Panel Setup",preview:"Help me implement a configuration panel with providers, security settings...",messageCount:24,lastActivity:new Date(Date.now()-30*60*1e3),tags:["configuration","ui","angular"],starred:!0,archived:!1},{id:"session-2",title:"Chat Sidecar Implementation",preview:"Lets add a right sidebar to the chat window for displaying different...",messageCount:18,lastActivity:new Date(Date.now()-2*60*60*1e3),tags:["chat","ui","sidecar"],starred:!1,archived:!1},{id:"session-3",title:"Session Permissions System",preview:"Create a session-based permissions system that allows temporary...",messageCount:31,lastActivity:new Date(Date.now()-4*60*60*1e3),tags:["permissions","security","session"],starred:!1,archived:!1},{id:"session-4",title:"File Browser Component",preview:"Build a file tree browser that shows the project structure...",messageCount:15,lastActivity:new Date(Date.now()-1*24*60*60*1e3),tags:["files","tree","browser"],starred:!0,archived:!1},{id:"session-5",title:"API Integration",preview:"Connect the frontend to the backend API endpoints for chat...",messageCount:42,lastActivity:new Date(Date.now()-3*24*60*60*1e3),tags:["api","backend","integration"],starred:!1,archived:!1},{id:"session-6",title:"Initial Project Setup",preview:"Help me set up the basic Angular project structure with Material...",messageCount:28,lastActivity:new Date(Date.now()-7*24*60*60*1e3),tags:["setup","angular","material"],starred:!1,archived:!0}]);filteredSessions=_([]);ngOnInit(){this.updateFilteredSessions()}updateFilteredSessions(){let n=this.chatSessions(),e=this.searchQuery().toLowerCase();switch(e&&(n=n.filter(t=>t.title.toLowerCase().includes(e)||t.preview.toLowerCase().includes(e)||t.tags.some(r=>r.toLowerCase().includes(e)))),this.selectedFilter()){case"starred":n=n.filter(t=>t.starred&&!t.archived);break;case"recent":n=n.filter(t=>{let r=new Date(Date.now()-1728e5);return t.lastActivity>r&&!t.archived});break;case"archived":n=n.filter(t=>t.archived);break;case"all":default:n=n.filter(t=>!t.archived);break}n.sort((t,r)=>r.lastActivity.getTime()-t.lastActivity.getTime()),this.filteredSessions.set(n)}onSearchChange(){this.updateFilteredSessions()}setFilter(n){this.selectedFilter.set(n),this.updateFilteredSessions()}toggleStar(n,e){e.stopPropagation(),this.chatSessions.update(t=>t.map(r=>r.id===n?v(P({},r),{starred:!r.starred}):r)),this.updateFilteredSessions()}archiveSession(n,e){e.stopPropagation(),this.chatSessions.update(t=>t.map(r=>r.id===n?v(P({},r),{archived:!0}):r)),this.updateFilteredSessions()}restoreSession(n,e){e.stopPropagation(),this.chatSessions.update(t=>t.map(r=>r.id===n?v(P({},r),{archived:!1}):r)),this.updateFilteredSessions()}deleteSession(n,e){e.stopPropagation(),confirm("Are you sure you want to delete this chat session? This action cannot be undone.")&&(this.chatSessions.update(t=>t.filter(r=>r.id!==n)),this.updateFilteredSessions())}openSession(n){console.log("Opening session:",n)}formatRelativeTime(n){let t=new Date().getTime()-n.getTime(),r=Math.floor(t/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;let l=Math.floor(r/60);if(l<24)return`${l}h ago`;let f=Math.floor(l/24);if(f<7)return`${f}d ago`;let Y=Math.floor(f/7);return Y<4?`${Y}w ago`:`${Math.floor(f/30)}mo ago`}getFilterCount(n){let e=this.chatSessions();switch(n){case"starred":return e.filter(r=>r.starred&&!r.archived).length;case"recent":let t=new Date(Date.now()-2*24*60*60*1e3);return e.filter(r=>r.lastActivity>t&&!r.archived).length;case"archived":return e.filter(r=>r.archived).length;case"all":default:return e.filter(r=>!r.archived).length}}refreshHistory(){this.loading.set(!0),setTimeout(()=>{this.loading.set(!1)},1e3)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-chat-history-panel"]],decls:41,vars:18,consts:[["sessionMenu","matMenu"],[1,"history-panel"],[1,"history-header"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by title, content, or tags...",3,"ngModelChange","input","ngModel"],["matPrefix",""],["matSuffix","","mat-icon-button",""],["mat-icon-button","","matTooltip","Refresh",3,"click","disabled"],[1,"filter-section"],[3,"click"],[1,"sessions-list"],[1,"loading-container"],[1,"empty-state"],["matSuffix","","mat-icon-button","",3,"click"],["diameter","32"],[1,"session-item"],[1,"session-item",3,"click"],["matListItemIcon","",1,"session-avatar"],[1,"star-icon"],["matListItemTitle","",1,"session-header"],[1,"session-title"],[1,"session-meta"],[1,"message-count"],[1,"last-activity"],["matListItemLine","",1,"session-content"],[1,"session-preview"],[1,"session-tags"],["matListItemMeta","",1,"session-actions"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",1,"delete-action",3,"click"],[1,"tag-chip"],["mat-menu-item","",3,"click"]],template:function(e,t){e&1&&(i(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),a(4,"Search conversations"),o(),i(5,"input",4),q("ngModelChange",function(l){return W(t.searchQuery,l)||(t.searchQuery=l),l}),m("input",function(){return t.onSearchChange()}),o(),i(6,"mat-icon",5),a(7,"search"),o(),M(8,Wn,3,0,"button",6),o(),i(9,"button",7),m("click",function(){return t.refreshHistory()}),i(10,"mat-icon"),a(11,"refresh"),o()()(),i(12,"div",8)(13,"mat-chip-set")(14,"mat-chip",9),m("click",function(){return t.setFilter("all")}),a(15," All "),i(16,"mat-chip-trailing-icon"),a(17),o()(),i(18,"mat-chip",9),m("click",function(){return t.setFilter("starred")}),i(19,"mat-icon"),a(20,"star"),o(),a(21," Starred "),i(22,"mat-chip-trailing-icon"),a(23),o()(),i(24,"mat-chip",9),m("click",function(){return t.setFilter("recent")}),i(25,"mat-icon"),a(26,"schedule"),o(),a(27," Recent "),i(28,"mat-chip-trailing-icon"),a(29),o()(),i(30,"mat-chip",9),m("click",function(){return t.setFilter("archived")}),i(31,"mat-icon"),a(32,"archive"),o(),a(33," Archived "),i(34,"mat-chip-trailing-icon"),a(35),o()()()(),w(36,"mat-divider"),i(37,"div",10),M(38,qn,4,0,"div",11)(39,Zn,5,1,"div",12)(40,si,3,0,"mat-nav-list"),o()()),e&2&&(c(5),U("ngModel",t.searchQuery),c(3),x(t.searchQuery()?8:-1),c(),u("disabled",t.loading()),c(),C("spinning",t.loading()),c(4),C("selected",t.selectedFilter()==="all"),c(3),p(t.getFilterCount("all")),c(),C("selected",t.selectedFilter()==="starred"),c(5),p(t.getFilterCount("starred")),c(),C("selected",t.selectedFilter()==="recent"),c(5),p(t.getFilterCount("recent")),c(),C("selected",t.selectedFilter()==="archived"),c(5),p(t.getFilterCount("archived")),c(3),x(t.loading()?38:t.filteredSessions().length===0?39:40))},dependencies:[z,L,Z,X,ee,N,V,$,R,Q,Fe,Ee,Te,A,we,Se,ke,G,K,le,Bt,B,on,tn,en,nn,H,j,ce,De,te,se,Ie,Dt,zt,ne,re],styles:['@charset "UTF-8";.history-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:hidden}.history-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md)}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{height:40px}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:8px 0;min-height:auto}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     input{font-size:14px}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix{color:var(--app-text-secondary)}.history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.filter-section[_ngcontent-%COMP%]{padding:0 var(--spacing-md) var(--spacing-md)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;height:32px;cursor:pointer;transition:all var(--transition-fast)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-chip-trailing-icon[_ngcontent-%COMP%]{color:#fff;opacity:.9}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-chip-trailing-icon[_ngcontent-%COMP%]{font-size:11px;background-color:var(--app-text-disabled);color:#fff;border-radius:10px;padding:2px 6px;margin-left:var(--spacing-xs)}.sessions-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.sessions-list[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--app-text-secondary)}.sessions-list[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:var(--spacing-md);font-size:14px}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);text-align:center;color:var(--app-text-secondary)}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5;margin-bottom:var(--spacing-md)}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--spacing-sm) 0;font-size:16px;font-weight:500;color:var(--app-text-primary)}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.8}.sessions-list[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{padding:0}.session-item[_ngcontent-%COMP%]{min-height:80px;padding:var(--spacing-md);cursor:pointer;border-bottom:1px solid var(--app-divider);transition:background-color var(--transition-fast)}.session-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.session-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.session-item[_ngcontent-%COMP%]   .session-avatar[_ngcontent-%COMP%]{align-self:flex-start;margin-top:4px}.session-item[_ngcontent-%COMP%]   .session-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--app-text-secondary)}.session-item[_ngcontent-%COMP%]   .session-avatar[_ngcontent-%COMP%]   mat-icon.star-icon[_ngcontent-%COMP%]{color:var(--app-warning, #ff9800)}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:var(--spacing-xs)}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--app-text-primary);line-height:1.2}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-meta[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);font-size:11px;color:var(--app-text-disabled)}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-meta[_ngcontent-%COMP%]   .message-count[_ngcontent-%COMP%]:before{content:"\\1f4ac  "}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-meta[_ngcontent-%COMP%]   .last-activity[_ngcontent-%COMP%]:before{content:"\\1f552  "}.session-item[_ngcontent-%COMP%]   .session-content[_ngcontent-%COMP%]   .session-preview[_ngcontent-%COMP%]{font-size:13px;color:var(--app-text-secondary);line-height:1.3;margin:0 0 var(--spacing-xs) 0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.session-item[_ngcontent-%COMP%]   .session-content[_ngcontent-%COMP%]   .session-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.session-item[_ngcontent-%COMP%]   .session-content[_ngcontent-%COMP%]   .session-tags[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{font-size:10px;height:18px;background-color:var(--app-surface);color:var(--app-text-secondary);border:1px solid var(--app-divider)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;opacity:0;transition:opacity var(--transition-fast)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;color:var(--app-text-secondary)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button.starred[_ngcontent-%COMP%], .session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button.starred[_ngcontent-%COMP%]:hover{color:var(--app-warning, #ff9800)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.session-item[_ngcontent-%COMP%]:hover   .session-actions[_ngcontent-%COMP%]{opacity:1}  .delete-action{color:var(--app-error, #f44336)!important}  .delete-action mat-icon{color:var(--app-error, #f44336)!important}mat-divider[_ngcontent-%COMP%]{margin:0;opacity:.6}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}@media (prefers-color-scheme: dark){.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-chip-trailing-icon[_ngcontent-%COMP%]{background-color:#fff3}}']})};var ri=(s,n)=>n.name,dn=(s,n)=>n.id;function ci(s,n){if(s&1&&(i(0,"div",16)(1,"mat-icon"),a(2),o(),i(3,"span"),a(4),o(),w(5,"mat-progress-spinner",17),o()),s&2){let e=d().$implicit;c(2),p(e.icon),c(2),p(e.name)}}function li(s,n){if(s&1&&M(0,ci,6,2,"div",16),s&2){let e=n.$implicit,t=d().$implicit;x(e.id===t?0:-1)}}function di(s,n){if(s&1&&y(0,li,1,1,null,null,dn),s&2){let e=d(2);S(e.tools())}}function mi(s,n){if(s&1&&(i(0,"div",5)(1,"h4")(2,"mat-icon"),a(3,"play_circle"),o(),a(4," Running Tools "),i(5,"mat-chip",14),a(6),o()(),i(7,"div",15),y(8,di,2,0,null,null,F),o(),w(10,"mat-divider"),o()),s&2){let e=d();c(6),p(e.activeTools().length),c(2),S(e.activeTools())}}function pi(s,n){if(s&1&&(i(0,"mat-chip",18),a(1),o()),s&2){let e=d().$implicit,t=d();c(),O(" ",t.getRunningToolsCount(e)," running ")}}function gi(s,n){if(s&1&&(i(0,"mat-chip",27),a(1),o()),s&2){let e=d().$implicit;c(),p(e.shortcut)}}function hi(s,n){s&1&&w(0,"mat-progress-spinner",29)}function _i(s,n){if(s&1){let e=b();i(0,"button",34),m("click",function(r){g(e);let l=d().$implicit,f=d(2);return r.stopPropagation(),h(f.executeTool(l))}),i(1,"mat-icon"),a(2,"play_arrow"),o()()}if(s&2){let e=d().$implicit;u("disabled",!e.enabled)}}function ui(s,n){if(s&1&&(i(0,"span",33),a(1),o()),s&2){let e=d().$implicit,t=d(2);c(),O("\u2022 Last used ",t.formatLastUsed(e.lastUsed))}}function fi(s,n){if(s&1){let e=b();i(0,"div",21)(1,"div",22),m("click",function(){let r=g(e).$implicit,l=d(2);return h(l.executeTool(r))}),i(2,"div",23)(3,"mat-icon",24),a(4),o(),i(5,"div",25)(6,"span",26),a(7),o(),M(8,gi,2,1,"mat-chip",27),o()(),i(9,"div",28),M(10,hi,1,0,"mat-progress-spinner",29)(11,_i,3,1,"button",30),i(12,"button",31),m("click",function(r){let l=g(e).$implicit,f=d(2);return r.stopPropagation(),h(f.toggleTool(l.id))}),i(13,"mat-icon"),a(14),o()()()(),i(15,"div",32),a(16),M(17,ui,2,1,"span",33),o()()}if(s&2){let e=n.$implicit;C("disabled",!e.enabled)("running",e.status==="running"),c(4),p(e.icon),c(3),p(e.name),c(),x(e.shortcut?8:-1),c(2),x(e.status==="running"?10:11),c(2),u("matTooltip",e.enabled?"Disable tool":"Enable tool"),c(2),p(e.enabled?"toggle_on":"toggle_off"),c(2),O(" ",e.description," "),c(),x(e.lastUsed?17:-1)}}function Ci(s,n){if(s&1&&(i(0,"mat-expansion-panel",8)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4),o(),i(5,"span"),a(6),o(),M(7,pi,2,1,"mat-chip",18),o(),i(8,"mat-panel-description"),a(9),o()(),i(10,"div",19),y(11,fi,18,12,"div",20,dn),o()()),s&2){let e=n.$implicit,t=d();u("expanded",e.expanded),c(4),p(e.icon),c(2),p(e.name),c(),x(t.getRunningToolsCount(e)>0?7:-1),c(2),T(" ",t.getEnabledToolsCount(e),"/",e.tools.length," enabled "),c(2),S(e.tools)}}var Je=class s{loading=_(!1);activeTools=_([]);tools=_([{id:"search-code",name:"Search Code",description:"Search across all files in the project",icon:"search",category:"code",enabled:!0,shortcut:"Ctrl+Shift+F",status:"idle"},{id:"find-replace",name:"Find & Replace",description:"Find and replace text across multiple files",icon:"find_replace",category:"code",enabled:!0,shortcut:"Ctrl+H",status:"idle"},{id:"format-code",name:"Format Code",description:"Auto-format code using project standards",icon:"auto_fix_high",category:"code",enabled:!0,shortcut:"Shift+Alt+F",status:"idle"},{id:"analyze-imports",name:"Analyze Imports",description:"Find unused imports and optimize dependencies",icon:"account_tree",category:"code",enabled:!0,status:"idle"},{id:"generate-docs",name:"Generate Docs",description:"Auto-generate documentation from code comments",icon:"article",category:"code",enabled:!0,status:"idle"},{id:"create-file",name:"Create File",description:"Create new files with templates",icon:"note_add",category:"file",enabled:!0,shortcut:"Ctrl+N",status:"idle"},{id:"create-folder",name:"Create Folder",description:"Create new directories in the project",icon:"create_new_folder",category:"file",enabled:!0,status:"idle"},{id:"move-rename",name:"Move/Rename",description:"Move or rename files and update references",icon:"drive_file_move",category:"file",enabled:!0,status:"idle"},{id:"duplicate-file",name:"Duplicate",description:"Duplicate files or folders",icon:"content_copy",category:"file",enabled:!0,status:"idle"},{id:"git-status",name:"Git Status",description:"View current git status and changes",icon:"info",category:"git",enabled:!0,shortcut:"Ctrl+Shift+G",status:"idle"},{id:"git-diff",name:"View Diff",description:"Compare changes between commits",icon:"difference",category:"git",enabled:!0,status:"idle"},{id:"git-commit",name:"Commit Changes",description:"Stage and commit changes",icon:"check_circle",category:"git",enabled:!0,shortcut:"Ctrl+Enter",status:"idle"},{id:"git-branch",name:"Branch Manager",description:"Create, switch, and manage branches",icon:"call_split",category:"git",enabled:!0,status:"idle"},{id:"explain-code",name:"Explain Code",description:"Get AI explanations of selected code",icon:"psychology",category:"ai",enabled:!0,status:"idle",lastUsed:new Date(Date.now()-30*60*1e3)},{id:"suggest-improvements",name:"Code Suggestions",description:"Get AI suggestions for code improvements",icon:"lightbulb",category:"ai",enabled:!0,status:"idle",lastUsed:new Date(Date.now()-45*60*1e3)},{id:"generate-tests",name:"Generate Tests",description:"Auto-generate unit tests for functions",icon:"quiz",category:"ai",enabled:!0,status:"idle"},{id:"code-review",name:"AI Code Review",description:"Get automated code review feedback",icon:"rate_review",category:"ai",enabled:!0,status:"idle"},{id:"syntax-check",name:"Syntax Check",description:"Check for syntax errors in code",icon:"bug_report",category:"debug",enabled:!0,status:"idle"},{id:"lint-code",name:"Lint Code",description:"Run linting tools on the codebase",icon:"rule",category:"debug",enabled:!0,status:"idle"},{id:"run-tests",name:"Run Tests",description:"Execute unit and integration tests",icon:"play_arrow",category:"debug",enabled:!0,shortcut:"Ctrl+Shift+T",status:"idle"}]);categories=_([]);ngOnInit(){this.organizeTools()}organizeTools(){let n=new Map;this.tools().forEach(t=>{n.has(t.category)||n.set(t.category,[]),n.get(t.category).push(t)});let e=[{name:"Code Tools",icon:"code",tools:n.get("code")||[],expanded:!0},{name:"File Operations",icon:"folder",tools:n.get("file")||[],expanded:!1},{name:"Git Integration",icon:"source",tools:n.get("git")||[],expanded:!1},{name:"AI Assistance",icon:"psychology",tools:n.get("ai")||[],expanded:!1},{name:"Debug & Test",icon:"bug_report",tools:n.get("debug")||[],expanded:!1}];this.categories.set(e)}executeTool(n){n.enabled&&(this.updateToolStatus(n.id,"running"),this.activeTools.update(e=>[...e,n.id]),console.log(`Executing tool: ${n.name}`),setTimeout(()=>{this.updateToolStatus(n.id,"idle"),this.activeTools.update(e=>e.filter(t=>t!==n.id)),this.tools.update(e=>e.map(t=>t.id===n.id?v(P({},t),{lastUsed:new Date}):t))},2e3))}updateToolStatus(n,e){this.tools.update(t=>t.map(r=>r.id===n?v(P({},r),{status:e}):r)),this.organizeTools()}toggleTool(n){this.tools.update(e=>e.map(t=>t.id===n?v(P({},t),{enabled:!t.enabled}):t)),this.organizeTools()}getEnabledToolsCount(n){return n.tools.filter(e=>e.enabled).length}getRunningToolsCount(n){return n.tools.filter(e=>e.status==="running").length}formatLastUsed(n){let t=new Date().getTime()-n.getTime(),r=Math.floor(t/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;let l=Math.floor(r/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}refreshTools(){this.loading.set(!0),setTimeout(()=>{this.loading.set(!1)},1e3)}getTotalEnabledToolsCount(){return this.tools().filter(n=>n.enabled).length}getTotalToolsCount(){return this.tools().length}getActiveToolsCount(){return this.activeTools().length}toggleAllTools(){let n=this.tools().every(e=>e.enabled);this.tools.update(e=>e.map(t=>v(P({},t),{enabled:!n}))),this.organizeTools()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-tools-panel"]],decls:32,vars:8,consts:[[1,"tools-panel"],[1,"tools-header"],[1,"header-info"],[1,"tools-count"],["mat-icon-button","","matTooltip","Refresh Tools",3,"click","disabled"],[1,"active-tools-section"],[1,"tools-categories"],["multi",""],[3,"expanded"],[1,"tools-footer"],[1,"footer-stats"],[1,"stat"],[1,"footer-actions"],["mat-button","",3,"click"],[1,"count-chip"],[1,"active-tools-list"],[1,"active-tool"],["diameter","16","mode","indeterminate"],[1,"running-chip"],[1,"tools-list"],[1,"tool-item",3,"disabled","running"],[1,"tool-item"],[1,"tool-header",3,"click"],[1,"tool-info"],[1,"tool-icon"],[1,"tool-details"],[1,"tool-name"],[1,"shortcut-chip"],[1,"tool-actions"],["diameter","20","mode","indeterminate"],["mat-icon-button","","matTooltip","Execute tool",3,"disabled"],["mat-icon-button","",3,"click","matTooltip"],[1,"tool-description"],[1,"last-used"],["mat-icon-button","","matTooltip","Execute tool",3,"click","disabled"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Available Tools"),o(),i(5,"mat-chip",3),a(6),o()(),i(7,"button",4),m("click",function(){return t.refreshTools()}),i(8,"mat-icon"),a(9,"refresh"),o()()(),w(10,"mat-divider"),M(11,mi,11,1,"div",5),i(12,"div",6)(13,"mat-accordion",7),y(14,Ci,13,6,"mat-expansion-panel",8,ri),o()(),w(16,"mat-divider"),i(17,"div",9)(18,"div",10)(19,"span",11)(20,"mat-icon"),a(21,"check_circle"),o(),a(22),o(),i(23,"span",11)(24,"mat-icon"),a(25,"play_circle"),o(),a(26),o()(),i(27,"div",12)(28,"button",13),m("click",function(){return t.toggleAllTools()}),i(29,"mat-icon"),a(30,"select_all"),o(),a(31," Toggle All "),o()()()()),e&2&&(c(6),T(" ",t.getTotalEnabledToolsCount(),"/",t.getTotalToolsCount()," enabled "),c(),u("disabled",t.loading()),c(),C("spinning",t.loading()),c(3),x(t.activeTools().length>0?11:-1),c(3),S(t.categories()),c(8),O(" ",t.getTotalEnabledToolsCount()," enabled "),c(4),O(" ",t.getActiveToolsCount()," running "))},dependencies:[z,L,N,V,$,ae,R,Q,A,ie,Re,de,me,pe,Ne,G,K,ge,H,j,B,ce,De],styles:[".tools-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:hidden}.tools-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md)}.tools-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.tools-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:var(--app-text-primary)}.tools-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .tools-count[_ngcontent-%COMP%]{font-size:11px;height:20px;background-color:var(--app-surface);color:var(--app-text-secondary);border:1px solid var(--app-divider)}.tools-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.tools-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.tools-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.active-tools-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.active-tools-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin:0 0 var(--spacing-md) 0;font-size:14px;font-weight:600;color:var(--app-text-primary)}.active-tools-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-success)}.active-tools-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .count-chip[_ngcontent-%COMP%]{margin-left:auto;background-color:var(--app-success-light);color:var(--app-success);font-size:11px;height:20px}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);margin-bottom:var(--spacing-md)}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-sm);background-color:var(--app-success-light);border-radius:var(--radius-sm);font-size:13px;color:var(--app-success)}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-weight:500}.tools-categories[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0 var(--spacing-md)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);background-color:var(--app-surface)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 var(--spacing-md)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:14px;font-weight:500}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .running-chip[_ngcontent-%COMP%]{font-size:10px;height:18px;background-color:var(--app-warning-light);color:var(--app-warning, #ff9800);margin-left:var(--spacing-sm)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{font-size:12px;color:var(--app-text-disabled)}.tools-list[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.tool-item[_ngcontent-%COMP%]{border-radius:var(--radius-sm);margin-bottom:var(--spacing-sm);padding:var(--spacing-sm);transition:all var(--transition-fast);border:1px solid transparent}.tool-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.tool-item.disabled[_ngcontent-%COMP%]{opacity:.6}.tool-item.disabled[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{color:var(--app-text-disabled)}.tool-item.running[_ngcontent-%COMP%]{background-color:var(--app-success-light);border-color:var(--app-success)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;margin-bottom:var(--spacing-xs)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex:1}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--app-text-secondary)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-details[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--app-text-primary)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-details[_ngcontent-%COMP%]   .shortcut-chip[_ngcontent-%COMP%]{font-size:10px;height:16px;background-color:var(--app-background);color:var(--app-text-secondary);border:1px solid var(--app-divider);font-family:monospace;align-self:flex-start}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]{display:flex;gap:2px;opacity:0;transition:opacity var(--transition-fast)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;color:var(--app-text-secondary)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:4px}.tool-item[_ngcontent-%COMP%]:hover   .tool-actions[_ngcontent-%COMP%]{opacity:1}.tool-item[_ngcontent-%COMP%]   .tool-description[_ngcontent-%COMP%]{font-size:12px;color:var(--app-text-secondary);line-height:1.4}.tool-item[_ngcontent-%COMP%]   .tool-description[_ngcontent-%COMP%]   .last-used[_ngcontent-%COMP%]{color:var(--app-text-disabled);font-style:italic}.tools-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);background-color:var(--app-surface);border-top:1px solid var(--app-divider)}.tools-footer[_ngcontent-%COMP%]   .footer-stats[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md)}.tools-footer[_ngcontent-%COMP%]   .footer-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:12px;color:var(--app-text-secondary)}.tools-footer[_ngcontent-%COMP%]   .footer-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.tools-footer[_ngcontent-%COMP%]   .footer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}.tools-footer[_ngcontent-%COMP%]   .footer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}mat-divider[_ngcontent-%COMP%]{margin:0;opacity:.6}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}@media (prefers-color-scheme: dark){.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{background-color:#4caf5026;color:#66bb6a}.tool-item.running[_ngcontent-%COMP%]{background-color:#4caf5026;border-color:#66bb6a}}"]})};var Pi=["messagesContainer"],vi=(s,n)=>n.id;function Mi(s,n){if(s&1&&(i(0,"mat-chip",6)(1,"mat-icon"),a(2,"security"),o(),a(3),o()),s&2){let e=d();c(3),O(" ",e.activePermissionsCount()," permissions active ")}}function xi(s,n){s&1&&(i(0,"div",15)(1,"mat-icon",24),a(2,"assistant"),o(),i(3,"h2"),a(4,"Welcome to CodeAgent"),o(),i(5,"p"),a(6,"How can I help you today?"),o()())}function bi(s,n){if(s&1&&(i(0,"div",25)(1,"div",26)(2,"mat-icon",27),a(3),o(),i(4,"div",28),a(5),o()()()),s&2){let e=n.$implicit;C("user",e.role==="user")("assistant",e.role==="assistant"),c(3),O(" ",e.role==="user"?"person":"assistant"," "),c(2),p(e.content)}}function Oi(s,n){s&1&&(i(0,"div",18)(1,"div",26)(2,"mat-icon",27),a(3,"assistant"),o(),i(4,"div",29),w(5,"span")(6,"span")(7,"span"),o()()())}function yi(s,n){if(s&1){let e=b();i(0,"app-session-permissions-panel",35),m("permissionsChanged",function(r){g(e);let l=d(2);return h(l.onPermissionsChanged(r))})("pathsChanged",function(r){g(e);let l=d(2);return h(l.onPathsChanged(r))}),o()}if(s&2){let e=d(2);u("permissions",e.sessionPermissions())("paths",e.sessionPaths())}}function Si(s,n){s&1&&w(0,"app-context-files-panel")}function wi(s,n){s&1&&w(0,"app-chat-history-panel")}function ki(s,n){s&1&&w(0,"app-tools-panel")}function Ti(s,n){if(s&1){let e=b();i(0,"div",30)(1,"div",31)(2,"h3"),a(3),o(),i(4,"button",32),m("click",function(){g(e);let r=d();return h(r.closeSidecar())}),i(5,"mat-icon"),a(6,"close"),o()()(),i(7,"div",33),M(8,yi,1,2,"app-session-permissions-panel",34)(9,Si,1,0,"app-context-files-panel")(10,wi,1,0,"app-chat-history-panel")(11,ki,1,0,"app-tools-panel"),o()()}if(s&2){let e,t=d();u("@slideIn",t.showSidecar()),c(3),p(t.getSidecarTitle()),c(5),x((e=t.sidecarView())==="permissions"?8:e==="context"?9:e==="history"?10:e==="tools"?11:-1)}}var mn=class s{messagesContainer;chatService=k(Ht);snackBar=k(Be);dialog=k(Nt);streamSubscription;messages=_([]);inputMessage="";isLoading=_(!1);isStreaming=_(!1);currentStreamMessage=_("");sessionPermissions=_([]);sessionPaths=_({permitted:[],blocked:[]});activePermissionsCount=_(0);showSidecar=_(!1);sidecarView=_("permissions");useStreaming=!0;selectedProvider="openai";selectedModel="gpt-4";ngOnInit(){this.messages=this.chatService.getMessages(),this.loadConfiguration(),xt(()=>{let n=this.chatService.getConnectionState()();n==="connected"?console.log("Connected to SignalR hub"):n==="disconnected"&&console.log("Disconnected from SignalR hub")})}ngOnDestroy(){this.streamSubscription&&this.streamSubscription.unsubscribe()}loadConfiguration(){this.chatService.getConfiguration().subscribe({next:n=>{n.defaultProvider&&(this.selectedProvider=n.defaultProvider),n.defaultModel&&(this.selectedModel=n.defaultModel)},error:n=>{console.error("Failed to load configuration:",n)}})}sendMessage(){if(!this.inputMessage.trim()||this.isLoading()||this.isStreaming())return;let n=this.inputMessage.trim(),e={id:crypto.randomUUID(),content:n,role:"user",timestamp:new Date};this.chatService.addMessage(e),this.inputMessage="",this.scrollToBottom();let t={message:n,provider:this.selectedProvider,model:this.selectedModel,stream:this.useStreaming};this.useStreaming?this.sendStreamingMessage(t):this.sendRegularMessage(t)}sendRegularMessage(n){this.isLoading.set(!0),this.chatService.sendMessage(n).subscribe({next:e=>{let t={id:e.id||crypto.randomUUID(),content:e.content,role:"assistant",timestamp:new Date,toolCalls:e.toolCalls,metadata:{usage:e.usage}};this.chatService.addMessage(t),this.isLoading.set(!1),this.scrollToBottom()},error:e=>{this.isLoading.set(!1),this.handleError(e)}})}sendStreamingMessage(n){this.isStreaming.set(!0),this.currentStreamMessage.set("");let e=crypto.randomUUID(),t={id:e,content:"",role:"assistant",timestamp:new Date};this.chatService.addMessage(t);let r="";this.streamSubscription=this.chatService.streamMessage(n).subscribe({next:l=>{r+=l,this.messages.update(f=>f.map(Y=>Y.id===e?v(P({},Y),{content:r}):Y)),this.scrollToBottom()},error:l=>{this.isStreaming.set(!1),this.handleError(l)},complete:()=>{this.isStreaming.set(!1),this.currentStreamMessage.set("")}})}handleError(n){console.error("Chat error:",n);let e="Failed to send message";n.error?.message?e=n.error.message:n.message&&(e=n.message),this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]});let t={id:crypto.randomUUID(),content:`Error: ${e}`,role:"system",timestamp:new Date};this.chatService.addMessage(t),(e.includes("connection")||e.includes("network"))&&setTimeout(()=>{this.chatService.reconnect()},2e3)}scrollToBottom(){setTimeout(()=>{if(this.messagesContainer){let n=this.messagesContainer.nativeElement;n.scrollTop=n.scrollHeight}},100)}handleKeyDown(n){if(n.key==="Enter"){if(n.shiftKey)return;n.preventDefault(),this.sendMessage()}}openSessionPermissions(){this.dialog.open(Ue,{width:"700px",data:{currentSessionPermissions:this.sessionPermissions(),permittedPaths:this.sessionPaths().permitted,blockedPaths:this.sessionPaths().blocked}}).afterClosed().subscribe(e=>{e&&(this.sessionPermissions.set(e.permissions),this.sessionPaths.set(e.paths),this.updateActivePermissionsCount(),this.updateBackendPermissions(),this.snackBar.open("Session permissions updated","Close",{duration:3e3}))})}updateActivePermissionsCount(){let n=this.sessionPermissions().filter(e=>e.granted).length;this.activePermissionsCount.set(n)}updateBackendPermissions(){let n={permissions:this.sessionPermissions().filter(e=>e.granted),paths:this.sessionPaths()};console.log("Updating backend with session permissions:",n)}clearSession(){confirm("This will clear all messages and session permissions. Continue?")&&(this.chatService.clearHistory(),this.messages.set([]),this.sessionPermissions.set([]),this.sessionPaths.set({permitted:[],blocked:[]}),this.activePermissionsCount.set(0),this.updateBackendPermissions(),this.snackBar.open("Session cleared","Close",{duration:2e3,panelClass:["success-snackbar"]}))}hasActivePermissions(){return this.activePermissionsCount()>0}toggleSidecar(n){this.showSidecar()&&this.sidecarView()===n?this.showSidecar.set(!1):(this.sidecarView.set(n),this.showSidecar.set(!0))}closeSidecar(){this.showSidecar.set(!1)}getSidecarTitle(){switch(this.sidecarView()){case"permissions":return"Session Permissions";case"context":return"Context & Files";case"history":return"Chat History";case"tools":return"Available Tools";default:return""}}onPermissionsChanged(n){this.sessionPermissions.set(n),this.updateActivePermissionsCount(),this.updateBackendPermissions()}onPathsChanged(n){this.sessionPaths.set(n),this.updateBackendPermissions()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-chat-container"]],viewQuery:function(e,t){if(e&1&&Ct(Pi,5),e&2){let r;Pt(r=vt())&&(t.messagesContainer=r.first)}},decls:40,vars:20,consts:[["messagesContainer",""],[1,"chat-layout"],[1,"chat-container"],[1,"chat-header"],[1,"header-left"],[1,"session-info"],[1,"permissions-chip"],[1,"header-actions"],["mat-icon-button","","matBadgeColor","accent","matBadgeSize","small","matTooltip","Session Permissions",3,"click","matBadge","matBadgeHidden"],["mat-icon-button","","matTooltip","Context & Files",3,"click"],["mat-icon-button","","matTooltip","Chat History",3,"click"],["mat-icon-button","","matTooltip","Available Tools",3,"click"],[3,"vertical"],["mat-icon-button","","matTooltip","Clear Session",3,"click"],[1,"messages-container"],[1,"welcome-message"],[1,"messages-list"],[1,"message",3,"user","assistant"],[1,"message","assistant"],[1,"input-container"],[1,"input-wrapper"],["placeholder","Type your message... (Enter to send, Shift+Enter for new line)","rows","1",1,"message-input",3,"ngModelChange","keydown","ngModel","disabled"],["mat-icon-button","",1,"send-button",3,"click","disabled"],["class","chat-sidecar",4,"ngIf"],[1,"welcome-icon"],[1,"message"],[1,"message-bubble"],[1,"message-avatar"],[1,"message-content"],[1,"typing-indicator"],[1,"chat-sidecar"],[1,"sidecar-header"],["mat-icon-button","",3,"click"],[1,"sidecar-content"],[3,"permissions","paths"],[3,"permissionsChanged","pathsChanged","permissions","paths"]],template:function(e,t){if(e&1){let r=b();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),a(5,"AI Assistant"),o(),i(6,"div",5),M(7,Mi,4,1,"mat-chip",6),o()(),i(8,"div",7)(9,"button",8),m("click",function(){return g(r),h(t.toggleSidecar("permissions"))}),i(10,"mat-icon"),a(11,"security"),o()(),i(12,"button",9),m("click",function(){return g(r),h(t.toggleSidecar("context"))}),i(13,"mat-icon"),a(14,"folder_open"),o()(),i(15,"button",10),m("click",function(){return g(r),h(t.toggleSidecar("history"))}),i(16,"mat-icon"),a(17,"history"),o()(),i(18,"button",11),m("click",function(){return g(r),h(t.toggleSidecar("tools"))}),i(19,"mat-icon"),a(20,"build"),o()(),w(21,"mat-divider",12),i(22,"button",13),m("click",function(){return g(r),h(t.clearSession())}),i(23,"mat-icon"),a(24,"clear_all"),o()()()(),i(25,"div",14,0),M(27,xi,7,0,"div",15),i(28,"div",16),y(29,bi,6,6,"div",17,vi),M(31,Oi,8,0,"div",18),o()(),i(32,"div",19)(33,"div",20)(34,"textarea",21),q("ngModelChange",function(f){return g(r),W(t.inputMessage,f)||(t.inputMessage=f),h(f)}),m("keydown",function(f){return g(r),h(t.handleKeyDown(f))}),a(35,"      "),o(),i(36,"button",22),m("click",function(){return g(r),h(t.sendMessage())}),i(37,"mat-icon"),a(38,"send"),o()()()()(),Me(39,Ti,12,3,"div",23),o()}e&2&&(c(),C("with-sidecar",t.showSidecar()),c(6),x(t.hasActivePermissions()?7:-1),c(2),C("active",t.showSidecar()&&t.sidecarView()==="permissions"),u("matBadge",t.activePermissionsCount())("matBadgeHidden",!t.hasActivePermissions()),c(3),C("active",t.showSidecar()&&t.sidecarView()==="context"),c(3),C("active",t.showSidecar()&&t.sidecarView()==="history"),c(3),C("active",t.showSidecar()&&t.sidecarView()==="tools"),c(3),u("vertical",!0),c(6),x(t.messages().length===0?27:-1),c(2),S(t.messages()),c(2),x(t.isLoading()?31:-1),c(3),U("ngModel",t.inputMessage),u("disabled",t.isLoading()),c(2),u("disabled",!t.inputMessage.trim()||t.isLoading()),c(3),u("ngIf",t.showSidecar()))},dependencies:[z,bt,L,Z,X,ee,Ot,It,te,ne,$,R,N,V,ce,G,K,Le,Ve,H,j,ge,He,B,A,Q,ie,We,Ke,Ye,Je],styles:[".chat-layout[_ngcontent-%COMP%]{height:100%;display:flex;position:relative}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:var(--app-background);transition:margin-right .3s ease-in-out}.chat-container.with-sidecar[_ngcontent-%COMP%]{margin-right:400px}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg) var(--spacing-xl);background-color:var(--app-surface);border-bottom:1px solid var(--app-divider);box-shadow:0 2px 4px #0000000d;z-index:2}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:400;color:var(--app-text-primary)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .permissions-chip[_ngcontent-%COMP%]{height:28px;font-size:12px;background-color:var(--app-success-light);color:var(--success-color)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .permissions-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{height:24px;margin:0 var(--spacing-sm)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--primary-color);background-color:var(--app-selected)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-mdc-button-persistent-ripple{border-radius:50%}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-badge-content{font-size:10px;line-height:14px;font-weight:600}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--spacing-lg) 0;scroll-behavior:smooth}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}.welcome-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;padding:var(--spacing-xl)}.welcome-message[_ngcontent-%COMP%]   .welcome-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:var(--primary-color);opacity:.8;margin-bottom:var(--spacing-lg)}.welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--spacing-sm) 0;color:var(--app-text-primary);font-weight:400}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--app-text-secondary);margin:0}.messages-list[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 var(--spacing-lg)}.message[_ngcontent-%COMP%]{display:flex;margin-bottom:var(--spacing-lg)}.message.user[_ngcontent-%COMP%]{justify-content:flex-end}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{flex-direction:row-reverse}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{margin-left:var(--spacing-md);margin-right:0;background-color:var(--primary-color);color:#fff}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;border-radius:18px 18px 4px}.message.assistant[_ngcontent-%COMP%]{justify-content:flex-start}.message.assistant[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{background-color:var(--app-surface);color:var(--primary-color);border:1px solid var(--app-divider)}.message.assistant[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:var(--app-surface);color:var(--app-text-primary);border-radius:18px 18px 18px 4px;box-shadow:0 1px 2px #0000000d}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{display:flex;align-items:flex-start;max-width:70%}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;margin-right:var(--spacing-md);flex-shrink:0}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);white-space:pre-wrap;word-wrap:break-word;line-height:1.5}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--spacing-sm) var(--spacing-md)}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:8px;height:8px;border-radius:50%;background-color:var(--app-text-secondary);margin:0 2px;animation:_ngcontent-%COMP%_typing 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{transform:translateY(0);opacity:.5}30%{transform:translateY(-10px);opacity:1}}.input-container[_ngcontent-%COMP%]{background-color:var(--app-surface);border-top:1px solid var(--app-divider);box-shadow:0 -2px 10px #0000000d;z-index:2}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:var(--spacing-md) var(--spacing-lg);position:relative;display:flex;align-items:flex-end}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-md) 60px var(--spacing-md) var(--spacing-md);border:none;outline:none;background-color:var(--app-background);border-radius:24px;resize:none;font-family:inherit;font-size:15px;line-height:1.5;color:var(--app-text-primary);min-height:48px;max-height:120px;overflow-y:auto;transition:box-shadow var(--transition-fast)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px var(--app-focus)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::placeholder{color:var(--app-text-secondary)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:2px}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{position:absolute;right:calc(var(--spacing-lg) + 4px);bottom:calc(var(--spacing-md) + 4px);width:40px;height:40px;background-color:var(--primary-color);color:#fff;transition:all var(--transition-fast)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05);box-shadow:0 2px 8px #2196f34d}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{background-color:var(--app-divider);color:var(--app-text-disabled);cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-sidecar[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;width:400px;background-color:var(--app-surface);border-left:1px solid var(--app-divider);box-shadow:-2px 0 8px #0000001a;display:flex;flex-direction:column;z-index:10}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--app-divider);background-color:var(--app-surface)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:var(--app-text-primary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-panel[_ngcontent-%COMP%], .chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .history-panel[_ngcontent-%COMP%], .chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]{padding:var(--spacing-md)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--spacing-md) 0;font-size:14px;font-weight:500;color:var(--app-text-secondary);text-transform:uppercase}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{cursor:pointer}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemTitle][_ngcontent-%COMP%]{font-size:14px;color:var(--app-text-primary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine][_ngcontent-%COMP%]{font-size:12px;color:var(--app-text-secondary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:14px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-nav-list[dense][_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:36px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-nav-list[dense][_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-nav-list[dense][_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}@media (max-width: 1200px){.chat-sidecar[_ngcontent-%COMP%]{width:350px}.chat-container.with-sidecar[_ngcontent-%COMP%]{margin-right:350px}}@media (max-width: 768px){.chat-header[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-lg)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.messages-list[_ngcontent-%COMP%]{padding:0 var(--spacing-md)}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{max-width:85%}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md)}.chat-sidecar[_ngcontent-%COMP%]{width:100%;position:fixed}.chat-container.with-sidecar[_ngcontent-%COMP%]{margin-right:0}}"],data:{animation:[tt("slideIn",[ye("false",Oe({transform:"translateX(100%)",opacity:0})),ye("true",Oe({transform:"translateX(0)",opacity:1})),it("false <=> true",nt("300ms ease-in-out"))])]}})};export{mn as ChatContainer};
