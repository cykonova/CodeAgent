import{c as zt,d as Bt,f as Qe,g as qe,h as Lt}from"./chunk-WRWXI3SN.js";import{a as Bn,b as Ln,c as Nn,e as Rn,f as Hn,g as Vn,h as jn,i as $n,j as Gn,k as Un}from"./chunk-DUVQIED6.js";import{a as ct,b as ye,c as zn,e as lt,f as dt,g as Yn}from"./chunk-U2ZZJ7TC.js";import{A as An,B as we,C as Se,D as ke,E as Wn,F as Qn,G as qn,H as Kn,d as ot,g as bn,h as On,k as be,l as yn,m as wn,n as at,o as Q,p as st,q as Oe,r as B,s as rt,t as Sn,u as kn,v as En,w as Tn,x as In,y as Dn,z as Fn}from"./chunk-HQQI3ZYA.js";import{f as Pn,i as Mn,j as vn,v as W,w as H}from"./chunk-XXLKNB3G.js";import{Aa as N,C as pn,E as Ke,F as gn,Fa as Xe,Ga as Je,Ha as et,Ja as tt,K as hn,Ka as nt,La as it,Ma as de,N as _n,Na as D,O as ue,Oa as I,P as un,Qa as R,R as fn,Ra as ve,Sa as z,W as Cn,Z as ze,d as dn,ea as Ye,f as mn,g as T,ha as xn,ia as U,j as ie,ja as L,k as At,ka as Ze,l as We,na as re,ra as ce,ua as le}from"./chunk-LNMPOUJZ.js";import{$b as ne,Aa as He,Ab as u,Ac as cn,B as Ut,Ba as Yt,Bb as en,C as De,Cb as j,Da as Ae,Db as O,E as $,Ea as Zt,Eb as y,Fb as g,Fc as Ue,Gb as o,Hb as a,Ib as k,Ic as q,J as Wt,Jb as Ge,Jc as ln,Kb as It,Lb as tn,Pb as S,R as Fe,Tb as m,Vb as d,W as kt,Wb as Dt,Xb as he,Ya as c,Yb as Ft,Zb as _e,_ as G,_a as Xt,_b as te,a as v,ab as Ve,b,ba as Qt,bb as Et,ca as fe,db as Jt,dc as nn,ea as Ce,ec as on,f as Ne,fa as qt,fc as x,ga as C,hc as r,ib as E,ic as p,jb as xe,jc as w,k as Ie,kb as K,kc as A,l as jt,la as P,lc as Y,m as $t,ma as M,mb as Tt,mc as Z,na as Kt,nc as X,ob as Pe,p as Gt,pc as Me,qa as Re,rb as F,rc as an,sb as je,sc as sn,wa as f,yb as $e,zb as _,zc as rn}from"./chunk-V56RWINO.js";var Zn="mat-badge-content",ci=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,s){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return i})(),mt=(()=>{class i{_ngZone=C(je);_elementRef=C(Ae);_ariaDescriber=C(Cn);_renderer=C(Ve);_animationsDisabled=Ye();_idGenerator=C(ue);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=C(hn);_document=C(Re);constructor(){let e=C(Ke);e.load(ci),e.load(gn)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),t="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(Zn),this._animationsDisabled&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&!this._animationsDisabled?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(t)})}):e.classList.add(t),e}_updateRenderedContent(e){let t=`${e??""}`.trim();this._isInitialized&&t&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=t),this._content=t}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let t=this._elementRef.nativeElement.classList;t.remove(`mat-badge-${this._color}`),e&&t.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${Zn}`);for(let t of Array.from(e))t!==this._badgeElement&&t.remove()}static \u0275fac=function(t){return new(t||i)};static \u0275dir=K({type:i,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,s){t&2&&x("mat-badge-overlap",s.overlap)("mat-badge-above",s.isAbove())("mat-badge-below",!s.isAbove())("mat-badge-before",!s.isAfter())("mat-badge-after",s.isAfter())("mat-badge-small",s.size==="small")("mat-badge-medium",s.size==="medium")("mat-badge-large",s.size==="large")("mat-badge-hidden",s.hidden||!s.content)("mat-badge-disabled",s.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",q],disabled:[2,"matBadgeDisabled","disabled",q],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",q]}})}return i})(),me=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=xe({type:i});static \u0275inj=fe({imports:[_n,ze,ze]})}return i})();var li=(i,n)=>n.id;function di(i,n){if(i&1&&(o(0,"span",2),r(1),a()),i&2){let e=d();c(),p(e.subtitle)}}function mi(i,n){if(i&1&&(o(0,"mat-chip",4)(1,"mat-icon"),r(2,"security"),a(),r(3),a()),i&2){let e=d();c(3),w(" ",e.permissionsCount," permissions active ")}}function pi(i,n){if(i&1){let e=S();o(0,"button",9),m("click",function(){let s=P(e).$implicit,l=d();return M(l.onActionClick(s.id))}),o(1,"mat-icon"),r(2),a()()}if(i&2){let e=n.$implicit;x("active",e.active),g("matBadge",e.badge)("matBadgeHidden",!e.badge||e.badge===0)("matTooltip",e.tooltip),c(2),p(e.icon)}}function gi(i,n){i&1&&k(0,"mat-divider",7),i&2&&g("vertical",!0)}var pt=class i{title="AI Assistant";subtitle;actions=[];showPermissionsBadge=!1;permissionsCount=0;actionClick=new F;clearSession=new F;onActionClick(n){this.actionClick.emit(n)}onClearSession(){this.clearSession.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-chat-header"]],inputs:{title:"title",subtitle:"subtitle",actions:"actions",showPermissionsBadge:"showPermissionsBadge",permissionsCount:"permissionsCount"},outputs:{actionClick:"actionClick",clearSession:"clearSession"},decls:14,vars:4,consts:[[1,"chat-header"],[1,"header-left"],[1,"subtitle"],[1,"session-info"],[1,"permissions-chip"],[1,"header-actions"],["mat-icon-button","","matBadgeColor","accent","matBadgeSize","small",3,"active","matBadge","matBadgeHidden","matTooltip"],[3,"vertical"],["mat-icon-button","","matTooltip","Clear Session",3,"click"],["mat-icon-button","","matBadgeColor","accent","matBadgeSize","small",3,"click","matBadge","matBadgeHidden","matTooltip"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),r(3),a(),_(4,di,2,1,"span",2),o(5,"div",3),_(6,mi,4,1,"mat-chip",4),a()(),o(7,"div",5),O(8,pi,3,6,"button",6,li),_(10,gi,1,1,"mat-divider",7),o(11,"button",8),m("click",function(){return t.onClearSession()}),o(12,"mat-icon"),r(13,"clear_all"),a()()()()),e&2&&(c(3),p(t.title),c(),u(t.subtitle?4:-1),c(2),u(t.showPermissionsBadge&&t.permissionsCount>0?6:-1),c(2),y(t.actions),c(2),u(t.actions.length>0?10:-1))},dependencies:[T,I,D,z,R,me,mt,B,Q,H,W,L,U],styles:[".chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;background-color:var(--mat-surface);border-bottom:1px solid var(--mat-divider)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--mat-secondary-text);font-size:14px}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .permissions-chip[_ngcontent-%COMP%]{font-size:12px;height:24px}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .permissions-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:4px}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:rgba(var(--mat-primary-rgb),.12)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{height:24px;margin:0 8px}"]})};var Nt=new Ce("CdkAccordion"),Jn=(()=>{class i{_stateChanges=new Ie;_openCloseAllActions=new Ie;id=C(ue).getId("cdk-accordion-");multi=!1;openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static \u0275fac=function(t){return new(t||i)};static \u0275dir=K({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",q]},exportAs:["cdkAccordion"],features:[Me([{provide:Nt,useExisting:i}]),He]})}return i})(),ei=(()=>{class i{accordion=C(Nt,{optional:!0,skipSelf:!0});_changeDetectorRef=C(Ue);_expansionDispatcher=C(Ze);_openCloseAllSubscription=Ne.EMPTY;closed=new F;opened=new F;destroyed=new F;expandedChange=new F;id=C(ue).getId("cdk-accordion-child-");get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let t=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,t)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}_expanded=!1;get disabled(){return this._disabled()}set disabled(e){this._disabled.set(e)}_disabled=f(!1);_removeUniqueSelectionListener=()=>{};constructor(){}ngOnInit(){this._removeUniqueSelectionListener=this._expansionDispatcher.listen((e,t)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===t&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=K({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",q],disabled:[2,"disabled","disabled",q]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Me([{provide:Nt,useValue:void 0}])]})}return i})(),ti=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=xe({type:i});static \u0275inj=fe({})}return i})();var ui=["body"],fi=["bodyWrapper"],Ci=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],xi=["mat-expansion-panel-header","*","mat-action-row"];function Pi(i,n){}var Mi=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],vi=["mat-panel-title","mat-panel-description","*"];function bi(i,n){i&1&&(Ge(0,"span",1),Kt(),Ge(1,"svg",2),tn(2,"path",3),It()())}var Rt=new Ce("MAT_ACCORDION"),ni=new Ce("MAT_EXPANSION_PANEL"),Oi=(()=>{class i{_template=C(Xt);_expansionPanel=C(ni,{optional:!0});constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275dir=K({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]})}return i})(),ii=new Ce("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),ae=(()=>{class i extends ei{_viewContainerRef=C(Jt);_animationsDisabled=Ye();_document=C(Re);_ngZone=C(je);_elementRef=C(Ae);_renderer=C(Ve);_cleanupTransitionEnd;get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}_hideToggle=!1;get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_togglePosition;afterExpand=new F;afterCollapse=new F;_inputChanges=new Ie;accordion=C(Rt,{optional:!0,skipSelf:!0});_lazyContent;_body;_bodyWrapper;_portal;_headerId=C(ue).getId("mat-expansion-panel-header-");constructor(){super();let e=C(ii,{optional:!0});this._expansionDispatcher=C(Ze),e&&(this.hideToggle=e.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(kt(null),De(()=>this.expanded&&!this._portal),Wt(1)).subscribe(()=>{this._portal=new Pn(this._lazyContent._template,this._viewContainerRef)}),this._setupAnimationEvents()}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransitionEnd?.(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}_transitionEndListener=({target:e,propertyName:t})=>{e===this._bodyWrapper?.nativeElement&&t==="grid-template-rows"&&this._ngZone.run(()=>{this.expanded?this.afterExpand.emit():this.afterCollapse.emit()})};_setupAnimationEvents(){this._ngZone.runOutsideAngular(()=>{this._animationsDisabled?(this.opened.subscribe(()=>this._ngZone.run(()=>this.afterExpand.emit())),this.closed.subscribe(()=>this._ngZone.run(()=>this.afterCollapse.emit()))):setTimeout(()=>{let e=this._elementRef.nativeElement;this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this._transitionEndListener),e.classList.add("mat-expansion-panel-animations-enabled")},200)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(t,s,l){if(t&1&&Ft(l,Oi,5),t&2){let h;te(h=ne())&&(s._lazyContent=h.first)}},viewQuery:function(t,s){if(t&1&&(_e(ui,5),_e(fi,5)),t&2){let l;te(l=ne())&&(s._body=l.first),te(l=ne())&&(s._bodyWrapper=l.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:4,hostBindings:function(t,s){t&2&&x("mat-expanded",s.expanded)("mat-expansion-panel-spacing",s._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",q],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Me([{provide:Rt,useValue:void 0},{provide:ni,useExisting:i}]),Tt,He],ngContentSelectors:xi,decls:9,vars:4,consts:[["bodyWrapper",""],["body",""],[1,"mat-expansion-panel-content-wrapper"],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,s){t&1&&(Dt(Ci),he(0),o(1,"div",2,0)(3,"div",3,1)(5,"div",4),he(6,1),Pe(7,Pi,0,0,"ng-template",5),a(),he(8,2),a()()),t&2&&(c(),$e("inert",s.expanded?null:""),c(2),g("id",s.id),$e("aria-labelledby",s._headerId),c(4),g("cdkPortalOutlet",s._portal))},dependencies:[Mn],styles:[`.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;position:relative;background:var(--mat-expansion-container-background-color, var(--mat-sys-surface));color:var(--mat-expansion-container-text-color, var(--mat-sys-on-surface));border-radius:var(--mat-expansion-container-shape, 12px)}.mat-expansion-panel.mat-expansion-panel-animations-enabled{transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:var(--mat-expansion-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape, 12px);border-top-left-radius:var(--mat-expansion-container-shape, 12px)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape, 12px);border-bottom-left-radius:var(--mat-expansion-container-shape, 12px)}@media(forced-colors: active){.mat-expansion-panel{outline:solid 1px}}.mat-expansion-panel-content-wrapper{display:grid;grid-template-rows:0fr;grid-template-columns:100%}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content-wrapper{transition:grid-template-rows 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{grid-template-rows:1fr}@supports not (grid-template-rows: 0fr){.mat-expansion-panel-content-wrapper{height:0}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{height:auto}}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;min-height:0;visibility:hidden;font-family:var(--mat-expansion-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-sys-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-sys-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-sys-body-large-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content{transition:visibility 190ms linear}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper>.mat-expansion-panel-content{visibility:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-sys-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}
`],encapsulation:2,changeDetection:0})}return i})();var se=(()=>{class i{panel=C(ae,{host:!0});_element=C(Ae);_focusMonitor=C(pn);_changeDetectorRef=C(Ue);_parentChangeSubscription=Ne.EMPTY;constructor(){C(Ke).load(xn);let e=this.panel,t=C(ii,{optional:!0}),s=C(new cn("tabindex"),{optional:!0}),l=e.accordion?e.accordion._stateChanges.pipe(De(h=>!!(h.hideToggle||h.togglePosition))):$t;this.tabIndex=parseInt(s||"")||0,this._parentChangeSubscription=Ut(e.opened,e.closed,l,e._inputChanges.pipe(De(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(De(()=>e._containsFocus())).subscribe(()=>this._focusMonitor.focusVia(this._element,"program")),t&&(this.expandedHeight=t.expandedHeight,this.collapsedHeight=t.collapsedHeight)}expandedHeight;collapsedHeight;tabIndex=0;get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:un(e)||(e.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e);return}}focus(e,t){e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:13,hostBindings:function(t,s){t&1&&m("click",function(){return s._toggle()})("keydown",function(h){return s._keydown(h)}),t&2&&($e("id",s.panel._headerId)("tabindex",s.disabled?-1:s.tabIndex)("aria-controls",s._getPanelId())("aria-expanded",s._isExpanded())("aria-disabled",s.panel.disabled),on("height",s._getHeaderHeight()),x("mat-expanded",s._isExpanded())("mat-expansion-toggle-indicator-after",s._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",s._getTogglePosition()==="before"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ln(e)]},ngContentSelectors:vi,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(t,s){t&1&&(Dt(Mi),Ge(0,"span",0),he(1),he(2,1),he(3,2),It(),_(4,bi,3,0,"span",1)),t&2&&(x("mat-content-hide-toggle",!s._showToggle()),c(4),u(s._showToggle()?4:-1))},styles:[`.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;height:var(--mat-expansion-header-collapsed-state-height, 48px);font-family:var(--mat-expansion-header-text-font, var(--mat-sys-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-sys-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-sys-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-sys-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-sys-title-medium-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-header{transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header::before{border-radius:inherit}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height, 64px)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-sys-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-sys-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-sys-on-surface-variant))}.mat-expansion-panel-animations-enabled .mat-expansion-indicator{transition:transform 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header.mat-expanded .mat-expansion-indicator{transform:rotate(180deg)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-sys-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, none)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-sys-on-surface-variant));display:var(--mat-expansion-header-indicator-display, inline-block)}@media(forced-colors: active){.mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}}
`],encapsulation:2,changeDetection:0})}return i})(),gt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=K({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]})}return i})(),pe=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=K({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]})}return i})(),ht=(()=>{class i extends Jn{_keyManager;_ownHeaders=new Zt;_headers;hideToggle=!1;displayMode="default";togglePosition="after";ngAfterContentInit(){this._headers.changes.pipe(kt(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(t=>t.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new fn(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static \u0275fac=(()=>{let e;return function(s){return(e||(e=Yt(i)))(s||i)}})();static \u0275dir=K({type:i,selectors:[["mat-accordion"]],contentQueries:function(t,s,l){if(t&1&&Ft(l,se,5),t&2){let h;te(h=ne())&&(s._headers=h)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,s){t&2&&x("mat-accordion-multi",s.multi)},inputs:{hideToggle:[2,"hideToggle","hideToggle",q],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[Me([{provide:Rt,useExisting:i}]),Tt]})}return i})(),ge=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=xe({type:i});static \u0275inj=fe({imports:[ze,ti,vn]})}return i})();var yi=(i,n)=>n.key;function wi(i,n){if(i&1&&(o(0,"div",0),r(1),a()),i&2){let e=d();c(),w(" ",e.getMessageContent()," ")}}function Si(i,n){if(i&1&&(o(0,"div",9)(1,"span",10),r(2),a(),o(3,"span",11),r(4),a()()),i&2){let e=n.$implicit;c(2),w("",e.key,":"),c(2),p(e.value)}}function ki(i,n){if(i&1&&(o(0,"mat-expansion-panel",6)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"settings"),a(),r(5," Parameters "),a()(),o(6,"div",8),O(7,Si,5,2,"div",9,yi),a()()),i&2){let e=d(2);c(7),y(e.getParametersList())}}function Ei(i,n){if(i&1&&(o(0,"mat-expansion-panel",7)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"check_circle"),a(),r(5," Result "),a()(),o(6,"div",12),r(7),a()()),i&2){let e=d(2);c(7),w(" ",e.formatResult()," ")}}function Ti(i,n){if(i&1&&(o(0,"div",1)(1,"div",2)(2,"mat-chip",3)(3,"mat-icon",4),r(4),a(),o(5,"span",5),r(6),a()()(),_(7,ki,9,0,"mat-expansion-panel",6),_(8,Ei,8,1,"mat-expansion-panel",7),a()),i&2){let e=d();c(4),p(e.toolIcon),c(2),p(e.toolCall.name),c(),u(e.toolCall.arguments&&e.objectKeys(e.toolCall.arguments).length>0?7:-1),c(),u(e.toolCall.result?8:-1)}}var ut=class i{toolCall;objectKeys=Object.keys;get isRespondToUser(){return this.toolCall.name==="respond_to_user"}get toolIcon(){let n={respond_to_user:"chat_bubble",search:"search",read_file:"description",write_file:"edit_note",execute_command:"terminal",browse_web:"public",analyze_code:"code",default:"build"};return n[this.toolCall.name]||n.default}getParametersList(){if(!this.toolCall.arguments)return[];let n=[],e=this.toolCall.arguments||this.toolCall.parameters;if(e&&typeof e=="object")for(let[t,s]of Object.entries(e)){let l="";s==null?l="null":typeof s=="object"?Array.isArray(s)?l=`[${s.length} items]`:l=`{${Object.keys(s).length} properties}`:l=String(s),n.push({key:t,value:l})}return n}formatResult(){return this.toolCall.result?typeof this.toolCall.result=="string"?this.toolCall.result:this.toolCall.result.message?this.toolCall.result.message:this.toolCall.result.content?this.toolCall.result.content:typeof this.toolCall.result=="object"?"Completed successfully":String(this.toolCall.result):""}getMessageContent(){return this.toolCall.arguments?.message?this.toolCall.arguments.message:this.toolCall.parameters?.message?this.toolCall.parameters.message:""}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-tool-call"]],inputs:{toolCall:"toolCall"},decls:2,vars:1,consts:[[1,"message-text"],[1,"tool-call-container"],[1,"tool-header"],[1,"tool-chip"],[1,"tool-icon"],[1,"tool-name"],[1,"arguments-panel"],[1,"result-panel"],[1,"parameters-list"],[1,"parameter-item"],[1,"param-key"],[1,"param-value"],[1,"result-content"]],template:function(e,t){e&1&&_(0,wi,2,1,"div",0)(1,Ti,9,4,"div",1),e&2&&u(t.isRespondToUser?0:1)},dependencies:[T,I,D,B,Q,ge,ae,se,pe],styles:['.message-text[_ngcontent-%COMP%]{color:inherit;font-size:inherit;line-height:1.5;white-space:pre-wrap;word-wrap:break-word}.tool-call-container[_ngcontent-%COMP%]{margin:8px 0;border:1px solid var(--mat-divider-color);border-radius:8px;overflow:hidden}.tool-call-container[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]{padding:8px 12px;background-color:#00000005}.dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]{background-color:#ffffff05}.tool-call-container[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-chip[_ngcontent-%COMP%]{background-color:#2196f31a;border:1px solid rgba(33,150,243,.3);color:#1976d2}.dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-chip[_ngcontent-%COMP%]{background-color:#64b5f61a;border-color:#64b5f64d;color:#64b5f6}.tool-call-container[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-chip[_ngcontent-%COMP%]   .tool-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:6px;vertical-align:middle}.tool-call-container[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-chip[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:13px;font-weight:500;vertical-align:middle}.tool-call-container[_ngcontent-%COMP%]   .arguments-panel[_ngcontent-%COMP%], .tool-call-container[_ngcontent-%COMP%]   .result-panel[_ngcontent-%COMP%]{border-top:1px solid var(--mat-divider-color)}.tool-call-container[_ngcontent-%COMP%]   .arguments-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%], .tool-call-container[_ngcontent-%COMP%]   .result-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:40px;min-height:40px;padding:0 16px;background-color:transparent}.tool-call-container[_ngcontent-%COMP%]   .arguments-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%], .tool-call-container[_ngcontent-%COMP%]   .result-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#666}.dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .arguments-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .result-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{color:#aaa}.tool-call-container[_ngcontent-%COMP%]   .arguments-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .tool-call-container[_ngcontent-%COMP%]   .result-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.tool-call-container[_ngcontent-%COMP%]   .arguments-panel.mat-expanded[_ngcontent-%COMP%], .tool-call-container[_ngcontent-%COMP%]   .result-panel.mat-expanded[_ngcontent-%COMP%]{margin:0!important}.tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]{padding:12px 16px}.tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]{display:flex;margin-bottom:8px;font-size:13px}.tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]   .param-key[_ngcontent-%COMP%]{font-weight:500;color:#666;margin-right:8px;min-width:100px}.dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]   .param-key[_ngcontent-%COMP%]{color:#aaa}.tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]   .param-key[_ngcontent-%COMP%]:after{content:":"}.tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]   .param-value[_ngcontent-%COMP%]{color:#333;word-break:break-word;flex:1;font-family:Roboto Mono,monospace}.dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .parameters-list[_ngcontent-%COMP%]   .parameter-item[_ngcontent-%COMP%]   .param-value[_ngcontent-%COMP%]{color:#ddd}.tool-call-container[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]{padding:12px 16px;font-size:13px;line-height:1.5;color:#333;font-family:Roboto Mono,monospace}.dark-theme[_ngcontent-%COMP%]   .tool-call-container[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]{color:#ddd}']})};function Di(i,n){if(i&1&&k(0,"app-tool-call",6),i&2){let e=n.$implicit;g("toolCall",e)}}function Fi(i,n){if(i&1&&(o(0,"div",4),O(1,Di,1,1,"app-tool-call",6,en),a()),i&2){let e=d();c(),y(e.message.toolCalls)}}function Ai(i,n){if(i&1&&(o(0,"div",7),r(1),a()),i&2){let e=d(2);c(),p(e.message.content)}}function zi(i,n){if(i&1&&_(0,Ai,2,1,"div",7),i&2){let e=d();u(!e.message.toolCalls||e.message.toolCalls.length===0?0:-1)}}function Bi(i,n){if(i&1&&(o(0,"div",5),r(1),an(2,"date"),a()),i&2){let e=d();c(),p(sn(2,1,e.message.timestamp,"short"))}}var ft=class i{message;getIcon(){return this.message.role==="user"?"person":"assistant"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-message"]],inputs:{message:"message"},decls:8,vars:8,consts:[[1,"message"],[1,"message-bubble"],[1,"message-avatar"],[1,"message-content"],[1,"tool-calls-section"],[1,"message-timestamp"],[3,"toolCall"],[1,"text-content"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-icon",2),r(3),a(),o(4,"div",3),_(5,Fi,3,0,"div",4),_(6,zi,1,1),a(),_(7,Bi,3,4,"div",5),a()()),e&2&&(x("user",t.message.role==="user")("assistant",t.message.role==="assistant"),c(3),p(t.getIcon()),c(2),u(t.message.toolCalls&&t.message.toolCalls.length>0?5:-1),c(),u(t.message.content?6:-1),c(),u(t.message.timestamp?7:-1))},dependencies:[T,I,D,ut,mn],styles:[".message[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.message.user[_ngcontent-%COMP%]{justify-content:flex-end}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background-color:var(--mat-primary);color:#fff}.message.assistant[_ngcontent-%COMP%]{justify-content:flex-start}.message.assistant[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background-color:var(--mat-surface);border:1px solid var(--mat-divider)}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{max-width:70%;padding:12px 16px;border-radius:16px;display:flex;align-items:flex-start;gap:8px}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;flex-shrink:0}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{flex:1;word-wrap:break-word}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .tool-calls-section[_ngcontent-%COMP%]{margin-bottom:8px}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]{white-space:pre-wrap}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-timestamp[_ngcontent-%COMP%]{font-size:11px;opacity:.7;margin-top:4px}"]})};var Li=["messagesContainer"],Ni=(i,n)=>n.id;function Ri(i,n){i&1&&(o(0,"div",2)(1,"mat-icon",6),r(2,"assistant"),a(),o(3,"h2"),r(4,"Welcome to CodeAgent"),a(),o(5,"p"),r(6,"How can I help you today?"),a()())}function Hi(i,n){if(i&1&&k(0,"app-message",4),i&2){let e=n.$implicit;g("message",e)}}function Vi(i,n){i&1&&(o(0,"div",5)(1,"div",7)(2,"mat-icon",8),r(3,"assistant"),a(),o(4,"div",9),k(5,"span")(6,"span")(7,"span"),a()()())}var Ct=class i{messages=[];isLoading=!1;showWelcome=!0;messagesContainer;ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){if(this.messagesContainer)try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch{}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-messages-list"]],viewQuery:function(e,t){if(e&1&&_e(Li,5),e&2){let s;te(s=ne())&&(t.messagesContainer=s.first)}},inputs:{messages:"messages",isLoading:"isLoading",showWelcome:"showWelcome"},decls:7,vars:2,consts:[["messagesContainer",""],[1,"messages-container"],[1,"welcome-message"],[1,"messages-list"],[3,"message"],[1,"message","assistant"],[1,"welcome-icon"],[1,"message-bubble"],[1,"message-avatar"],[1,"typing-indicator"]],template:function(e,t){e&1&&(o(0,"div",1,0),_(2,Ri,7,0,"div",2),o(3,"div",3),O(4,Hi,1,1,"app-message",4,Ni),_(6,Vi,8,0,"div",5),a()()),e&2&&(c(2),u(t.showWelcome&&t.messages.length===0?2:-1),c(2),y(t.messages),c(2),u(t.isLoading?6:-1))},dependencies:[T,ft,ye,I,D],styles:[".messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px}.messages-container[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;color:var(--mat-secondary-text)}.messages-container[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   .welcome-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.messages-container[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:400}.messages-container[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.messages-container[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]{min-height:100%;display:flex;flex-direction:column}.messages-container[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.messages-container[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;background-color:var(--mat-secondary-text);border-radius:50%;animation:_ngcontent-%COMP%_typing 1.4s infinite}.messages-container[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.messages-container[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{transform:translateY(0);opacity:.5}30%{transform:translateY(-10px);opacity:1}}"]})};var xt=class i{disabled=!1;placeholder="Type your message... (Enter to send, Shift+Enter for new line)";messageSent=new F;inputMessage="";handleKeyDown(n){n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),this.sendMessage())}sendMessage(){this.inputMessage.trim()&&!this.disabled&&(this.messageSent.emit(this.inputMessage),this.inputMessage="")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-chat-input"]],inputs:{disabled:"disabled",placeholder:"placeholder"},outputs:{messageSent:"messageSent"},decls:7,vars:4,consts:[[1,"input-container"],[1,"input-wrapper"],["rows","1",1,"message-input",3,"ngModelChange","keydown","ngModel","placeholder","disabled"],["mat-icon-button","",1,"send-button",3,"click","disabled"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"textarea",2),X("ngModelChange",function(l){return Z(t.inputMessage,l)||(t.inputMessage=l),l}),m("keydown",function(l){return t.handleKeyDown(l)}),r(3,"    "),a(),o(4,"button",3),m("click",function(){return t.sendMessage()}),o(5,"mat-icon"),r(6,"send"),a()()()()),e&2&&(c(2),Y("ngModel",t.inputMessage),g("placeholder",t.placeholder)("disabled",t.disabled),c(2),g("disabled",!t.inputMessage.trim()||t.disabled))},dependencies:[T,N,re,ce,le,I,D,z,R],styles:[".input-container[_ngcontent-%COMP%]{padding:16px;background-color:var(--mat-surface);border-top:1px solid var(--mat-divider)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid var(--mat-divider);border-radius:24px;resize:none;font-family:inherit;font-size:14px;line-height:1.5;min-height:48px;max-height:150px;overflow-y:auto}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--mat-primary)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{background-color:var(--mat-disabled-background);cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{margin-bottom:4px}"]})};var Mt=(i,n)=>n.id;function $i(i,n){if(i&1){let e=S();o(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let s=P(e).$implicit,l=d(2);return M(l.togglePermission(s))}),o(2,"div",18)(3,"mat-icon",19),r(4),a(),o(5,"span",20),r(6),a(),o(7,"mat-icon",21),r(8),a()()()()}if(i&2){let e=n.$implicit,t=d(2);x("granted",e.granted),c(),g("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),w(" ",t.getRiskIcon(e.riskLevel)," ")}}function Gi(i,n){if(i&1&&(o(0,"mat-expansion-panel",6)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"folder"),a(),r(5," File Operations "),a()(),o(6,"div",14),O(7,$i,9,8,"div",15,Mt),a()()),i&2){let e=d();c(7),y(e.filePermissions())}}function Ui(i,n){if(i&1){let e=S();o(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let s=P(e).$implicit,l=d(2);return M(l.togglePermission(s))}),o(2,"div",18)(3,"mat-icon",19),r(4),a(),o(5,"span",20),r(6),a(),o(7,"mat-icon",21),r(8),a()()()()}if(i&2){let e=n.$implicit,t=d(2);x("granted",e.granted),c(),g("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),w(" ",t.getRiskIcon(e.riskLevel)," ")}}function Wi(i,n){if(i&1&&(o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"source"),a(),r(5," Git Operations "),a()(),o(6,"div",14),O(7,Ui,9,8,"div",15,Mt),a()()),i&2){let e=d();c(7),y(e.gitPermissions())}}function Qi(i,n){if(i&1){let e=S();o(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let s=P(e).$implicit,l=d(2);return M(l.togglePermission(s))}),o(2,"div",18)(3,"mat-icon",19),r(4),a(),o(5,"span",20),r(6),a(),o(7,"mat-icon",21),r(8),a()()()()}if(i&2){let e=n.$implicit,t=d(2);x("granted",e.granted),c(),g("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),w(" ",t.getRiskIcon(e.riskLevel)," ")}}function qi(i,n){if(i&1&&(o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"computer"),a(),r(5," System Commands "),a()(),o(6,"div",14),O(7,Qi,9,8,"div",15,Mt),a()()),i&2){let e=d();c(7),y(e.systemPermissions())}}function Ki(i,n){if(i&1){let e=S();o(0,"div",16)(1,"mat-checkbox",17),m("change",function(){let s=P(e).$implicit,l=d(2);return M(l.togglePermission(s))}),o(2,"div",18)(3,"mat-icon",19),r(4),a(),o(5,"span",20),r(6),a(),o(7,"mat-icon",21),r(8),a()()()()}if(i&2){let e=n.$implicit,t=d(2);x("granted",e.granted),c(),g("checked",e.granted),c(3),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip",e.description),c(),w(" ",t.getRiskIcon(e.riskLevel)," ")}}function Yi(i,n){if(i&1&&(o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"build"),a(),r(5," Tools & Extensions "),a()(),o(6,"div",14),O(7,Ki,9,8,"div",15,Mt),a()()),i&2){let e=d();c(7),y(e.toolPermissions())}}function Zi(i,n){if(i&1){let e=S();o(0,"mat-chip-row",22),m("removed",function(){let s=P(e).$implicit,l=d(2);return M(l.removePermittedPath(s))}),r(1),o(2,"button",23)(3,"mat-icon"),r(4,"cancel"),a()()()}if(i&2){let e=n.$implicit;c(),w(" ",e," ")}}function Xi(i,n){if(i&1&&(o(0,"mat-chip-set",12),O(1,Zi,5,1,"mat-chip-row",null,j),a()),i&2){let e=d();c(),y(e.sessionPaths().permitted)}}function Ji(i,n){if(i&1){let e=S();o(0,"mat-chip-row",25),m("removed",function(){let s=P(e).$implicit,l=d(2);return M(l.removeBlockedPath(s))}),r(1),o(2,"button",23)(3,"mat-icon"),r(4,"cancel"),a()()()}if(i&2){let e=n.$implicit;c(),w(" ",e," ")}}function eo(i,n){if(i&1&&(o(0,"mat-chip-set",12),O(1,Ji,5,1,"mat-chip-row",24,j),a()),i&2){let e=d();c(),y(e.sessionPaths().blocked)}}var Pt=class i{set permissions(n){this._permissions.set(n),this.groupPermissions()}set paths(n){this.sessionPaths.set(n)}permissionsChanged=new F;pathsChanged=new F;_permissions=f([]);sessionPaths=f({permitted:[],blocked:[]});newPermittedPath="";newBlockedPath="";filePermissions=f([]);systemPermissions=f([]);gitPermissions=f([]);toolPermissions=f([]);constructor(){this._permissions().length===0&&this.initializeDefaultPermissions()}initializeDefaultPermissions(){let n=[{id:"file-read",name:"Read Files",description:"Allow reading files in permitted directories",granted:!1,icon:"visibility",category:"file",riskLevel:"low"},{id:"file-write",name:"Write Files",description:"Allow creating and modifying files",granted:!1,icon:"edit",category:"file",riskLevel:"medium"},{id:"file-delete",name:"Delete Files",description:"Allow deleting files and directories",granted:!1,icon:"delete",category:"file",riskLevel:"high"},{id:"git-read",name:"Git Status",description:"View git status and history",granted:!1,icon:"info",category:"git",riskLevel:"low"},{id:"git-commit",name:"Git Commit",description:"Create git commits",granted:!1,icon:"check_circle",category:"git",riskLevel:"medium"},{id:"system-info",name:"System Info",description:"Read system information",granted:!1,icon:"computer",category:"system",riskLevel:"low"},{id:"system-execute",name:"Execute Commands",description:"Run system commands",granted:!1,icon:"terminal",category:"system",riskLevel:"high"},{id:"tool-search",name:"Search Tools",description:"Use search and grep tools",granted:!1,icon:"search",category:"tool",riskLevel:"low"}];this._permissions.set(n),this.groupPermissions()}groupPermissions(){let n=this._permissions();this.filePermissions.set(n.filter(e=>e.category==="file")),this.systemPermissions.set(n.filter(e=>e.category==="system")),this.gitPermissions.set(n.filter(e=>e.category==="git")),this.toolPermissions.set(n.filter(e=>e.category==="tool"))}togglePermission(n){let e=this._permissions().map(t=>t.id===n.id?b(v({},t),{granted:!t.granted}):t);this._permissions.set(e),this.groupPermissions(),this.permissionsChanged.emit(e)}toggleAll(n){let e=this._permissions().map(t=>b(v({},t),{granted:n}));this._permissions.set(e),this.groupPermissions(),this.permissionsChanged.emit(e)}toggleCategory(n,e){let t=this._permissions().map(s=>s.category===n?b(v({},s),{granted:e}):s);this._permissions.set(t),this.groupPermissions(),this.permissionsChanged.emit(t)}addPermittedPath(){if(!this.newPermittedPath.trim())return;let n=b(v({},this.sessionPaths()),{permitted:[...this.sessionPaths().permitted,this.newPermittedPath.trim()]});this.sessionPaths.set(n),this.pathsChanged.emit(n),this.newPermittedPath=""}removePermittedPath(n){let e=b(v({},this.sessionPaths()),{permitted:this.sessionPaths().permitted.filter(t=>t!==n)});this.sessionPaths.set(e),this.pathsChanged.emit(e)}addBlockedPath(){if(!this.newBlockedPath.trim())return;let n=b(v({},this.sessionPaths()),{blocked:[...this.sessionPaths().blocked,this.newBlockedPath.trim()]});this.sessionPaths.set(n),this.pathsChanged.emit(n),this.newBlockedPath=""}removeBlockedPath(n){let e=b(v({},this.sessionPaths()),{blocked:this.sessionPaths().blocked.filter(t=>t!==n)});this.sessionPaths.set(e),this.pathsChanged.emit(e)}getRiskColor(n){switch(n){case"low":return"primary";case"medium":return"accent";case"high":return"warn";default:return""}}getRiskIcon(n){switch(n){case"low":return"check_circle";case"medium":return"warning";case"high":return"error";default:return"help"}}getGrantedCount(n){return n.filter(e=>e.granted).length}getAllPermissions(){return this._permissions()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-session-permissions-panel"]],inputs:{permissions:"permissions",paths:"paths"},outputs:{permissionsChanged:"permissionsChanged",pathsChanged:"pathsChanged"},decls:59,vars:24,consts:[[1,"permissions-panel"],[1,"panel-actions"],["mat-button","",3,"click"],[1,"quick-toggles"],[3,"click"],["multi",""],["expanded",""],[1,"path-section"],[1,"add-path-compact"],["appearance","outline",1,"compact-field"],["matInput","","placeholder","Add path...",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","color","primary",3,"click"],[1,"compact-chips"],["mat-icon-button","","color","warn",3,"click"],[1,"permission-list"],[1,"permission-item","compact",3,"granted"],[1,"permission-item","compact"],[3,"change","checked"],[1,"permission-content"],[1,"permission-icon"],[1,"permission-name"],[1,"risk-icon",3,"color","matTooltip"],[3,"removed"],["matChipRemove",""],[1,"blocked-chip"],[1,"blocked-chip",3,"removed"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),m("click",function(){return t.toggleAll(!0)}),o(3,"mat-icon"),r(4,"check_box"),a(),r(5," Grant All "),a(),o(6,"button",2),m("click",function(){return t.toggleAll(!1)}),o(7,"mat-icon"),r(8,"check_box_outline_blank"),a(),r(9," Clear All "),a()(),o(10,"div",3)(11,"mat-chip-set")(12,"mat-chip",4),m("click",function(){return t.toggleCategory("file",t.getGrantedCount(t.filePermissions())!==t.filePermissions().length)}),o(13,"mat-icon"),r(14,"folder"),a(),r(15),a(),o(16,"mat-chip",4),m("click",function(){return t.toggleCategory("git",t.getGrantedCount(t.gitPermissions())!==t.gitPermissions().length)}),o(17,"mat-icon"),r(18,"source"),a(),r(19),a(),o(20,"mat-chip",4),m("click",function(){return t.toggleCategory("system",t.getGrantedCount(t.systemPermissions())!==t.systemPermissions().length)}),o(21,"mat-icon"),r(22,"computer"),a(),r(23),a(),o(24,"mat-chip",4),m("click",function(){return t.toggleCategory("tool",t.getGrantedCount(t.toolPermissions())!==t.toolPermissions().length)}),o(25,"mat-icon"),r(26,"build"),a(),r(27),a()()(),k(28,"mat-divider"),o(29,"mat-accordion",5),_(30,Gi,9,0,"mat-expansion-panel",6),_(31,Wi,9,0,"mat-expansion-panel"),_(32,qi,9,0,"mat-expansion-panel"),_(33,Yi,9,0,"mat-expansion-panel"),o(34,"mat-expansion-panel")(35,"mat-expansion-panel-header")(36,"mat-panel-title")(37,"mat-icon"),r(38,"route"),a(),r(39," Path Restrictions "),a()(),o(40,"div",7)(41,"h5"),r(42,"Permitted Paths"),a(),o(43,"div",8)(44,"mat-form-field",9)(45,"input",10),X("ngModelChange",function(l){return Z(t.newPermittedPath,l)||(t.newPermittedPath=l),l}),m("keyup.enter",function(){return t.addPermittedPath()}),a()(),o(46,"button",11),m("click",function(){return t.addPermittedPath()}),o(47,"mat-icon"),r(48,"add"),a()()(),_(49,Xi,3,0,"mat-chip-set",12),o(50,"h5"),r(51,"Blocked Paths"),a(),o(52,"div",8)(53,"mat-form-field",9)(54,"input",10),X("ngModelChange",function(l){return Z(t.newBlockedPath,l)||(t.newBlockedPath=l),l}),m("keyup.enter",function(){return t.addBlockedPath()}),a()(),o(55,"button",13),m("click",function(){return t.addBlockedPath()}),o(56,"mat-icon"),r(57,"block"),a()()(),_(58,eo,3,0,"mat-chip-set",12),a()()()()),e&2&&(c(12),x("mat-chip-selected",t.getGrantedCount(t.filePermissions())===t.filePermissions().length),c(3),A(" Files (",t.getGrantedCount(t.filePermissions()),"/",t.filePermissions().length,") "),c(),x("mat-chip-selected",t.getGrantedCount(t.gitPermissions())===t.gitPermissions().length),c(3),A(" Git (",t.getGrantedCount(t.gitPermissions()),"/",t.gitPermissions().length,") "),c(),x("mat-chip-selected",t.getGrantedCount(t.systemPermissions())===t.systemPermissions().length),c(3),A(" System (",t.getGrantedCount(t.systemPermissions()),"/",t.systemPermissions().length,") "),c(),x("mat-chip-selected",t.getGrantedCount(t.toolPermissions())===t.toolPermissions().length),c(3),A(" Tools (",t.getGrantedCount(t.toolPermissions()),"/",t.toolPermissions().length,") "),c(3),u(t.filePermissions().length>0?30:-1),c(),u(t.gitPermissions().length>0?31:-1),c(),u(t.systemPermissions().length>0?32:-1),c(),u(t.toolPermissions().length>0?33:-1),c(12),Y("ngModel",t.newPermittedPath),c(4),u(t.sessionPaths().permitted.length>0?49:-1),c(5),Y("ngModel",t.newBlockedPath),c(4),u(t.sessionPaths().blocked.length>0?58:-1))},dependencies:[T,N,re,ce,le,z,ve,R,dt,lt,I,D,L,U,B,Q,at,st,Oe,we,be,ke,Se,ge,ht,ae,se,pe,H,W,de],styles:[".permissions-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;padding:var(--spacing-md);overflow-y:auto}.panel-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.panel-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;font-size:12px}.panel-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.quick-toggles[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.quick-toggles[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;height:28px;cursor:pointer;transition:all var(--transition-fast)}.quick-toggles[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-right:var(--spacing-xs)}.quick-toggles[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.mat-chip-selected[_ngcontent-%COMP%]{background-color:var(--app-success-light);color:var(--app-success)}mat-divider[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);background-color:var(--app-surface)}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:40px;padding:0 var(--spacing-md)}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:13px;font-weight:500}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.permission-list[_ngcontent-%COMP%]{padding:var(--spacing-sm) 0}.permission-item[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);margin-bottom:var(--spacing-xs);border-radius:var(--radius-sm);transition:background-color var(--transition-fast)}.permission-item.compact[_ngcontent-%COMP%]{padding:2px var(--spacing-sm);margin-bottom:2px}.permission-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.permission-item.granted[_ngcontent-%COMP%]{background-color:var(--app-success-light)}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{width:100%}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox{padding:4px}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox-label{margin-left:var(--spacing-xs)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]   .permission-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:var(--app-text-secondary)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--app-text-primary)}.permission-item[_ngcontent-%COMP%]   .permission-content[_ngcontent-%COMP%]   .risk-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.path-section[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.path-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:var(--spacing-md) 0 var(--spacing-sm) 0;font-size:12px;font-weight:600;color:var(--app-text-primary);text-transform:uppercase;letter-spacing:.5px}.path-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:first-of-type{margin-top:0}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs);align-items:center;margin-bottom:var(--spacing-sm)}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]{flex:1}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0;height:40px;align-items:center}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{height:40px;align-items:center}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:12px;min-height:auto;border-top:none;display:flex;align-items:center}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     input{font-size:13px;height:auto;line-height:1}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__leading, .path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__notch, .path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   .compact-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--app-divider)}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;flex-shrink:0}.path-section[_ngcontent-%COMP%]   .add-path-compact[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]{height:24px;font-size:12px;margin:2px}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]{--mat-chip-background-color: var(--app-error-light);--mat-chip-text-color: var(--app-error)}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-error)}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--mdc-icon-button-icon-size: 14px}.path-section[_ngcontent-%COMP%]   .compact-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}"]})};var vt=class i{constructor(n){this.http=n}apiUrl="http://localhost:5001/api/git";loadingState=f(!1);errorState=f(null);currentStatus=f(null);gitChanges$=new jt(null);getLoadingState(){return this.loadingState}getErrorState(){return this.errorState}getCurrentStatus(){return this.currentStatus}getGitChanges(){return this.gitChanges$.asObservable()}handleError=n=>{let e="Git operation failed";return n.error instanceof ErrorEvent?e=n.error.message:e=n.error?.error||n.message||`Git error: ${n.status}`,console.error("GitService error:",e,n),this.errorState.set(e),Gt(()=>new Error(e))};clearError(){this.errorState.set(null)}getStatus(n){this.clearError(),this.loadingState.set(!0);let e=n?new At().set("path",n):void 0;return this.http.get(`${this.apiUrl}/status`,{params:e}).pipe(Fe(1),G(t=>{this.currentStatus.set(t),this.loadingState.set(!1)}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}stageFiles(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/stage`,{files:n},{headers:e}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"stage",data:n}),this.refreshStatus()}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}unstageFiles(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/unstage`,{files:n},{headers:e}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"unstage",data:n}),this.refreshStatus()}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}commit(n,e){this.clearError(),this.loadingState.set(!0);let t=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/commit`,{message:n,files:e},{headers:t}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"commit",data:n}),this.refreshStatus()}),$(s=>(this.loadingState.set(!1),this.handleError(s))))}getHistory(n=50){this.clearError(),this.loadingState.set(!0);let e=new At().set("limit",n.toString());return this.http.get(`${this.apiUrl}/history`,{params:e}).pipe(Fe(1),G(()=>this.loadingState.set(!1)),$(t=>(this.loadingState.set(!1),this.handleError(t))))}getDiff(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"}),t=n?{files:n}:{};return this.http.post(`${this.apiUrl}/diff`,t,{headers:e}).pipe(Fe(1),G(()=>this.loadingState.set(!1)),$(s=>(this.loadingState.set(!1),this.handleError(s))))}push(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/push`,{branch:n},{headers:e}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"push",data:n}),this.refreshStatus()}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}pull(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/pull`,{branch:n},{headers:e}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"pull",data:n}),this.refreshStatus()}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}createBranch(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/branch`,{name:n},{headers:e}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"branch_create",data:n}),this.refreshStatus()}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}switchBranch(n){this.clearError(),this.loadingState.set(!0);let e=new ie({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/checkout`,{branch:n},{headers:e}).pipe(G(()=>{this.loadingState.set(!1),this.gitChanges$.next({action:"branch_switch",data:n}),this.refreshStatus()}),$(t=>(this.loadingState.set(!1),this.handleError(t))))}getBranches(){return this.clearError(),this.loadingState.set(!0),this.http.get(`${this.apiUrl}/branches`).pipe(Fe(1),G(()=>this.loadingState.set(!1)),$(n=>(this.loadingState.set(!1),this.handleError(n))))}refreshStatus(){this.getStatus().subscribe({error:n=>{console.warn("Failed to refresh git status:",n)}})}formatCommitDate(n){let t=new Date().getTime()-n.getTime(),s=Math.floor(t/(1e3*60)),l=Math.floor(s/60),h=Math.floor(l/24);return s<60?`${s} minutes ago`:l<24?`${l} hours ago`:h<30?`${h} days ago`:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(n)}shortenHash(n){return n.substring(0,7)}static \u0275fac=function(e){return new(e||i)(qt(We))};static \u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"})};var to=(i,n)=>n.path;function no(i,n){if(i&1&&(o(0,"mat-chip",5)(1,"mat-icon"),r(2,"edit"),a(),r(3," Changes "),a()),i&2){let e=d();g("matBadge",e.context().gitStatus.modified+e.context().gitStatus.staged+e.context().gitStatus.untracked)}}function io(i,n){if(i&1){let e=S();o(0,"mat-list-item",16),m("click",function(){let s=P(e).$implicit,l=d(2);return M(l.onFileClick({name:s.split("/").pop()||"",path:s,type:"file"}))}),o(1,"mat-icon",17),r(2),a(),o(3,"div",18),r(4),a(),o(5,"div",19),r(6),a(),o(7,"button",20),m("click",function(s){let l=P(e).$implicit,h=d(2);return s.stopPropagation(),M(h.pinFile(l))}),o(8,"mat-icon"),r(9),a()()()}if(i&2){let e=n.$implicit,t=d(2);c(2),p(t.getFileIcon(e,"file")),c(2),p(e.split("/").pop()),c(2),p(e),c(),x("pinned",t.isFilePinned(e)),c(2),p((t.isFilePinned(e),"push_pin"))}}function oo(i,n){if(i&1&&(o(0,"div",8)(1,"h4")(2,"mat-icon"),r(3,"tab"),a(),r(4," Active Files "),o(5,"mat-chip",9),r(6),a()(),o(7,"mat-nav-list",10),O(8,io,10,6,"mat-list-item",null,j),a()(),k(10,"mat-divider")),i&2){let e=d();c(6),p(e.context().activeFiles.length),c(2),y(e.context().activeFiles)}}function ao(i,n){if(i&1){let e=S();o(0,"mat-list-item",16),m("click",function(){let s=P(e).$implicit,l=d(2);return M(l.onFileClick({name:s.split("/").pop()||"",path:s,type:"file"}))}),o(1,"mat-icon",17),r(2),a(),o(3,"div",18),r(4),a(),o(5,"div",19),r(6),a(),o(7,"button",21),m("click",function(s){let l=P(e).$implicit,h=d(2);return s.stopPropagation(),M(h.unpinFile(l))}),o(8,"mat-icon"),r(9,"close"),a()()()}if(i&2){let e=n.$implicit,t=d(2);c(2),p(t.getFileIcon(e,"file")),c(2),p(e.split("/").pop()),c(2),p(e)}}function so(i,n){if(i&1&&(o(0,"div",8)(1,"h4")(2,"mat-icon"),r(3,"push_pin"),a(),r(4," Pinned Files "),o(5,"mat-chip",9),r(6),a()(),o(7,"mat-nav-list",10),O(8,ao,10,3,"mat-list-item",null,j),a()(),k(10,"mat-divider")),i&2){let e=d();c(6),p(e.context().pinnedFiles.length),c(2),y(e.context().pinnedFiles)}}function ro(i,n){if(i&1){let e=S();o(0,"mat-list-item",16),m("click",function(){let s=P(e).$implicit,l=d();return M(l.onRecentFileClick(s))}),o(1,"mat-icon",17),r(2),a(),o(3,"div",18),r(4),a(),o(5,"div",22)(6,"span",23),r(7),a(),o(8,"span",24),r(9),a()(),o(10,"button",20),m("click",function(s){let l=P(e).$implicit,h=d();return s.stopPropagation(),M(h.pinFile(l.path))}),o(11,"mat-icon"),r(12),a()()()}if(i&2){let e=n.$implicit,t=d();c(2),p(t.getFileTypeIcon(e.type)),c(2),p(e.name),c(3),p(e.path),c(2),A("",t.formatFileSize(e.size)," \u2022 ",t.formatRelativeTime(e.modified)),c(),x("pinned",t.isFilePinned(e.path)),c(2),p((t.isFilePinned(e.path),"push_pin"))}}function co(i,n){i&1&&k(0,"mat-progress-bar",12)}function lo(i,n){if(i&1&&(o(0,"span",29),r(1),a()),i&2){let e=d().$implicit,t=d();c(),p(t.formatFileSize(e.size))}}function mo(i,n){if(i&1){let e=S();o(0,"mat-tree-node",25)(1,"div",26),m("click",function(){let s=P(e).$implicit,l=d();return M(l.onFileClick(s))}),o(2,"mat-icon",27),r(3),a(),o(4,"span",28),r(5),a(),_(6,lo,2,1,"span",29),a()()}if(i&2){let e=n.$implicit,t=d();c(3),p(t.getFileIcon(e.name,e.type)),c(2),p(e.name),c(),u(e.type==="file"&&e.size?6:-1)}}function po(i,n){if(i&1&&(o(0,"span",33),r(1),a()),i&2){let e=d().$implicit;c(),w("(",e.children.length,")")}}function go(i,n){if(i&1&&(o(0,"mat-tree-node",25)(1,"div",30)(2,"button",31)(3,"mat-icon"),r(4),a()(),o(5,"mat-icon",32),r(6),a(),o(7,"span",28),r(8),a(),_(9,po,2,1,"span",33),a()()),i&2){let e=n.$implicit,t=d();c(4),w(" ",t.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),c(2),p(t.getFileIcon(e.name,e.type)),c(2),p(e.name),c(),u(e.children?9:-1)}}var bt=class i{fileService=C(Un);gitService=C(vt);snackBar=C(rt);http=C(We);treeControl=new Bn(n=>n.children);dataSource=new jn;context=f({projectRoot:"",activeFiles:[],pinnedFiles:this.loadPinnedFiles(),gitBranch:"main",gitStatus:{modified:0,staged:0,untracked:0}});recentFiles=f([]);fileTree=f([]);loading=f(!1);ngOnInit(){this.loadProjectContext(),this.loadFileTree(),this.loadRecentFiles(),this.loadGitStatus()}loadProjectContext(){this.http.get("http://localhost:5001/api/configuration").subscribe({next:n=>{this.context.update(e=>b(v({},e),{projectRoot:n.projectDirectory||"."}))},error:()=>{this.context.update(n=>b(v({},n),{projectRoot:"."}))}})}loadFileTree(){this.loading.set(!0);let n=this.context().projectRoot||".";this.fileService.listFiles(n).subscribe({next:e=>{let t=this.convertApiNodesToFileNodes(e);this.fileTree.set(t),this.dataSource.data=t,this.expandDefaultNodes(),this.loading.set(!1)},error:e=>{console.error("Failed to load file tree:",e),this.snackBar.open("Failed to load file tree","Close",{duration:3e3}),this.loading.set(!1)}})}loadRecentFiles(){let n=localStorage.getItem("codeagent-recent-files");if(n)try{let e=JSON.parse(n);this.recentFiles.set(e.map(t=>b(v({},t),{modified:new Date(t.modified)})))}catch(e){console.error("Failed to parse recent files:",e)}}loadGitStatus(){this.gitService.getStatus().subscribe({next:n=>{this.context.update(e=>b(v({},e),{gitBranch:n.branch||"main",gitStatus:{modified:n.modified?.length||0,staged:n.staged?.length||0,untracked:n.untracked?.length||0}}))},error:n=>{console.error("Failed to load git status:",n)}})}convertApiNodesToFileNodes(n){return n.map(e=>({name:e.name,path:e.path,type:e.type==="folder"?"directory":"file",size:e.size,modified:e.modified,children:e.children?this.convertApiNodesToFileNodes(e.children):void 0,expanded:!1}))}expandDefaultNodes(){this.fileTree().forEach(n=>{n.type==="directory"&&["src","app","components"].includes(n.name)&&(n.expanded=!0,this.treeControl.expand(n),this.expandChildrenRecursively(n,2))})}expandChildrenRecursively(n,e=1){e<=0||!n.children||n.children.forEach(t=>{t.type==="directory"&&["app","components","services"].includes(t.name)&&(t.expanded=!0,this.treeControl.expand(t),this.expandChildrenRecursively(t,e-1))})}loadPinnedFiles(){let n=localStorage.getItem("codeagent-pinned-files");if(n)try{return JSON.parse(n)}catch(e){console.error("Failed to parse pinned files:",e)}return[]}savePinnedFiles(){localStorage.setItem("codeagent-pinned-files",JSON.stringify(this.context().pinnedFiles))}addToRecentFiles(n){let e=n.split("/").pop()||"unknown",t=e.split(".").pop()?.toLowerCase()||"",s={name:e,path:n,type:this.getFileType(t),modified:new Date,size:0};this.recentFiles.update(l=>{let h=l.filter(Vt=>Vt.path!==n),ee=[s,...h].slice(0,10);return localStorage.setItem("codeagent-recent-files",JSON.stringify(ee)),ee})}getFileType(n){switch(n){case"ts":return"typescript";case"js":return"javascript";case"html":return"html";case"scss":case"css":return"scss";case"json":return"json";case"md":return"markdown";default:return"text"}}hasChild=(n,e)=>!!e.children&&e.children.length>0;getFileIcon(n,e){if(e==="directory")return"folder";switch(n.split(".").pop()?.toLowerCase()){case"ts":return"code";case"html":return"web";case"scss":case"css":return"palette";case"json":return"data_object";case"md":return"article";case"js":return"javascript";default:return"description"}}getFileTypeIcon(n){switch(n){case"typescript":return"code";case"scss":return"palette";case"markdown":return"article";case"json":return"data_object";default:return"description"}}formatFileSize(n){if(n===0)return"0 B";let e=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,s)).toFixed(1))+" "+t[s]}formatRelativeTime(n){let t=new Date().getTime()-n.getTime(),s=Math.floor(t/6e4);if(s<1)return"just now";if(s<60)return`${s} min ago`;let l=Math.floor(s/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}onFileClick(n){n.type==="file"&&this.openFile(n.path)}onRecentFileClick(n){this.openFile(n.path)}openFile(n){this.loading.set(!0),this.fileService.readFile(n).subscribe({next:e=>{this.addToRecentFiles(n),this.context.update(t=>{let s=t.activeFiles.includes(n)?t.activeFiles:[...t.activeFiles,n];return b(v({},t),{activeFiles:s})}),console.log("File opened:",n,e),this.snackBar.open(`Opened ${n.split("/").pop()}`,"Close",{duration:2e3}),this.loading.set(!1)},error:e=>{console.error("Failed to read file:",e),this.snackBar.open("Failed to open file","Close",{duration:3e3}),this.loading.set(!1)}})}pinFile(n){this.context().pinnedFiles.includes(n)||(this.context.update(t=>b(v({},t),{pinnedFiles:[...t.pinnedFiles,n]})),this.savePinnedFiles(),this.snackBar.open("File pinned","Close",{duration:2e3}))}unpinFile(n){this.context.update(e=>b(v({},e),{pinnedFiles:e.pinnedFiles.filter(t=>t!==n)})),this.savePinnedFiles(),this.snackBar.open("File unpinned","Close",{duration:2e3})}isFilePinned(n){return this.context().pinnedFiles.includes(n)}refreshFileTree(){this.loadFileTree()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-context-files-panel"]],decls:39,vars:14,consts:[[1,"context-panel"],[1,"context-header"],[1,"project-info"],[1,"project-chip"],[1,"git-chip",3,"matTooltip"],["matBadgeSize","small","matBadgeColor","warn",1,"status-chip",3,"matBadge"],[1,"context-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click","disabled"],[1,"context-section"],[1,"count-chip"],["dense",""],[1,"context-section","file-browser"],["mode","indeterminate"],[1,"file-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],["matTreeNodeToggle","",4,"matTreeNodeDef","matTreeNodeDefWhen"],[3,"click"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"file-path"],["mat-icon-button","","matListItemMeta","","matTooltip","Pin file",3,"click"],["mat-icon-button","","matListItemMeta","","matTooltip","Unpin file",1,"pinned",3,"click"],["matListItemLine","",1,"file-meta"],[1,"file-path"],[1,"file-info"],["matTreeNodeToggle",""],[1,"tree-node","file-node",3,"click"],[1,"file-icon"],[1,"node-label"],[1,"file-size"],[1,"tree-node","folder-node"],["mat-icon-button","","matTreeNodeToggle",""],[1,"folder-icon"],[1,"folder-count"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-chip",3)(4,"mat-icon"),r(5,"folder"),a(),r(6),a(),o(7,"mat-chip",4)(8,"mat-icon"),r(9,"source"),a(),r(10),a(),_(11,no,4,1,"mat-chip",5),a(),o(12,"div",6)(13,"button",7),m("click",function(){return t.refreshFileTree()}),o(14,"mat-icon"),r(15,"refresh"),a()()()(),k(16,"mat-divider"),_(17,oo,11,1),_(18,so,11,1),o(19,"div",8)(20,"h4")(21,"mat-icon"),r(22,"history"),a(),r(23," Recent Files "),o(24,"mat-chip",9),r(25),a()(),o(26,"mat-nav-list",10),O(27,ro,13,8,"mat-list-item",null,to),a()(),k(29,"mat-divider"),o(30,"div",11)(31,"h4")(32,"mat-icon"),r(33,"folder_open"),a(),r(34," Project Files "),a(),_(35,co,1,0,"mat-progress-bar",12),o(36,"mat-tree",13),Pe(37,mo,7,3,"mat-tree-node",14)(38,go,10,4,"mat-tree-node",15),a()()()),e&2&&(c(6),w(" ",t.context().projectRoot.split("/").pop()," "),c(),g("matTooltip","Branch: "+t.context().gitBranch),c(3),w(" ",t.context().gitBranch," "),c(),u(t.context().gitStatus.modified+t.context().gitStatus.staged+t.context().gitStatus.untracked>0?11:-1),c(2),g("disabled",t.loading()),c(),x("spinning",t.loading()),c(3),u(t.context().activeFiles.length>0?17:-1),c(),u(t.context().pinnedFiles.length>0?18:-1),c(7),p(t.recentFiles().length),c(2),y(t.recentFiles()),c(8),u(t.loading()?35:-1),c(),g("dataSource",t.dataSource)("treeControl",t.treeControl),c(2),g("matTreeNodeDefWhen",t.hasChild))},dependencies:[T,N,I,D,z,R,de,it,nt,tt,U,Je,Xe,et,B,Q,L,Vn,Nn,Hn,Rn,Ln,Gn,$n,H,W,me,mt,Sn],styles:[".context-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto}.context-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:var(--spacing-md);gap:var(--spacing-md)}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-chip[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;font-weight:500}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .git-chip[_ngcontent-%COMP%]{background-color:var(--app-success-light);color:var(--app-success);font-size:12px;height:24px}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .git-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{background-color:var(--app-warning-light);color:var(--app-warning, #ff9800);font-size:12px;height:24px}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.context-header[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.context-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin:0 0 var(--spacing-md) 0;font-size:14px;font-weight:600;color:var(--app-text-primary)}.context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .count-chip[_ngcontent-%COMP%]{margin-left:auto;background-color:var(--app-surface);color:var(--app-text-secondary);font-size:11px;font-weight:600;height:20px;min-height:20px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{padding:0}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:var(--radius-sm);margin-bottom:2px;transition:background-color var(--transition-fast)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[matListItemIcon][_ngcontent-%COMP%]{color:var(--app-text-secondary);font-size:18px;width:18px;height:18px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemTitle][_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--app-text-primary)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine][_ngcontent-%COMP%]{font-size:11px;color:var(--app-text-disabled)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-path[_ngcontent-%COMP%]{font-family:Courier New,monospace;opacity:.8}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-meta[_ngcontent-%COMP%]   .file-path[_ngcontent-%COMP%]{font-family:Courier New,monospace}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine].file-meta[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   button[matListItemMeta][_ngcontent-%COMP%]{opacity:0;transition:opacity var(--transition-fast)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   button[matListItemMeta].pinned[_ngcontent-%COMP%]{opacity:1;color:var(--primary-color)}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   button[matListItemMeta][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.context-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover   button[matListItemMeta][_ngcontent-%COMP%]{opacity:1}.file-browser[_ngcontent-%COMP%]{flex:1}.file-browser[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--spacing-xs) 0;cursor:pointer;border-radius:var(--radius-sm);transition:background-color var(--transition-fast)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%], .file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary);margin-right:var(--spacing-sm)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .node-label[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--app-text-primary)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:11px;color:var(--app-text-disabled);margin-left:var(--spacing-sm)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   .folder-count[_ngcontent-%COMP%]{font-size:11px;color:var(--app-text-disabled);margin-left:var(--spacing-xs)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   button[matTreeNodeToggle][_ngcontent-%COMP%]{width:24px;height:24px;margin-right:var(--spacing-xs)}.file-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]   button[matTreeNodeToggle][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--app-text-secondary)}.file-tree[_ngcontent-%COMP%]   .file-node[_ngcontent-%COMP%]{padding-left:calc(var(--spacing-md) + 24px)}.file-tree[_ngcontent-%COMP%]   .folder-node[_ngcontent-%COMP%]{font-weight:500}mat-divider[_ngcontent-%COMP%]{margin:0;opacity:.6}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}@media (prefers-color-scheme: dark){.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .git-chip[_ngcontent-%COMP%]{background-color:#4caf5026;color:#66bb6a}.context-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{background-color:#ff980026;color:#ffa726}}"]})};var _o=(i,n)=>n.id;function uo(i,n){if(i&1){let e=S();o(0,"button",13),m("click",function(){P(e);let s=d();return s.searchQuery.set(""),M(s.onSearchChange())}),o(1,"mat-icon"),r(2,"clear"),a()()}}function fo(i,n){i&1&&(o(0,"div",11),k(1,"mat-progress-spinner",14),o(2,"p"),r(3,"Loading conversations..."),a()())}function Co(i,n){i&1&&(o(0,"mat-icon"),r(1,"search_off"),a(),o(2,"h3"),r(3,"No conversations found"),a(),o(4,"p"),r(5,"Try adjusting your search terms or filters"),a())}function xo(i,n){i&1&&(o(0,"mat-icon"),r(1,"star_border"),a(),o(2,"h3"),r(3,"No starred conversations"),a(),o(4,"p"),r(5,"Star conversations to find them easily later"),a())}function Po(i,n){i&1&&(o(0,"mat-icon"),r(1,"archive"),a(),o(2,"h3"),r(3,"No archived conversations"),a(),o(4,"p"),r(5,"Archived conversations will appear here"),a())}function Mo(i,n){i&1&&(o(0,"mat-icon"),r(1,"chat_bubble_outline"),a(),o(2,"h3"),r(3,"No conversations yet"),a(),o(4,"p"),r(5,"Start a new conversation to see it here"),a())}function vo(i,n){if(i&1&&(o(0,"div",12),_(1,Co,6,0)(2,xo,6,0)(3,Po,6,0)(4,Mo,6,0),a()),i&2){let e=d();c(),u(e.searchQuery()?1:e.selectedFilter()==="starred"?2:e.selectedFilter()==="archived"?3:4)}}function bo(i,n){i&1&&(o(0,"mat-icon",18),r(1,"star"),a())}function Oo(i,n){i&1&&(o(0,"mat-icon"),r(1,"chat_bubble"),a())}function yo(i,n){if(i&1&&(o(0,"mat-chip",32),r(1),a()),i&2){let e=n.$implicit;c(),p(e)}}function wo(i,n){if(i&1&&(o(0,"div",26),O(1,yo,2,1,"mat-chip",32,j),a()),i&2){let e=d().$implicit;c(),y(e.tags)}}function So(i,n){if(i&1){let e=S();o(0,"button",33),m("click",function(s){P(e);let l=d().$implicit,h=d(2);return M(h.archiveSession(l.id,s))}),o(1,"mat-icon"),r(2,"archive"),a(),r(3," Archive "),a()}}function ko(i,n){if(i&1){let e=S();o(0,"button",33),m("click",function(s){P(e);let l=d().$implicit,h=d(2);return M(h.restoreSession(l.id,s))}),o(1,"mat-icon"),r(2,"unarchive"),a(),r(3," Restore "),a()}}function Eo(i,n){if(i&1){let e=S();o(0,"mat-list-item",16),m("click",function(){let s=P(e).$implicit,l=d(2);return M(l.openSession(s.id))}),o(1,"div",17),_(2,bo,2,0,"mat-icon",18)(3,Oo,2,0,"mat-icon"),a(),o(4,"div",19)(5,"span",20),r(6),a(),o(7,"div",21)(8,"span",22),r(9),a(),o(10,"span",23),r(11),a()()(),o(12,"div",24)(13,"p",25),r(14),a(),_(15,wo,3,0,"div",26),a(),o(16,"div",27)(17,"button",28),m("click",function(s){let l=P(e).$implicit,h=d(2);return M(h.toggleStar(l.id,s))}),o(18,"mat-icon"),r(19),a()(),o(20,"button",29),m("click",function(s){return P(e),M(s.stopPropagation())}),o(21,"mat-icon"),r(22,"more_vert"),a()(),o(23,"mat-menu",null,0),_(25,So,4,0,"button",30)(26,ko,4,0,"button",30),o(27,"button",31),m("click",function(s){let l=P(e).$implicit,h=d(2);return M(h.deleteSession(l.id,s))}),o(28,"mat-icon"),r(29,"delete"),a(),r(30," Delete "),a()()()()}if(i&2){let e=n.$implicit,t=nn(24),s=d(2);c(2),u(e.starred?2:3),c(4),p(e.title),c(3),w("",e.messageCount," messages"),c(2),p(s.formatRelativeTime(e.lastActivity)),c(3),p(e.preview),c(),u(e.tags.length>0?15:-1),c(2),x("starred",e.starred),g("matTooltip",e.starred?"Remove star":"Add star"),c(2),p(e.starred?"star":"star_border"),c(),g("matMenuTriggerFor",t),c(5),u(e.archived?26:25)}}function To(i,n){if(i&1&&(o(0,"mat-nav-list"),O(1,Eo,31,12,"mat-list-item",15,_o),a()),i&2){let e=d();c(),y(e.filteredSessions())}}var Ot=class i{searchQuery=f("");loading=f(!1);selectedFilter=f("all");chatSessions=f([{id:"session-1",title:"Configuration Panel Setup",preview:"Help me implement a configuration panel with providers, security settings...",messageCount:24,lastActivity:new Date(Date.now()-30*60*1e3),tags:["configuration","ui","angular"],starred:!0,archived:!1},{id:"session-2",title:"Chat Sidecar Implementation",preview:"Lets add a right sidebar to the chat window for displaying different...",messageCount:18,lastActivity:new Date(Date.now()-2*60*60*1e3),tags:["chat","ui","sidecar"],starred:!1,archived:!1},{id:"session-3",title:"Session Permissions System",preview:"Create a session-based permissions system that allows temporary...",messageCount:31,lastActivity:new Date(Date.now()-4*60*60*1e3),tags:["permissions","security","session"],starred:!1,archived:!1},{id:"session-4",title:"File Browser Component",preview:"Build a file tree browser that shows the project structure...",messageCount:15,lastActivity:new Date(Date.now()-1*24*60*60*1e3),tags:["files","tree","browser"],starred:!0,archived:!1},{id:"session-5",title:"API Integration",preview:"Connect the frontend to the backend API endpoints for chat...",messageCount:42,lastActivity:new Date(Date.now()-3*24*60*60*1e3),tags:["api","backend","integration"],starred:!1,archived:!1},{id:"session-6",title:"Initial Project Setup",preview:"Help me set up the basic Angular project structure with Material...",messageCount:28,lastActivity:new Date(Date.now()-7*24*60*60*1e3),tags:["setup","angular","material"],starred:!1,archived:!0}]);filteredSessions=f([]);ngOnInit(){this.updateFilteredSessions()}updateFilteredSessions(){let n=this.chatSessions(),e=this.searchQuery().toLowerCase();switch(e&&(n=n.filter(t=>t.title.toLowerCase().includes(e)||t.preview.toLowerCase().includes(e)||t.tags.some(s=>s.toLowerCase().includes(e)))),this.selectedFilter()){case"starred":n=n.filter(t=>t.starred&&!t.archived);break;case"recent":n=n.filter(t=>{let s=new Date(Date.now()-1728e5);return t.lastActivity>s&&!t.archived});break;case"archived":n=n.filter(t=>t.archived);break;case"all":default:n=n.filter(t=>!t.archived);break}n.sort((t,s)=>s.lastActivity.getTime()-t.lastActivity.getTime()),this.filteredSessions.set(n)}onSearchChange(){this.updateFilteredSessions()}setFilter(n){this.selectedFilter.set(n),this.updateFilteredSessions()}toggleStar(n,e){e.stopPropagation(),this.chatSessions.update(t=>t.map(s=>s.id===n?b(v({},s),{starred:!s.starred}):s)),this.updateFilteredSessions()}archiveSession(n,e){e.stopPropagation(),this.chatSessions.update(t=>t.map(s=>s.id===n?b(v({},s),{archived:!0}):s)),this.updateFilteredSessions()}restoreSession(n,e){e.stopPropagation(),this.chatSessions.update(t=>t.map(s=>s.id===n?b(v({},s),{archived:!1}):s)),this.updateFilteredSessions()}deleteSession(n,e){e.stopPropagation(),confirm("Are you sure you want to delete this chat session? This action cannot be undone.")&&(this.chatSessions.update(t=>t.filter(s=>s.id!==n)),this.updateFilteredSessions())}openSession(n){console.log("Opening session:",n)}formatRelativeTime(n){let t=new Date().getTime()-n.getTime(),s=Math.floor(t/6e4);if(s<1)return"just now";if(s<60)return`${s}m ago`;let l=Math.floor(s/60);if(l<24)return`${l}h ago`;let h=Math.floor(l/24);if(h<7)return`${h}d ago`;let ee=Math.floor(h/7);return ee<4?`${ee}w ago`:`${Math.floor(h/30)}mo ago`}getFilterCount(n){let e=this.chatSessions();switch(n){case"starred":return e.filter(s=>s.starred&&!s.archived).length;case"recent":let t=new Date(Date.now()-2*24*60*60*1e3);return e.filter(s=>s.lastActivity>t&&!s.archived).length;case"archived":return e.filter(s=>s.archived).length;case"all":default:return e.filter(s=>!s.archived).length}}refreshHistory(){this.loading.set(!0),setTimeout(()=>{this.loading.set(!1)},1e3)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-chat-history-panel"]],decls:41,vars:18,consts:[["sessionMenu","matMenu"],[1,"history-panel"],[1,"history-header"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by title, content, or tags...",3,"ngModelChange","input","ngModel"],["matPrefix",""],["matSuffix","","mat-icon-button",""],["mat-icon-button","","matTooltip","Refresh",3,"click","disabled"],[1,"filter-section"],[3,"click"],[1,"sessions-list"],[1,"loading-container"],[1,"empty-state"],["matSuffix","","mat-icon-button","",3,"click"],["diameter","32"],[1,"session-item"],[1,"session-item",3,"click"],["matListItemIcon","",1,"session-avatar"],[1,"star-icon"],["matListItemTitle","",1,"session-header"],[1,"session-title"],[1,"session-meta"],[1,"message-count"],[1,"last-activity"],["matListItemLine","",1,"session-content"],[1,"session-preview"],[1,"session-tags"],["matListItemMeta","",1,"session-actions"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",1,"delete-action",3,"click"],[1,"tag-chip"],["mat-menu-item","",3,"click"]],template:function(e,t){e&1&&(o(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),r(4,"Search conversations"),a(),o(5,"input",4),X("ngModelChange",function(l){return Z(t.searchQuery,l)||(t.searchQuery=l),l}),m("input",function(){return t.onSearchChange()}),a(),o(6,"mat-icon",5),r(7,"search"),a(),_(8,uo,3,0,"button",6),a(),o(9,"button",7),m("click",function(){return t.refreshHistory()}),o(10,"mat-icon"),r(11,"refresh"),a()()(),o(12,"div",8)(13,"mat-chip-set")(14,"mat-chip",9),m("click",function(){return t.setFilter("all")}),r(15," All "),o(16,"mat-chip-trailing-icon"),r(17),a()(),o(18,"mat-chip",9),m("click",function(){return t.setFilter("starred")}),o(19,"mat-icon"),r(20,"star"),a(),r(21," Starred "),o(22,"mat-chip-trailing-icon"),r(23),a()(),o(24,"mat-chip",9),m("click",function(){return t.setFilter("recent")}),o(25,"mat-icon"),r(26,"schedule"),a(),r(27," Recent "),o(28,"mat-chip-trailing-icon"),r(29),a()(),o(30,"mat-chip",9),m("click",function(){return t.setFilter("archived")}),o(31,"mat-icon"),r(32,"archive"),a(),r(33," Archived "),o(34,"mat-chip-trailing-icon"),r(35),a()()()(),k(36,"mat-divider"),o(37,"div",10),_(38,fo,4,0,"div",11)(39,vo,5,1,"div",12)(40,To,3,0,"mat-nav-list"),a()()),e&2&&(c(5),Y("ngModel",t.searchQuery),c(3),u(t.searchQuery()?8:-1),c(),g("disabled",t.loading()),c(),x("spinning",t.loading()),c(4),x("selected",t.selectedFilter()==="all"),c(3),p(t.getFilterCount("all")),c(),x("selected",t.selectedFilter()==="starred"),c(5),p(t.getFilterCount("starred")),c(),x("selected",t.selectedFilter()==="recent"),c(5),p(t.getFilterCount("recent")),c(),x("selected",t.selectedFilter()==="archived"),c(5),p(t.getFilterCount("archived")),c(3),u(t.loading()?38:t.filteredSessions().length===0?39:40))},dependencies:[T,N,re,ce,le,I,D,z,R,de,it,nt,tt,U,Je,Xe,et,B,Q,Oe,wn,L,Kn,Qn,Wn,qn,H,W,ye,ct,we,be,ot,bn,On,ke,Se],styles:['@charset "UTF-8";.history-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:hidden}.history-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md)}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{height:40px}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:8px 0;min-height:auto}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     input{font-size:14px}.history-header[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix{color:var(--app-text-secondary)}.history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.filter-section[_ngcontent-%COMP%]{padding:0 var(--spacing-md) var(--spacing-md)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;height:32px;cursor:pointer;transition:all var(--transition-fast)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-chip-trailing-icon[_ngcontent-%COMP%]{color:#fff;opacity:.9}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-chip-trailing-icon[_ngcontent-%COMP%]{font-size:11px;background-color:var(--app-text-disabled);color:#fff;border-radius:10px;padding:2px 6px;margin-left:var(--spacing-xs)}.sessions-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.sessions-list[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--app-text-secondary)}.sessions-list[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:var(--spacing-md);font-size:14px}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);text-align:center;color:var(--app-text-secondary)}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5;margin-bottom:var(--spacing-md)}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--spacing-sm) 0;font-size:16px;font-weight:500;color:var(--app-text-primary)}.sessions-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.8}.sessions-list[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{padding:0}.session-item[_ngcontent-%COMP%]{min-height:80px;padding:var(--spacing-md);cursor:pointer;border-bottom:1px solid var(--app-divider);transition:background-color var(--transition-fast)}.session-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.session-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.session-item[_ngcontent-%COMP%]   .session-avatar[_ngcontent-%COMP%]{align-self:flex-start;margin-top:4px}.session-item[_ngcontent-%COMP%]   .session-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--app-text-secondary)}.session-item[_ngcontent-%COMP%]   .session-avatar[_ngcontent-%COMP%]   mat-icon.star-icon[_ngcontent-%COMP%]{color:var(--app-warning, #ff9800)}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:var(--spacing-xs)}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--app-text-primary);line-height:1.2}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-meta[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);font-size:11px;color:var(--app-text-disabled)}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-meta[_ngcontent-%COMP%]   .message-count[_ngcontent-%COMP%]:before{content:"\\1f4ac  "}.session-item[_ngcontent-%COMP%]   .session-header[_ngcontent-%COMP%]   .session-meta[_ngcontent-%COMP%]   .last-activity[_ngcontent-%COMP%]:before{content:"\\1f552  "}.session-item[_ngcontent-%COMP%]   .session-content[_ngcontent-%COMP%]   .session-preview[_ngcontent-%COMP%]{font-size:13px;color:var(--app-text-secondary);line-height:1.3;margin:0 0 var(--spacing-xs) 0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.session-item[_ngcontent-%COMP%]   .session-content[_ngcontent-%COMP%]   .session-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.session-item[_ngcontent-%COMP%]   .session-content[_ngcontent-%COMP%]   .session-tags[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{font-size:10px;height:18px;background-color:var(--app-surface);color:var(--app-text-secondary);border:1px solid var(--app-divider)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;opacity:0;transition:opacity var(--transition-fast)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;color:var(--app-text-secondary)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button.starred[_ngcontent-%COMP%], .session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button.starred[_ngcontent-%COMP%]:hover{color:var(--app-warning, #ff9800)}.session-item[_ngcontent-%COMP%]   .session-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.session-item[_ngcontent-%COMP%]:hover   .session-actions[_ngcontent-%COMP%]{opacity:1}  .delete-action{color:var(--app-error, #f44336)!important}  .delete-action mat-icon{color:var(--app-error, #f44336)!important}mat-divider[_ngcontent-%COMP%]{margin:0;opacity:.6}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}@media (prefers-color-scheme: dark){.filter-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-chip-trailing-icon[_ngcontent-%COMP%]{background-color:#fff3}}']})};var Io=(i,n)=>n.name,si=(i,n)=>n.id;function Do(i,n){if(i&1&&(o(0,"div",16)(1,"mat-icon"),r(2),a(),o(3,"span"),r(4),a(),k(5,"mat-progress-spinner",17),a()),i&2){let e=d().$implicit;c(2),p(e.icon),c(2),p(e.name)}}function Fo(i,n){if(i&1&&_(0,Do,6,2,"div",16),i&2){let e=n.$implicit,t=d().$implicit;u(e.id===t?0:-1)}}function Ao(i,n){if(i&1&&O(0,Fo,1,1,null,null,si),i&2){let e=d(2);y(e.tools())}}function zo(i,n){if(i&1&&(o(0,"div",5)(1,"h4")(2,"mat-icon"),r(3,"play_circle"),a(),r(4," Running Tools "),o(5,"mat-chip",14),r(6),a()(),o(7,"div",15),O(8,Ao,2,0,null,null,j),a(),k(10,"mat-divider"),a()),i&2){let e=d();c(6),p(e.activeTools().length),c(2),y(e.activeTools())}}function Bo(i,n){if(i&1&&(o(0,"mat-chip",18),r(1),a()),i&2){let e=d().$implicit,t=d();c(),w(" ",t.getRunningToolsCount(e)," running ")}}function Lo(i,n){if(i&1&&(o(0,"mat-chip",27),r(1),a()),i&2){let e=d().$implicit;c(),p(e.shortcut)}}function No(i,n){i&1&&k(0,"mat-progress-spinner",29)}function Ro(i,n){if(i&1){let e=S();o(0,"button",34),m("click",function(s){P(e);let l=d().$implicit,h=d(2);return s.stopPropagation(),M(h.executeTool(l))}),o(1,"mat-icon"),r(2,"play_arrow"),a()()}if(i&2){let e=d().$implicit;g("disabled",!e.enabled)}}function Ho(i,n){if(i&1&&(o(0,"span",33),r(1),a()),i&2){let e=d().$implicit,t=d(2);c(),w("\u2022 Last used ",t.formatLastUsed(e.lastUsed))}}function Vo(i,n){if(i&1){let e=S();o(0,"div",21)(1,"div",22),m("click",function(){let s=P(e).$implicit,l=d(2);return M(l.executeTool(s))}),o(2,"div",23)(3,"mat-icon",24),r(4),a(),o(5,"div",25)(6,"span",26),r(7),a(),_(8,Lo,2,1,"mat-chip",27),a()(),o(9,"div",28),_(10,No,1,0,"mat-progress-spinner",29)(11,Ro,3,1,"button",30),o(12,"button",31),m("click",function(s){let l=P(e).$implicit,h=d(2);return s.stopPropagation(),M(h.toggleTool(l.id))}),o(13,"mat-icon"),r(14),a()()()(),o(15,"div",32),r(16),_(17,Ho,2,1,"span",33),a()()}if(i&2){let e=n.$implicit;x("disabled",!e.enabled)("running",e.status==="running"),c(4),p(e.icon),c(3),p(e.name),c(),u(e.shortcut?8:-1),c(2),u(e.status==="running"?10:11),c(2),g("matTooltip",e.enabled?"Disable tool":"Enable tool"),c(2),p(e.enabled?"toggle_on":"toggle_off"),c(2),w(" ",e.description," "),c(),u(e.lastUsed?17:-1)}}function jo(i,n){if(i&1&&(o(0,"mat-expansion-panel",8)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4),a(),o(5,"span"),r(6),a(),_(7,Bo,2,1,"mat-chip",18),a(),o(8,"mat-panel-description"),r(9),a()(),o(10,"div",19),O(11,Vo,18,12,"div",20,si),a()()),i&2){let e=n.$implicit,t=d();g("expanded",e.expanded),c(4),p(e.icon),c(2),p(e.name),c(),u(t.getRunningToolsCount(e)>0?7:-1),c(2),A(" ",t.getEnabledToolsCount(e),"/",e.tools.length," enabled "),c(2),y(e.tools)}}var yt=class i{loading=f(!1);activeTools=f([]);tools=f([{id:"search-code",name:"Search Code",description:"Search across all files in the project",icon:"search",category:"code",enabled:!0,shortcut:"Ctrl+Shift+F",status:"idle"},{id:"find-replace",name:"Find & Replace",description:"Find and replace text across multiple files",icon:"find_replace",category:"code",enabled:!0,shortcut:"Ctrl+H",status:"idle"},{id:"format-code",name:"Format Code",description:"Auto-format code using project standards",icon:"auto_fix_high",category:"code",enabled:!0,shortcut:"Shift+Alt+F",status:"idle"},{id:"analyze-imports",name:"Analyze Imports",description:"Find unused imports and optimize dependencies",icon:"account_tree",category:"code",enabled:!0,status:"idle"},{id:"generate-docs",name:"Generate Docs",description:"Auto-generate documentation from code comments",icon:"article",category:"code",enabled:!0,status:"idle"},{id:"create-file",name:"Create File",description:"Create new files with templates",icon:"note_add",category:"file",enabled:!0,shortcut:"Ctrl+N",status:"idle"},{id:"create-folder",name:"Create Folder",description:"Create new directories in the project",icon:"create_new_folder",category:"file",enabled:!0,status:"idle"},{id:"move-rename",name:"Move/Rename",description:"Move or rename files and update references",icon:"drive_file_move",category:"file",enabled:!0,status:"idle"},{id:"duplicate-file",name:"Duplicate",description:"Duplicate files or folders",icon:"content_copy",category:"file",enabled:!0,status:"idle"},{id:"git-status",name:"Git Status",description:"View current git status and changes",icon:"info",category:"git",enabled:!0,shortcut:"Ctrl+Shift+G",status:"idle"},{id:"git-diff",name:"View Diff",description:"Compare changes between commits",icon:"difference",category:"git",enabled:!0,status:"idle"},{id:"git-commit",name:"Commit Changes",description:"Stage and commit changes",icon:"check_circle",category:"git",enabled:!0,shortcut:"Ctrl+Enter",status:"idle"},{id:"git-branch",name:"Branch Manager",description:"Create, switch, and manage branches",icon:"call_split",category:"git",enabled:!0,status:"idle"},{id:"explain-code",name:"Explain Code",description:"Get AI explanations of selected code",icon:"psychology",category:"ai",enabled:!0,status:"idle",lastUsed:new Date(Date.now()-30*60*1e3)},{id:"suggest-improvements",name:"Code Suggestions",description:"Get AI suggestions for code improvements",icon:"lightbulb",category:"ai",enabled:!0,status:"idle",lastUsed:new Date(Date.now()-45*60*1e3)},{id:"generate-tests",name:"Generate Tests",description:"Auto-generate unit tests for functions",icon:"quiz",category:"ai",enabled:!0,status:"idle"},{id:"code-review",name:"AI Code Review",description:"Get automated code review feedback",icon:"rate_review",category:"ai",enabled:!0,status:"idle"},{id:"syntax-check",name:"Syntax Check",description:"Check for syntax errors in code",icon:"bug_report",category:"debug",enabled:!0,status:"idle"},{id:"lint-code",name:"Lint Code",description:"Run linting tools on the codebase",icon:"rule",category:"debug",enabled:!0,status:"idle"},{id:"run-tests",name:"Run Tests",description:"Execute unit and integration tests",icon:"play_arrow",category:"debug",enabled:!0,shortcut:"Ctrl+Shift+T",status:"idle"}]);categories=f([]);ngOnInit(){this.organizeTools()}organizeTools(){let n=new Map;this.tools().forEach(t=>{n.has(t.category)||n.set(t.category,[]),n.get(t.category).push(t)});let e=[{name:"Code Tools",icon:"code",tools:n.get("code")||[],expanded:!0},{name:"File Operations",icon:"folder",tools:n.get("file")||[],expanded:!1},{name:"Git Integration",icon:"source",tools:n.get("git")||[],expanded:!1},{name:"AI Assistance",icon:"psychology",tools:n.get("ai")||[],expanded:!1},{name:"Debug & Test",icon:"bug_report",tools:n.get("debug")||[],expanded:!1}];this.categories.set(e)}executeTool(n){n.enabled&&(this.updateToolStatus(n.id,"running"),this.activeTools.update(e=>[...e,n.id]),console.log(`Executing tool: ${n.name}`),setTimeout(()=>{this.updateToolStatus(n.id,"idle"),this.activeTools.update(e=>e.filter(t=>t!==n.id)),this.tools.update(e=>e.map(t=>t.id===n.id?b(v({},t),{lastUsed:new Date}):t))},2e3))}updateToolStatus(n,e){this.tools.update(t=>t.map(s=>s.id===n?b(v({},s),{status:e}):s)),this.organizeTools()}toggleTool(n){this.tools.update(e=>e.map(t=>t.id===n?b(v({},t),{enabled:!t.enabled}):t)),this.organizeTools()}getEnabledToolsCount(n){return n.tools.filter(e=>e.enabled).length}getRunningToolsCount(n){return n.tools.filter(e=>e.status==="running").length}formatLastUsed(n){let t=new Date().getTime()-n.getTime(),s=Math.floor(t/6e4);if(s<1)return"just now";if(s<60)return`${s}m ago`;let l=Math.floor(s/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}refreshTools(){this.loading.set(!0),setTimeout(()=>{this.loading.set(!1)},1e3)}getTotalEnabledToolsCount(){return this.tools().filter(n=>n.enabled).length}getTotalToolsCount(){return this.tools().length}getActiveToolsCount(){return this.activeTools().length}toggleAllTools(){let n=this.tools().every(e=>e.enabled);this.tools.update(e=>e.map(t=>b(v({},t),{enabled:!n}))),this.organizeTools()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-tools-panel"]],decls:32,vars:8,consts:[[1,"tools-panel"],[1,"tools-header"],[1,"header-info"],[1,"tools-count"],["mat-icon-button","","matTooltip","Refresh Tools",3,"click","disabled"],[1,"active-tools-section"],[1,"tools-categories"],["multi",""],[3,"expanded"],[1,"tools-footer"],[1,"footer-stats"],[1,"stat"],[1,"footer-actions"],["mat-button","",3,"click"],[1,"count-chip"],[1,"active-tools-list"],[1,"active-tool"],["diameter","16","mode","indeterminate"],[1,"running-chip"],[1,"tools-list"],[1,"tool-item",3,"disabled","running"],[1,"tool-item"],[1,"tool-header",3,"click"],[1,"tool-info"],[1,"tool-icon"],[1,"tool-details"],[1,"tool-name"],[1,"shortcut-chip"],[1,"tool-actions"],["diameter","20","mode","indeterminate"],["mat-icon-button","","matTooltip","Execute tool",3,"disabled"],["mat-icon-button","",3,"click","matTooltip"],[1,"tool-description"],[1,"last-used"],["mat-icon-button","","matTooltip","Execute tool",3,"click","disabled"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),r(4,"Available Tools"),a(),o(5,"mat-chip",3),r(6),a()(),o(7,"button",4),m("click",function(){return t.refreshTools()}),o(8,"mat-icon"),r(9,"refresh"),a()()(),k(10,"mat-divider"),_(11,zo,11,1,"div",5),o(12,"div",6)(13,"mat-accordion",7),O(14,jo,13,6,"mat-expansion-panel",8,Io),a()(),k(16,"mat-divider"),o(17,"div",9)(18,"div",10)(19,"span",11)(20,"mat-icon"),r(21,"check_circle"),a(),r(22),a(),o(23,"span",11)(24,"mat-icon"),r(25,"play_circle"),a(),r(26),a()(),o(27,"div",12)(28,"button",13),m("click",function(){return t.toggleAllTools()}),o(29,"mat-icon"),r(30,"select_all"),a(),r(31," Toggle All "),a()()()()),e&2&&(c(6),A(" ",t.getTotalEnabledToolsCount(),"/",t.getTotalToolsCount()," enabled "),c(),g("disabled",t.loading()),c(),x("spinning",t.loading()),c(3),u(t.activeTools().length>0?11:-1),c(3),y(t.categories()),c(8),w(" ",t.getTotalEnabledToolsCount()," enabled "),c(4),w(" ",t.getActiveToolsCount()," running "))},dependencies:[T,N,I,D,z,ve,R,de,U,ge,ht,ae,se,pe,gt,B,Q,me,H,W,L,ye,ct],styles:[".tools-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:hidden}.tools-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md)}.tools-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.tools-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:var(--app-text-primary)}.tools-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .tools-count[_ngcontent-%COMP%]{font-size:11px;height:20px;background-color:var(--app-surface);color:var(--app-text-secondary);border:1px solid var(--app-divider)}.tools-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.tools-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.tools-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.active-tools-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.active-tools-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin:0 0 var(--spacing-md) 0;font-size:14px;font-weight:600;color:var(--app-text-primary)}.active-tools-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-success)}.active-tools-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .count-chip[_ngcontent-%COMP%]{margin-left:auto;background-color:var(--app-success-light);color:var(--app-success);font-size:11px;height:20px}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);margin-bottom:var(--spacing-md)}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-sm);background-color:var(--app-success-light);border-radius:var(--radius-sm);font-size:13px;color:var(--app-success)}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-weight:500}.tools-categories[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0 var(--spacing-md)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);background-color:var(--app-surface)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 var(--spacing-md)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:14px;font-weight:500}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .running-chip[_ngcontent-%COMP%]{font-size:10px;height:18px;background-color:var(--app-warning-light);color:var(--app-warning, #ff9800);margin-left:var(--spacing-sm)}.tools-categories[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{font-size:12px;color:var(--app-text-disabled)}.tools-list[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.tool-item[_ngcontent-%COMP%]{border-radius:var(--radius-sm);margin-bottom:var(--spacing-sm);padding:var(--spacing-sm);transition:all var(--transition-fast);border:1px solid transparent}.tool-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.tool-item.disabled[_ngcontent-%COMP%]{opacity:.6}.tool-item.disabled[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{color:var(--app-text-disabled)}.tool-item.running[_ngcontent-%COMP%]{background-color:var(--app-success-light);border-color:var(--app-success)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;margin-bottom:var(--spacing-xs)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex:1}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--app-text-secondary)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-details[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--app-text-primary)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-info[_ngcontent-%COMP%]   .tool-details[_ngcontent-%COMP%]   .shortcut-chip[_ngcontent-%COMP%]{font-size:10px;height:16px;background-color:var(--app-background);color:var(--app-text-secondary);border:1px solid var(--app-divider);font-family:monospace;align-self:flex-start}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]{display:flex;gap:2px;opacity:0;transition:opacity var(--transition-fast)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;color:var(--app-text-secondary)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.tool-item[_ngcontent-%COMP%]   .tool-header[_ngcontent-%COMP%]   .tool-actions[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:4px}.tool-item[_ngcontent-%COMP%]:hover   .tool-actions[_ngcontent-%COMP%]{opacity:1}.tool-item[_ngcontent-%COMP%]   .tool-description[_ngcontent-%COMP%]{font-size:12px;color:var(--app-text-secondary);line-height:1.4}.tool-item[_ngcontent-%COMP%]   .tool-description[_ngcontent-%COMP%]   .last-used[_ngcontent-%COMP%]{color:var(--app-text-disabled);font-style:italic}.tools-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);background-color:var(--app-surface);border-top:1px solid var(--app-divider)}.tools-footer[_ngcontent-%COMP%]   .footer-stats[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md)}.tools-footer[_ngcontent-%COMP%]   .footer-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:12px;color:var(--app-text-secondary)}.tools-footer[_ngcontent-%COMP%]   .footer-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.tools-footer[_ngcontent-%COMP%]   .footer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}.tools-footer[_ngcontent-%COMP%]   .footer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}mat-divider[_ngcontent-%COMP%]{margin:0;opacity:.6}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}@media (prefers-color-scheme: dark){.active-tools-section[_ngcontent-%COMP%]   .active-tools-list[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{background-color:#4caf5026;color:#66bb6a}.tool-item.running[_ngcontent-%COMP%]{background-color:#4caf5026;border-color:#66bb6a}}"]})};var wt=(i,n)=>n.id;function $o(i,n){if(i&1){let e=S();o(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let s=P(e).$implicit,l=d();return M(l.togglePermission(s))}),o(2,"div",21)(3,"div",22)(4,"mat-icon"),r(5),a(),o(6,"span",23),r(7),a(),o(8,"mat-icon",24),r(9),a()(),o(10,"div",25),r(11),a()()()()}if(i&2){let e=n.$implicit,t=d();x("granted",e.granted),c(),g("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),w(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function Go(i,n){if(i&1){let e=S();o(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let s=P(e).$implicit,l=d();return M(l.togglePermission(s))}),o(2,"div",21)(3,"div",22)(4,"mat-icon"),r(5),a(),o(6,"span",23),r(7),a(),o(8,"mat-icon",24),r(9),a()(),o(10,"div",25),r(11),a()()()()}if(i&2){let e=n.$implicit,t=d();x("granted",e.granted),c(),g("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),w(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function Uo(i,n){if(i&1){let e=S();o(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let s=P(e).$implicit,l=d();return M(l.togglePermission(s))}),o(2,"div",21)(3,"div",22)(4,"mat-icon"),r(5),a(),o(6,"span",23),r(7),a(),o(8,"mat-icon",24),r(9),a()(),o(10,"div",25),r(11),a()()()()}if(i&2){let e=n.$implicit,t=d();x("granted",e.granted),c(),g("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),w(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function Wo(i,n){if(i&1){let e=S();o(0,"div",19)(1,"mat-checkbox",20),m("change",function(){let s=P(e).$implicit,l=d();return M(l.togglePermission(s))}),o(2,"div",21)(3,"div",22)(4,"mat-icon"),r(5),a(),o(6,"span",23),r(7),a(),o(8,"mat-icon",24),r(9),a()(),o(10,"div",25),r(11),a()()()()}if(i&2){let e=n.$implicit,t=d();x("granted",e.granted),c(),g("checked",e.granted),c(4),p(e.icon),c(2),p(e.name),c(),g("color",t.getRiskColor(e.riskLevel))("matTooltip","Risk: "+e.riskLevel),c(),w(" ",t.getRiskIcon(e.riskLevel)," "),c(2),p(e.description)}}function Qo(i,n){if(i&1){let e=S();o(0,"mat-chip-row",26),m("removed",function(){let s=P(e).$implicit,l=d();return M(l.removePermittedPath(s))}),o(1,"mat-icon",27),r(2,"check_circle"),a(),r(3),o(4,"button",28)(5,"mat-icon"),r(6,"cancel"),a()()()}if(i&2){let e=n.$implicit;c(3),w(" ",e," ")}}function qo(i,n){if(i&1){let e=S();o(0,"mat-chip-row",29),m("removed",function(){let s=P(e).$implicit,l=d();return M(l.removeBlockedPath(s))}),o(1,"mat-icon",27),r(2,"block"),a(),r(3),o(4,"button",28)(5,"mat-icon"),r(6,"cancel"),a()()()}if(i&2){let e=n.$implicit;c(3),w(" ",e," ")}}var St=class i{constructor(n,e){this.dialogRef=n;this.data=e;e.requestedPermissions?this.permissions.set(e.requestedPermissions):this.permissions.set([{id:"file-read",name:"Read Files",description:"Allow reading files in permitted directories",granted:!1,icon:"visibility",category:"file",riskLevel:"low"},{id:"file-write",name:"Write Files",description:"Allow creating and modifying files",granted:!1,icon:"edit",category:"file",riskLevel:"medium"},{id:"file-delete",name:"Delete Files",description:"Allow deleting files and directories",granted:!1,icon:"delete",category:"file",riskLevel:"high"},{id:"git-read",name:"Git Status",description:"View git status and history",granted:!1,icon:"info",category:"git",riskLevel:"low"},{id:"git-commit",name:"Git Commit",description:"Create git commits",granted:!1,icon:"check_circle",category:"git",riskLevel:"medium"},{id:"git-push",name:"Git Push",description:"Push to remote repositories",granted:!1,icon:"cloud_upload",category:"git",riskLevel:"high"},{id:"system-info",name:"System Info",description:"Read system information",granted:!1,icon:"computer",category:"system",riskLevel:"low"},{id:"system-execute",name:"Execute Commands",description:"Run system commands",granted:!1,icon:"terminal",category:"system",riskLevel:"high"},{id:"tool-search",name:"Search Tools",description:"Use search and grep tools",granted:!1,icon:"search",category:"tool",riskLevel:"low"},{id:"tool-ai",name:"AI Tools",description:"Use AI-powered code analysis",granted:!1,icon:"psychology",category:"tool",riskLevel:"medium"}]),e.currentSessionPermissions&&this.permissions.update(t=>t.map(s=>{let l=e.currentSessionPermissions.find(h=>h.id===s.id);return l?b(v({},s),{granted:l.granted}):s})),(e.permittedPaths||e.blockedPaths)&&this.sessionPaths.set({permitted:e.permittedPaths||[],blocked:e.blockedPaths||[]}),this.groupPermissions()}permissions=f([]);sessionPaths=f({permitted:[],blocked:[]});newPermittedPath="";newBlockedPath="";filePermissions=f([]);systemPermissions=f([]);gitPermissions=f([]);toolPermissions=f([]);groupPermissions(){let n=this.permissions();this.filePermissions.set(n.filter(e=>e.category==="file")),this.systemPermissions.set(n.filter(e=>e.category==="system")),this.gitPermissions.set(n.filter(e=>e.category==="git")),this.toolPermissions.set(n.filter(e=>e.category==="tool"))}togglePermission(n){this.permissions.update(e=>e.map(t=>t.id===n.id?b(v({},t),{granted:!t.granted}):t)),this.groupPermissions()}selectAll(n){this.permissions.update(e=>e.map(t=>t.category===n?b(v({},t),{granted:!0}):t)),this.groupPermissions()}deselectAll(n){this.permissions.update(e=>e.map(t=>t.category===n?b(v({},t),{granted:!1}):t)),this.groupPermissions()}addPermittedPath(){this.newPermittedPath.trim()&&(this.sessionPaths.update(n=>b(v({},n),{permitted:[...n.permitted,this.newPermittedPath.trim()]})),this.newPermittedPath="")}removePermittedPath(n){this.sessionPaths.update(e=>b(v({},e),{permitted:e.permitted.filter(t=>t!==n)}))}addBlockedPath(){this.newBlockedPath.trim()&&(this.sessionPaths.update(n=>b(v({},n),{blocked:[...n.blocked,this.newBlockedPath.trim()]})),this.newBlockedPath="")}removeBlockedPath(n){this.sessionPaths.update(e=>b(v({},e),{blocked:e.blocked.filter(t=>t!==n)}))}applyPermissions(){let n={permissions:this.permissions(),paths:this.sessionPaths()};this.dialogRef.close(n)}cancel(){this.dialogRef.close()}getRiskColor(n){switch(n){case"low":return"primary";case"medium":return"accent";case"high":return"warn";default:return""}}getRiskIcon(n){switch(n){case"low":return"check_circle";case"medium":return"warning";case"high":return"error";default:return"help"}}getGrantedCount(n){return n.filter(e=>e.granted).length}static \u0275fac=function(e){return new(e||i)(Et(kn),Et(En))};static \u0275cmp=E({type:i,selectors:[["app-session-permissions-dialog"]],decls:119,vars:12,consts:[["mat-dialog-title",""],[1,"permissions-container"],[1,"permissions-intro"],["expanded",""],[1,"permission-actions"],["mat-button","",3,"click"],[1,"permission-list"],[1,"permission-item",3,"granted"],[1,"path-section"],[1,"add-path"],["appearance","outline",1,"flex-field"],["matInput","","placeholder","/path/to/permit",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","color","primary",3,"click"],[1,"path-chips"],["matInput","","placeholder","/path/to/block",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","color","warn",3,"click"],[1,"blocked-chip"],["align","end"],["mat-raised-button","","color","primary",3,"click"],[1,"permission-item"],[3,"change","checked"],[1,"permission-content"],[1,"permission-header"],[1,"permission-name"],[1,"risk-icon",3,"color","matTooltip"],[1,"permission-description"],[3,"removed"],["matChipAvatar",""],["matChipRemove",""],[1,"blocked-chip",3,"removed"]],template:function(e,t){e&1&&(o(0,"h2",0)(1,"mat-icon"),r(2,"security"),a(),r(3,` Session Permissions
`),a(),o(4,"mat-dialog-content")(5,"div",1)(6,"div",2)(7,"mat-icon"),r(8,"info"),a(),o(9,"p"),r(10,"Grant temporary permissions for this chat session only. These permissions will be cleared when you start a new conversation."),a()(),o(11,"mat-expansion-panel",3)(12,"mat-expansion-panel-header")(13,"mat-panel-title")(14,"mat-icon"),r(15,"folder"),a(),r(16," File Operations "),a(),o(17,"mat-panel-description"),r(18),a()(),o(19,"div",4)(20,"button",5),m("click",function(){return t.selectAll("file")}),r(21,"Select All"),a(),o(22,"button",5),m("click",function(){return t.deselectAll("file")}),r(23,"Clear All"),a()(),o(24,"div",6),O(25,$o,12,9,"div",7,wt),a()(),o(27,"mat-expansion-panel")(28,"mat-expansion-panel-header")(29,"mat-panel-title")(30,"mat-icon"),r(31,"source"),a(),r(32," Git Operations "),a(),o(33,"mat-panel-description"),r(34),a()(),o(35,"div",4)(36,"button",5),m("click",function(){return t.selectAll("git")}),r(37,"Select All"),a(),o(38,"button",5),m("click",function(){return t.deselectAll("git")}),r(39,"Clear All"),a()(),o(40,"div",6),O(41,Go,12,9,"div",7,wt),a()(),o(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title")(46,"mat-icon"),r(47,"computer"),a(),r(48," System Commands "),a(),o(49,"mat-panel-description"),r(50),a()(),o(51,"div",4)(52,"button",5),m("click",function(){return t.selectAll("system")}),r(53,"Select All"),a(),o(54,"button",5),m("click",function(){return t.deselectAll("system")}),r(55,"Clear All"),a()(),o(56,"div",6),O(57,Uo,12,9,"div",7,wt),a()(),o(59,"mat-expansion-panel")(60,"mat-expansion-panel-header")(61,"mat-panel-title")(62,"mat-icon"),r(63,"build"),a(),r(64," Tools & Extensions "),a(),o(65,"mat-panel-description"),r(66),a()(),o(67,"div",4)(68,"button",5),m("click",function(){return t.selectAll("tool")}),r(69,"Select All"),a(),o(70,"button",5),m("click",function(){return t.deselectAll("tool")}),r(71,"Clear All"),a()(),o(72,"div",6),O(73,Wo,12,9,"div",7,wt),a()(),o(75,"mat-expansion-panel")(76,"mat-expansion-panel-header")(77,"mat-panel-title")(78,"mat-icon"),r(79,"route"),a(),r(80," Path Restrictions (Session Only) "),a(),o(81,"mat-panel-description"),r(82),a()(),o(83,"div",8)(84,"h4"),r(85,"Additional Permitted Paths"),a(),o(86,"div",9)(87,"mat-form-field",10)(88,"mat-label"),r(89,"Add Path"),a(),o(90,"input",11),X("ngModelChange",function(l){return Z(t.newPermittedPath,l)||(t.newPermittedPath=l),l}),m("keyup.enter",function(){return t.addPermittedPath()}),a()(),o(91,"button",12),m("click",function(){return t.addPermittedPath()}),o(92,"mat-icon"),r(93,"add_circle"),a()()(),o(94,"mat-chip-set",13),O(95,Qo,7,1,"mat-chip-row",null,j),a()(),k(97,"mat-divider"),o(98,"div",8)(99,"h4"),r(100,"Additional Blocked Paths"),a(),o(101,"div",9)(102,"mat-form-field",10)(103,"mat-label"),r(104,"Add Path"),a(),o(105,"input",14),X("ngModelChange",function(l){return Z(t.newBlockedPath,l)||(t.newBlockedPath=l),l}),m("keyup.enter",function(){return t.addBlockedPath()}),a()(),o(106,"button",15),m("click",function(){return t.addBlockedPath()}),o(107,"mat-icon"),r(108,"block"),a()()(),o(109,"mat-chip-set",13),O(110,qo,7,1,"mat-chip-row",16,j),a()()()()(),o(112,"mat-dialog-actions",17)(113,"button",5),m("click",function(){return t.cancel()}),r(114,"Cancel"),a(),o(115,"button",18),m("click",function(){return t.applyPermissions()}),o(116,"mat-icon"),r(117,"check"),a(),r(118," Apply Permissions "),a()()),e&2&&(c(18),A(" ",t.getGrantedCount(t.filePermissions())," of ",t.filePermissions().length," granted "),c(7),y(t.filePermissions()),c(9),A(" ",t.getGrantedCount(t.gitPermissions())," of ",t.gitPermissions().length," granted "),c(7),y(t.gitPermissions()),c(9),A(" ",t.getGrantedCount(t.systemPermissions())," of ",t.systemPermissions().length," granted "),c(7),y(t.systemPermissions()),c(9),A(" ",t.getGrantedCount(t.toolPermissions())," of ",t.toolPermissions().length," granted "),c(7),y(t.toolPermissions()),c(9),A(" ",t.sessionPaths().permitted.length," permitted, ",t.sessionPaths().blocked.length," blocked "),c(8),Y("ngModel",t.newPermittedPath),c(5),y(t.sessionPaths().permitted),c(10),Y("ngModel",t.newBlockedPath),c(5),y(t.sessionPaths().blocked))},dependencies:[T,N,re,ce,le,An,In,Fn,Dn,z,ve,R,dt,lt,I,D,L,U,B,yn,at,st,Oe,we,be,ot,ke,Se,ge,ae,se,pe,gt,H,W],styles:[".permissions-container[_ngcontent-%COMP%]{width:600px;max-width:90vw;max-height:70vh;overflow-y:auto}.permissions-intro[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);padding:var(--spacing-md);background-color:var(--app-info-light);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg)}.permissions-intro[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.permissions-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--app-text-secondary);font-size:14px}mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);background-color:var(--app-surface)}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-weight:500}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-text-secondary)}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{color:var(--app-text-secondary);font-size:12px}.permission-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-md);padding:0 var(--spacing-md)}.permission-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}.permission-list[_ngcontent-%COMP%]{padding:0 var(--spacing-md) var(--spacing-md)}.permission-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);padding:var(--spacing-sm);border-radius:var(--radius-sm);transition:background-color var(--transition-fast)}.permission-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.permission-item.granted[_ngcontent-%COMP%]{background-color:var(--app-success-light)}.permission-item.granted[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{font-weight:500}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{width:100%}.permission-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox-label{width:100%}.permission-content[_ngcontent-%COMP%]{width:100%}.permission-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-xs)}.permission-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--app-text-secondary)}.permission-header[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{flex:1;font-size:14px;color:var(--app-text-primary)}.permission-header[_ngcontent-%COMP%]   .risk-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.permission-description[_ngcontent-%COMP%]{margin-left:calc(18px + var(--spacing-sm));font-size:12px;color:var(--app-text-secondary);line-height:1.4}.path-section[_ngcontent-%COMP%]{padding:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--app-text-primary);font-weight:500;font-size:14px;margin-bottom:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   .add-path[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:flex-start;margin-bottom:var(--spacing-md)}.path-section[_ngcontent-%COMP%]   .add-path[_ngcontent-%COMP%]   .flex-field[_ngcontent-%COMP%]{flex:1}.path-section[_ngcontent-%COMP%]   .add-path[_ngcontent-%COMP%]   .flex-field[_ngcontent-%COMP%]     .mat-mdc-form-field{width:100%}.path-section[_ngcontent-%COMP%]   .path-chips[_ngcontent-%COMP%]   mat-chip-row[_ngcontent-%COMP%]{margin:var(--spacing-xs)}.path-section[_ngcontent-%COMP%]   .path-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]{--mat-chip-background-color: var(--error-light, #ffebee);--mat-chip-text-color: var(--error-color, #f44336)}.path-section[_ngcontent-%COMP%]   .path-chips[_ngcontent-%COMP%]   mat-chip-row.blocked-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--error-color, #f44336)}mat-divider[_ngcontent-%COMP%]{margin:var(--spacing-lg) 0}mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}mat-dialog-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}mat-dialog-actions[_ngcontent-%COMP%]{padding:var(--spacing-md);border-top:1px solid var(--app-divider)}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:var(--spacing-xs)}@media (prefers-color-scheme: dark){.permissions-intro[_ngcontent-%COMP%]{background-color:rgba(var(--primary-rgb),.1)}.permission-item.granted[_ngcontent-%COMP%]{background-color:#4caf501a}}@media (max-width: 768px){.permissions-container[_ngcontent-%COMP%]{width:100%;max-width:100%}}"]})};var Ko=["messagesContainer"];function Yo(i,n){if(i&1){let e=S();o(0,"app-session-permissions-panel",9),m("permissionsChanged",function(s){P(e);let l=d(2);return M(l.onPermissionsChanged(s))})("pathsChanged",function(s){P(e);let l=d(2);return M(l.onPathsChanged(s))}),a()}if(i&2){let e=d(2);g("permissions",e.sessionPermissions())("paths",e.sessionPaths())}}function Zo(i,n){i&1&&k(0,"app-context-files-panel")}function Xo(i,n){i&1&&k(0,"app-chat-history-panel")}function Jo(i,n){i&1&&k(0,"app-tools-panel")}function ea(i,n){if(i&1){let e=S();o(0,"div",6)(1,"app-panel",7),m("close",function(){P(e);let s=d();return M(s.closeSidecar())}),_(2,Yo,1,2,"app-session-permissions-panel",8)(3,Zo,1,0,"app-context-files-panel")(4,Xo,1,0,"app-chat-history-panel")(5,Jo,1,0,"app-tools-panel"),a()()}if(i&2){let e,t=d();g("@slideIn",t.showSidecar()),c(),g("title",t.getSidecarTitle())("showCloseButton",!0),c(),u((e=t.sidecarView())==="permissions"?2:e==="context"?3:e==="history"?4:e==="tools"?5:-1)}}var ri=class i{messagesContainer;chatService=C(Yn);snackBar=C(rt);dialog=C(Tn);streamSubscription;messages=f([]);inputMessage="";isLoading=f(!1);isStreaming=f(!1);currentStreamMessage=f("");headerActions=[{id:"permissions",icon:"security",tooltip:"Session Permissions"},{id:"context",icon:"folder_open",tooltip:"Context & Files"},{id:"history",icon:"history",tooltip:"Chat History"},{id:"tools",icon:"build",tooltip:"Available Tools"}];sessionPermissions=f([]);sessionPaths=f({permitted:[],blocked:[]});activePermissionsCount=f(0);showSidecar=f(!1);sidecarView=f("permissions");useStreaming=!0;selectedProvider="openai";selectedModel="gpt-4";ngOnInit(){this.messages=this.chatService.getMessages(),this.loadConfiguration(),rn(()=>{let n=this.chatService.getConnectionState()();n==="connected"?console.log("Connected to SignalR hub"):n==="disconnected"&&console.log("Disconnected from SignalR hub")})}ngOnDestroy(){this.streamSubscription&&this.streamSubscription.unsubscribe()}loadConfiguration(){this.chatService.getConfiguration().subscribe({next:n=>{n.defaultProvider&&(this.selectedProvider=n.defaultProvider),n.defaultModel&&(this.selectedModel=n.defaultModel)},error:n=>{console.error("Failed to load configuration:",n)}})}onHeaderAction(n){this.toggleSidecar(n)}sendMessage(n){let e=n||this.inputMessage.trim();if(!e||this.isLoading()||this.isStreaming())return;let t={id:crypto.randomUUID(),content:e,role:"user",timestamp:new Date};this.chatService.addMessage(t),this.inputMessage="",this.scrollToBottom();let s={message:e,provider:this.selectedProvider,model:this.selectedModel,stream:this.useStreaming};this.useStreaming?this.sendStreamingMessage(s):this.sendRegularMessage(s)}sendRegularMessage(n){this.isLoading.set(!0),this.chatService.sendMessage(n).subscribe({next:e=>{let t={id:e.id||crypto.randomUUID(),content:e.content,role:"assistant",timestamp:new Date,toolCalls:e.toolCalls,metadata:{usage:e.usage}};this.chatService.addMessage(t),this.isLoading.set(!1),this.scrollToBottom()},error:e=>{this.isLoading.set(!1),this.handleError(e)}})}sendStreamingMessage(n){this.isStreaming.set(!0),this.currentStreamMessage.set("");let e=crypto.randomUUID(),t={id:e,content:"",role:"assistant",timestamp:new Date};this.chatService.addMessage(t);let s="";this.streamSubscription=this.chatService.streamMessage(n).subscribe({next:l=>{s+=l,this.messages.update(h=>h.map(ee=>ee.id===e?b(v({},ee),{content:s}):ee)),this.scrollToBottom()},error:l=>{this.isStreaming.set(!1),this.handleError(l)},complete:()=>{this.isStreaming.set(!1),this.currentStreamMessage.set("")}})}handleError(n){console.error("Chat error:",n);let e="Failed to send message";n.error?.message?e=n.error.message:n.message&&(e=n.message),this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]});let t={id:crypto.randomUUID(),content:`Error: ${e}`,role:"system",timestamp:new Date};this.chatService.addMessage(t),(e.includes("connection")||e.includes("network"))&&setTimeout(()=>{this.chatService.reconnect()},2e3)}scrollToBottom(){setTimeout(()=>{if(this.messagesContainer){let n=this.messagesContainer.nativeElement;n.scrollTop=n.scrollHeight}},100)}handleKeyDown(n){if(n.key==="Enter"){if(n.shiftKey)return;n.preventDefault(),this.sendMessage()}}openSessionPermissions(){this.dialog.open(St,{width:"700px",data:{currentSessionPermissions:this.sessionPermissions(),permittedPaths:this.sessionPaths().permitted,blockedPaths:this.sessionPaths().blocked}}).afterClosed().subscribe(e=>{e&&(this.sessionPermissions.set(e.permissions),this.sessionPaths.set(e.paths),this.updateActivePermissionsCount(),this.updateBackendPermissions(),this.snackBar.open("Session permissions updated","Close",{duration:3e3}))})}updateActivePermissionsCount(){let n=this.sessionPermissions().filter(e=>e.granted).length;this.activePermissionsCount.set(n)}updateBackendPermissions(){let n={permissions:this.sessionPermissions().filter(e=>e.granted),paths:this.sessionPaths()};console.log("Updating backend with session permissions:",n)}clearSession(){confirm("This will clear all messages and session permissions. Continue?")&&this.chatService.clearHistory().subscribe({next:()=>{this.messages.set([]),this.sessionPermissions.set([]),this.sessionPaths.set({permitted:[],blocked:[]}),this.activePermissionsCount.set(0),this.updateBackendPermissions(),this.snackBar.open("Session cleared successfully","Close",{duration:2e3,panelClass:["success-snackbar"]})},error:n=>{console.error("Failed to clear session:",n),this.snackBar.open("Failed to clear session","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}hasActivePermissions(){return this.activePermissionsCount()>0}toggleSidecar(n){this.showSidecar()&&this.sidecarView()===n?this.showSidecar.set(!1):(this.sidecarView.set(n),this.showSidecar.set(!0))}closeSidecar(){this.showSidecar.set(!1)}getSidecarTitle(){switch(this.sidecarView()){case"permissions":return"Session Permissions";case"context":return"Context & Files";case"history":return"Chat History";case"tools":return"Available Tools";default:return""}}onPermissionsChanged(n){this.sessionPermissions.set(n),this.updateActivePermissionsCount(),this.updateBackendPermissions()}onPathsChanged(n){this.sessionPaths.set(n),this.updateBackendPermissions()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-chat-container"]],viewQuery:function(e,t){if(e&1&&_e(Ko,5),e&2){let s;te(s=ne())&&(t.messagesContainer=s.first)}},decls:6,vars:11,consts:[[1,"chat-layout"],[1,"chat-container"],[3,"actionClick","clearSession","title","showPermissionsBadge","permissionsCount","actions"],[3,"messages","isLoading","showWelcome"],[3,"messageSent","disabled"],["class","chat-sidecar",4,"ngIf"],[1,"chat-sidecar"],[3,"close","title","showCloseButton"],[3,"permissions","paths"],[3,"permissionsChanged","pathsChanged","permissions","paths"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"app-chat-header",2),m("actionClick",function(l){return t.onHeaderAction(l)})("clearSession",function(){return t.clearSession()}),a(),k(3,"app-messages-list",3),o(4,"app-chat-input",4),m("messageSent",function(l){return t.sendMessage(l)}),a()(),Pe(5,ea,6,4,"div",5),a()),e&2&&(c(),x("with-sidecar",t.showSidecar()),c(),g("title","AI Assistant")("showPermissionsBadge",t.hasActivePermissions())("permissionsCount",t.activePermissionsCount())("actions",t.headerActions),c(),g("messages",t.messages())("isLoading",t.isLoading())("showWelcome",!0),c(),g("disabled",t.isLoading()),c(),g("ngIf",t.showSidecar()))},dependencies:[T,dn,N,I,z,L,B,me,H,pt,Ct,xt,zn,Pt,bt,Ot,yt],styles:[".chat-layout[_ngcontent-%COMP%]{height:100%;display:flex;position:relative}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:var(--app-background);transition:margin-right .3s ease-in-out}.chat-container.with-sidecar[_ngcontent-%COMP%]{margin-right:400px}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg) var(--spacing-xl);background-color:var(--app-surface);border-bottom:1px solid var(--app-divider);box-shadow:0 2px 4px #0000000d;z-index:2}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:400;color:var(--app-text-primary)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .permissions-chip[_ngcontent-%COMP%]{height:28px;font-size:12px;background-color:var(--app-success-light);color:var(--success-color)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .permissions-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{height:24px;margin:0 var(--spacing-sm)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--primary-color);background-color:var(--app-selected)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-mdc-button-persistent-ripple{border-radius:50%}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-badge-content{font-size:10px;line-height:14px;font-weight:600}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--spacing-lg) 0;scroll-behavior:smooth}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:3px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--app-text-disabled)}.welcome-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;padding:var(--spacing-xl)}.welcome-message[_ngcontent-%COMP%]   .welcome-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:var(--primary-color);opacity:.8;margin-bottom:var(--spacing-lg)}.welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--spacing-sm) 0;color:var(--app-text-primary);font-weight:400}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--app-text-secondary);margin:0}.messages-list[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 var(--spacing-lg)}.message[_ngcontent-%COMP%]{display:flex;margin-bottom:var(--spacing-lg)}.message.user[_ngcontent-%COMP%]{justify-content:flex-end}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{flex-direction:row-reverse}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{margin-left:var(--spacing-md);margin-right:0;background-color:var(--primary-color);color:#fff}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;border-radius:18px 18px 4px}.message.assistant[_ngcontent-%COMP%]{justify-content:flex-start}.message.assistant[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{background-color:var(--app-surface);color:var(--primary-color);border:1px solid var(--app-divider)}.message.assistant[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:var(--app-surface);color:var(--app-text-primary);border-radius:18px 18px 18px 4px;box-shadow:0 1px 2px #0000000d}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{display:flex;align-items:flex-start;max-width:70%}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;margin-right:var(--spacing-md);flex-shrink:0}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);white-space:pre-wrap;word-wrap:break-word;line-height:1.5}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--spacing-sm) var(--spacing-md)}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:8px;height:8px;border-radius:50%;background-color:var(--app-text-secondary);margin:0 2px;animation:_ngcontent-%COMP%_typing 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{transform:translateY(0);opacity:.5}30%{transform:translateY(-10px);opacity:1}}.input-container[_ngcontent-%COMP%]{background-color:var(--app-surface);border-top:1px solid var(--app-divider);box-shadow:0 -2px 10px #0000000d;z-index:2}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:var(--spacing-md) var(--spacing-lg);position:relative;display:flex;align-items:flex-end}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-md) 60px var(--spacing-md) var(--spacing-md);border:none;outline:none;background-color:var(--app-background);border-radius:24px;resize:none;font-family:inherit;font-size:15px;line-height:1.5;color:var(--app-text-primary);min-height:48px;max-height:120px;overflow-y:auto;transition:box-shadow var(--transition-fast)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px var(--app-focus)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::placeholder{color:var(--app-text-secondary)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--app-divider);border-radius:2px}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{position:absolute;right:calc(var(--spacing-lg) + 4px);bottom:calc(var(--spacing-md) + 4px);width:40px;height:40px;background-color:var(--primary-color);color:#fff;transition:all var(--transition-fast)}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05);box-shadow:0 2px 8px #2196f34d}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{background-color:var(--app-divider);color:var(--app-text-disabled);cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-sidecar[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;width:400px;background-color:var(--app-surface);border-left:1px solid var(--app-divider);box-shadow:-2px 0 8px #0000001a;display:flex;flex-direction:column;z-index:10}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--app-divider);background-color:var(--app-surface)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:var(--app-text-primary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--app-text-primary);background-color:var(--app-hover)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-panel[_ngcontent-%COMP%], .chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .history-panel[_ngcontent-%COMP%], .chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]{padding:var(--spacing-md)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--spacing-md) 0;font-size:14px;font-weight:500;color:var(--app-text-secondary);text-transform:uppercase}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   .context-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:var(--spacing-xs)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{cursor:pointer}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover{background-color:var(--app-hover)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-text-secondary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemTitle][_ngcontent-%COMP%]{font-size:14px;color:var(--app-text-primary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   [matListItemLine][_ngcontent-%COMP%]{font-size:12px;color:var(--app-text-secondary)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:14px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-nav-list[dense][_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:36px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-nav-list[dense][_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.chat-sidecar[_ngcontent-%COMP%]   .sidecar-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-nav-list[dense][_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}@media (max-width: 1200px){.chat-sidecar[_ngcontent-%COMP%]{width:350px}.chat-container.with-sidecar[_ngcontent-%COMP%]{margin-right:350px}}@media (max-width: 768px){.chat-header[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-lg)}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.messages-list[_ngcontent-%COMP%]{padding:0 var(--spacing-md)}.message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{max-width:85%}.input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md)}.chat-sidecar[_ngcontent-%COMP%]{width:100%;position:fixed}.chat-container.with-sidecar[_ngcontent-%COMP%]{margin-right:0}}"],data:{animation:[zt("slideIn",[qe("false",Qe({transform:"translateX(100%)",opacity:0})),qe("true",Qe({transform:"translateX(0)",opacity:1})),Lt("false <=> true",Bt("300ms ease-in-out"))])]}})};export{ri as ChatContainer};
